<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#ffffff">
    <!-- Enhanced mobile performance -->
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="HandheldFriendly" content="true">
    <title>Collabo AI Pro - הסוכן הדיגיטלי המתקדם לעסקים</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #2563eb;
            --primary-gradient: linear-gradient(135deg, rgba(37, 99, 235, 0.5), rgba(59, 130, 246, 0.5));
            --ai-purple: rgba(76, 29, 149, 0.5);
            --advice-purple: #8b5cf6;
            --success-green: #10b981;
            --text-primary: #37352f;
            --text-secondary: #6b7280;
            --text-muted: #9ca3af;
            --border-light: #e5e7eb;
            --bg-light: #ffffff;
            --bg-gray: #f9fafb;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --border-radius: 6px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Utility Classes */
        .flex-center { display: flex; align-items: center; justify-content: center; }
        .flex-between { display: flex; align-items: center; justify-content: space-between; }
        .flex-start { display: flex; align-items: center; }
        .flex-col { display: flex; flex-direction: column; }
        
        .p-4 { padding: 16px; }
        .p-6 { padding: 24px; }
        .p-10 { padding: 40px; }
        .py-4 { padding-top: 16px; padding-bottom: 16px; }
        .px-6 { padding-left: 24px; padding-right: 24px; }
        
        .mb-4 { margin-bottom: 16px; }
        .mb-6 { margin-bottom: 24px; }
        .mb-8 { margin-bottom: 32px; }
        
        .rounded-full { border-radius: 50%; }
        .rounded-md { border-radius: 12px; }
        .rounded-lg { border-radius: var(--border-radius-lg); }
        
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .font-black { font-weight: 800; }
        
        .translate-y-1 { transform: translateY(-1px); }
        .translate-y-2 { transform: translateY(-2px); }
        .translate-x-0 { transform: translateX(0); }
        
        .text-center { text-align: center; }
        .text-secondary { color: var(--text-secondary); }
        .text-muted { color: var(--text-muted); }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.5;
            color: #37352f;
            direction: rtl;
            background: #ffffff;
            font-weight: 400;
            min-height: 100vh;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Simple Header */
        .header {
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 16px 0;
        }

        /* Simple Header Styles */
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            position: relative;
        }

        /* Logo Section - Right aligned */
        .logo-section {
            display: flex;
            align-items: center;
            flex: 0 0 auto;
        }
        
        /* Navigation container - center */
        .nav-container {
            flex: 1;
            display: flex;
            justify-content: center;
        }

        .logo-text {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            font-size: 24px;
            font-weight: 700;
            color: #000000;
            display: flex;
            flex-direction: column;
            line-height: 1;
        }
        
        .logo-text .ai-highlight {
            color: #4c1d95;
        }
        
        .logo-text .pro-sub {
            font-size: 12px;
            font-weight: 500;
            color: #666666;
            margin-top: 2px;
            letter-spacing: 0.5px;
        }

        /* Simple Navigation */
        .nav-container {
            position: relative;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 40px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 4px;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
            white-space: nowrap;
            background: transparent;
        }

        .nav-link:hover {
            color: var(--ai-purple);
            background: rgba(76, 29, 149, 0.1);
            transform: translateY(-1px);
        }

        .nav-link:hover i {
            color: var(--ai-purple);
            transform: scale(1.1);
        }

        .nav-link:hover .nav-indicator {
            width: 60%;
        }

        /* CTA Button */
        .header-cta-section {
            animation: slideInFromRight 0.8s ease-out 0.4s both;
        }

        .cta-button {
            position: relative;
            background: white;
            border: none;
            border-radius: var(--border-radius);
            padding: 16px 28px;
            color: var(--text-primary);
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 4px 15px rgba(255, 49, 49, 0.3);
        }

        .cta-glow {
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff6b6b, transparent, #ff3131, transparent, #ff6b6b);
            border-radius: var(--border-radius);
            opacity: 0;
            z-index: -1;
            animation: rotate 3s linear infinite;
            transition: opacity 0.3s ease;
        }

        .cta-button:hover .cta-glow {
            opacity: 0;
        }

        .cta-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 49, 49, 0.4);
        }

        .cta-icon {
            transition: transform 0.3s ease;
        }

        .cta-button:hover .cta-icon {
            transform: translateX(-3px);
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            gap: 4px;
            cursor: pointer;
            padding: 8px;
        }

        .mobile-menu-toggle span {
            width: 25px;
            height: 3px;
            background: white;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .mobile-menu-toggle:hover span {
            background: var(--secondary-blue);
            transform: scaleX(1.1);
        }

        .mobile-menu-toggle:hover span:nth-child(2) {
            transform: scaleX(0.8);
        }

        /* Active Navigation States */
        .nav-item.active .nav-link {
            background: rgba(37, 99, 235, 0.15);
            color: var(--primary-blue);
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.2);
            font-weight: 600;
        }
        
        .nav-item.active .nav-link i {
            color: var(--primary-blue);
        }

        .nav-item.active .nav-indicator {
            width: 80%;
            background: var(--primary-blue);
        }

        /* Scroll Progress Indicator */
        .scroll-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-blue), var(--secondary-blue));
            transition: width 0.3s ease;
            border-radius: 1px;
            z-index: 3;
        }
        
        /* Large screens optimization */
        @media (min-width: 1400px) {
            .container {
                max-width: 1400px;
            }
            
            .hero h1 {
                font-size: 64px;
            }
            
            .hero .subtitle {
                font-size: 24px;
            }
            
            .section-header h2 {
                font-size: 48px;
            }
            
            .demo-container {
                max-width: 1200px;
                margin: 0 auto;
            }
            
            .testimonials-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 40px;
            }
            
            .stats-grid {
                max-width: 1000px;
                margin: 0 auto;
            }
        }

        /* Enhanced Mobile Menu */
        @media (max-width: 1024px) {
            .nav-container {
                display: none;
            }
            
            .mobile-menu-toggle {
                display: flex;
            }

            .nav-menu.mobile-active {
                position: fixed;
                top: 80px;
                left: 20px;
                right: 20px;
                background: rgba(15, 23, 42, 0.95);
                backdrop-filter: blur(20px);
                border-radius: 20px;
                padding: 16px;
                flex-direction: column;
                gap: 12px;
                box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
                border: 1px solid rgba(255, 255, 255, 0.1);
                z-index: 1000;
                animation: mobileMenuSlide 0.3s ease;
            }

            @keyframes mobileMenuSlide {
                from {
                    opacity: 0;
                    transform: translateY(-10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .mobile-active .nav-link {
                width: 100%;
                justify-content: center;
                padding: 16px 16px;
                margin: 4px 0;
            }
        }

        /* Tablet Portrait (768px - 1024px) */
        @media screen and (max-width: 1024px) and (min-width: 769px) {
            .header {
                padding: 12px 0;
            }
            
            .container {
                max-width: 100%;
                padding: 0 16px;
            }
            
            .hero {
                padding: 100px 0 60px;
            }
            
            .hero h1 {
                font-size: clamp(28px, 4vw, 42px);
                line-height: 1.4;
                max-width: 100%;
            }
            
            .hero h1 .highlight {
                color: #4c1d95;
                font-weight: 700;
                font-size: 1.05em;
                text-shadow: 0 0 1px rgba(76, 29, 149, 0.3);
                font-style: italic;
            }
            
            .hero .subtitle {
                font-size: 20px;
                max-width: 500px;
            }
            
            .hero-cta-group {
                gap: 12px;
            }
            
            .demo-container {
                grid-template-columns: 1fr;
                gap: 32px;
                max-width: 800px;
            }
            
            .section-title {
                font-size: clamp(24px, 4vw, 36px);
            }
            
            .testimonials-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 24px;
            }
            
            .comparison-table {
                grid-template-columns: 1.2fr 1fr 1fr;
                gap: 16px;
                padding: 24px;
            }
        }

        /* Base Button Styles */
        .btn-base {
            display: inline-block;
            border-radius: var(--border-radius);
            text-decoration: none;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background: white;
            color: var(--text-primary);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .btn-gradient {
            background: transparent;
            color: var(--text-primary);
            box-shadow: 0 4px 15px rgba(255, 49, 49, 0.3);
        }
        .btn-gradient:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 49, 49, 0.4);
        }

        /* Mobile Demo Button in Header */
        .mobile-demo-nav {
            display: none;
        }

        .mobile-demo-button {
            background: transparent;
            color: var(--text-primary);
            border: none;
            padding: 10px 16px;
            border-radius: var(--border-radius);
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            box-shadow: 0 4px 15px rgba(255, 49, 49, 0.3);
            animation: mobileDemoPulse 2.5s infinite;
        }

        .mobile-demo-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 49, 49, 0.4);
            animation: none;
        }

        .mobile-demo-button i {
            font-size: 12px;
        }

        @keyframes mobileDemoPulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(255, 49, 49, 0.3);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(255, 49, 49, 0.5);
            }
        }

        /* Hero Buttons */
        .hero-buttons {
            display: flex;
            gap: 24px;
            margin: 40px 0 60px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .hero-btn {
            background: transparent;
            border: none;
            border-radius: var(--border-radius);
            padding: 14px 18px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-width: 220px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .hero-btn:hover {
            transform: translateY(-3px);
        }

        .demo-btn {
            box-shadow: 0 4px 15px rgba(255, 49, 49, 0.3);
            animation: mobileDemoPulse 2.5s infinite;
        }

        .demo-btn:hover {
            box-shadow: 0 8px 25px rgba(255, 49, 49, 0.4);
            animation: none;
        }

        .cta-btn {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .cta-btn:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        @keyframes mobileDemoPulse {
            0%, 100% { 
                transform: scale(1);
            }
            50% { 
                transform: scale(1.05);
            }
        }

        /* Highlight text effect - more subtle */
        .highlight-text {
            background: linear-gradient(120deg, 
                transparent 0%, 
                rgba(255, 255, 0, 0.08) 15%, 
                rgba(255, 165, 0, 0.05) 35%, 
                transparent 50%, 
                rgba(139, 92, 246, 0.05) 70%, 
                rgba(59, 130, 246, 0.08) 85%, 
                transparent 100%);
            background-size: 200% 100%;
            animation: subtleGlow 12s ease-in-out infinite;
            border-radius: 4px;
            padding: 2px 4px;
            color: #000000 !important;
            font-style: italic;
            text-shadow: 0.5px 0.5px 0px rgba(0, 0, 0, 0.1);
        }

        @keyframes subtleGlow {
            0%, 100% { 
                background-position: 0% 50%; 
                opacity: 0.7;
            }
            50% { 
                background-position: 100% 50%; 
                opacity: 0.9;
            }
        }

        .revenue-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }


        .revenue-content h3 {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
            line-height: 1.2;
        }

        .revenue-content p {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0;
            line-height: 1.4;
        }



        .btn-lg {
            padding: 16px 32px;
            font-size: 16px;
            border-radius: var(--border-radius-lg);
        }

        .header-cta {
            font-size: 14px;
        }

        /* Hero Section - Enterprise Grade */
        .hero {
            background: radial-gradient(circle at 30% 40%, rgba(37, 99, 235, 0.12) 0%, rgba(139, 92, 246, 0.06) 30%, transparent 50%);
            color: var(--text-primary);
            padding: 80px 0 0;
            margin-top: 60px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 40px;
            position: relative;
            z-index: 2;
        }
        
        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(37, 99, 235, 0.1);
            color: #2563eb;
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 32px;
            border: 1px solid rgba(37, 99, 235, 0.2);
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.1);
        }
        
        .hero h1 {
            font-size: clamp(36px, 6vw, 56px);
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 24px;
            color: var(--text-primary);
            letter-spacing: -0.02em;
        }
        
        .hero h1 .highlight {
            color: #4c1d95;
            font-weight: 700;
            font-size: 1.05em;
            text-shadow: 0 0 1px rgba(76, 29, 149, 0.3);
        }
        
        .hero .subtitle {
            font-size: 20px;
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes glow {
            0% { box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); }
            100% { box-shadow: 0 8px 32px rgba(255, 255, 255, 0.2); }
        }
        
        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(1deg); }
            66% { transform: translateY(5px) rotate(-1deg); }
        }

        .demo {
            background: #f8fafc;
        }
        

        /* Mobile Hero Responsive */
        @media screen and (max-width: 768px) {
            .hero {
                padding: 40px 0;
            }
            
            .hero .container {
                max-width: 100%;
                padding: 0 16px;
            }
            
            .hero-content {
                padding: 0;
                max-width: 100%;
            }
            
            .hero-badge {
                display: none !important;
            }
            
            .hero h1 {
                font-size: clamp(28px, 7vw, 40px);
                margin-bottom: 20px;
                line-height: 1.1;
            }
            
            .hero .subtitle {
                font-size: 18px;
                margin-bottom: 28px;
                line-height: 1.5;
                max-width: 100%;
            }
            
            .hero-cta-group {
                flex-direction: column;
                gap: 16px;
                margin: 32px 0 40px 0;
                align-items: stretch;
            }
            
            .btn-primary,
            .cta-secondary {
                width: 100%;
                max-width: 300px;
                margin: 0 auto;
                padding: 14px 24px;
                font-size: 14px;
            }
        }

        .hero-content {
            position: relative;
            z-index: 2;
            animation: fadeInUp 1s ease-out;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }
        
        .hero-content h1 {
            margin-bottom: 24px;
        }
        
        .hero-content .subtitle {
            margin-bottom: 32px;
            font-size: 20px;
            line-height: 1.6;
            color: var(--text-secondary);
            max-width: 680px;
            margin-left: auto;
            margin-right: auto;
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            background: var(--bg-gray);
            border: 1px solid var(--border-light);
            padding: 10px 20px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 28px;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }

        .hero-badge:hover {
            background: rgba(76, 29, 149, 0.1);
            border-color: var(--ai-purple);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(96, 165, 250, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(96, 165, 250, 0); }
        }

        .hero-badge i {
            margin-left: 8px;
            color: var(--ai-purple);
        }

        /* Global heading consistency for desktop */
        h1 {
            font-size: clamp(36px, 6vw, 56px);
            font-weight: 700;
            line-height: 1.2;
            color: var(--text-primary);
            font-family: inherit;
        }
        
        h2 {
            font-size: clamp(28px, 4vw, 40px);
            font-weight: 700;
            line-height: 1.3;
            color: var(--text-primary);
            font-family: inherit;
        }
        
        h3 {
            font-size: 24px;
            font-weight: 700;
            line-height: 1.4;
            color: var(--text-primary);
            font-family: inherit;
        }
        
        .section-subtitle,
        .hero .subtitle,
        .section-header p {
            font-size: 18px;
            line-height: 1.6;
            color: var(--text-secondary);
            font-family: inherit;
        }

        .hero h1 {
            font-size: clamp(36px, 6vw, 56px);
            font-weight: 700;
            margin-bottom: 24px;
            line-height: 1.2;
            color: var(--text-primary);
        }

        .hero .subtitle {
            margin-bottom: 32px;
            opacity: 0.9;
            font-weight: 400;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-cta-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 40px 0 60px 0;
            flex-wrap: wrap;
            align-items: center;
        }

        .cta-primary {
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
            padding: 16px 32px;
        }

        .watch-demo-btn {
            box-shadow: 0 4px 15px rgba(255, 49, 49, 0.3);
            padding: 16px 32px;
        }

        .watch-demo-btn:hover {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }
        
        .cta-secondary {
            min-width: 200px;
            padding: 16px 32px;
            border: 2px solid var(--border-light);
            transition: all 0.3s ease;
        }
        
        .cta-secondary:hover {
            border-color: var(--primary-blue);
            background: rgba(37, 99, 235, 0.05);
        }

        .cta-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .cta-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-1px);
        }


        /* Shared Section Styles */
        .section-header {
            text-align: center;
            max-width: 800px;
            margin: 0 auto 80px;
        }

        .section-badge {
            display: inline-block;
            background: rgba(76, 29, 149, 0.1);
            color: var(--ai-purple);
            padding: 6px 12px;
            border-radius: var(--border-radius);
            font-size: 12px;
            font-weight: 500;
            border: 1px solid rgba(76, 29, 149, 0.2);
        }

        .section-title {
            font-size: clamp(28px, 4vw, 40px);
            color: var(--text-primary);
            line-height: 1.3;
            font-weight: 700;
            margin: 12px 0 16px 0;
        }

        .section-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            font-weight: 400;
            line-height: 1.5;
            max-width: 600px;
            margin: 0 auto 48px auto;
        }

        @keyframes slideInFromLeft {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideInFromRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Trust Indicators */


        /* Demo Section */
        .demo {
            background: var(--bg-gray);
            padding: 0 0 80px 0;
        }

        .demo .container {
            position: relative;
            z-index: 2;
            padding: 0 16px;
            max-width: 1200px;
        }

        /* Mobile Responsive Demo Section (768px and below) */
        @media screen and (max-width: 768px) {
            .demo {
                padding: 40px 0;
            }
            
            .demo .container {
                padding: 0 4px;
            }
            
            .demo-container {
                grid-template-columns: 1fr;
                gap: 24px;
                max-width: 100%;
            }
            
            .demo-content h2 {
                font-size: 28px;
                margin-bottom: 16px;
            }
            
            .demo-content p {
                font-size: 14px;
                margin-bottom: 12px;
            }
            
            .demo-features li {
                font-size: 12px;
                margin-bottom: 6px;
            }
            
            .demo-features i {
                margin-left: 8px;
            }
            
            .demo-video {
                padding: 0;
                border-radius: 16px;
            }
            
            .social-feed-demo {
                padding: 0;
                border-radius: 12px;
            }
            
            .facebook-post {
                margin: 0 0 12px 0;
            }
            
            .post-header {
                padding: 12px 16px 8px 16px;
                gap: 8px;
            }
            
            .post-content {
                padding: 0 16px 8px 16px;
                font-size: 14px;
            }
            
            .post-actions {
                padding: 6px 16px;
                gap: 4px;
            }
            
            .post-action {
                padding: 4px 6px;
                font-size: 11px;
            }
            
            
            #keyPoints {
                padding: 16px !important;
                margin-top: 20px !important;
            }
            
            #keyPoints > div:first-child {
                font-size: 14px !important;
                margin-bottom: 10px !important;
            }
            
            .highlight-point {
                font-size: 14px !important;
                gap: 8px !important;
            }
            
            .highlight-point span {
                font-size: 14px !important;
            }
        }

        .demo .section-header h2 {
            color: var(--text-primary);
        }

        .demo .section-header p {
            color: var(--text-secondary);
        }

        .demo-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: clamp(10px, 1.8vw, 25px);
            justify-content: center;
            align-items: flex-start;
            margin: 0 auto;
            max-width: min(99vw, 1800px);
            padding: 0;
            width: 100%;
        }

        .demo-content h2 {
            margin-bottom: 24px;
            line-height: 1.3;
        }

        .demo-content {
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            padding: 0;
        }

        .demo-content p, .status-indicator p {
            font-size: clamp(12px, 2.5vw, 16px);
            color: var(--text-secondary);
            margin-bottom: clamp(8px, 2vw, 16px);
            line-height: 1.4;
            flex-shrink: 1;
        }

        .demo-features {
            list-style: none;
            margin-bottom: 0;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
        }

        .demo-features li {
            display: flex;
            align-items: center;
            margin-bottom: clamp(4px, 1vw, 8px);
            font-size: clamp(11px, 2.2vw, 14px);
            color: var(--text-primary);
            line-height: 1.3;
        }

        .demo-features i {
            color: var(--ai-purple);
            margin-left: clamp(6px, 1.5vw, 12px);
            font-weight: 600;
            flex-shrink: 0;
        }

        /* Feature list animations */
        .demo-features.updating {
            animation: featuresFadeOut 0.6s ease-out forwards;
        }

        .demo-features.updated {
            animation: featuresFadeIn 1.2s ease-out forwards;
        }

        .demo-features li {
            transition: all 0.5s ease;
        }

        .demo-features.highlight li {
            animation: featureHighlight 1.5s ease-in-out;
            animation-delay: calc(var(--delay, 0) * 0.3s);
        }

        @keyframes featuresFadeOut {
            0% { opacity: 1; transform: translateX(0); }
            100% { opacity: 0.3; transform: translateX(-10px); }
        }

        @keyframes featuresFadeIn {
            0% { opacity: 0.3; transform: translateX(-10px); }
            50% { opacity: 0.7; transform: translateX(5px); }
            100% { opacity: 1; transform: translateX(0); }
        }

        @keyframes featureHighlight {
            0%, 100% { 
                background: transparent;
                transform: scale(1);
                box-shadow: none;
            }
            50% { 
                background: rgba(30, 64, 175, 0.08);
                transform: scale(1.02);
                box-shadow: 0 2px 8px rgba(30, 64, 175, 0.15);
                border-radius: 8px;
            }
        }

        /* Checkmark pulse animation */
        .demo-features li.animate-check i {
            animation: checkPulse 1s ease-in-out;
        }

        @keyframes checkPulse {
            0%, 100% { 
                transform: scale(1);
                color: var(--success-green);
            }
            50% { 
                transform: scale(1.2);
                color: #059669;
                text-shadow: 0 0 8px rgba(5, 150, 105, 0.4);
            }
        }


        .demo-video {
            background: white;
            border-radius: 20px;
            padding: 0;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .demo-status {
            text-align: center;
            padding: 16px 0;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 16px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Agent Setup Form Styles */
        .agent-setup-form {
            max-width: 100%;
        }

        .form-step {
            display: none;
            animation: fadeInUp 0.5s ease-out;
        }

        .form-step.active {
            display: block;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .form-input {
            width: 100%;
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: border-color 0.3s;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: var(--border-radius);
            font-size: 16px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
        }

        .agent-preview {
            background: #f8fafc;
            border-radius: var(--border-radius-lg);
            padding: 24px;
            margin-top: 24px;
            border: 2px dashed #cbd5e1;
            text-align: center;
        }

        .agent-avatar-preview {
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
            font-size: 24px;
            border: 3px solid white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .agent-name-preview {
            font-size: 20px;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 8px;
        }

        .agent-field-preview {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .agent-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 14px;
            color: var(--success-green);
            font-weight: 600;
        }

        .pulse-dot {
            width: 8px;
            height: 8px;
            background: var(--success-green);
            border-radius: 50%;
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Social Feed Demo */
        .social-feed-demo {
            background: #f0f2f5;
            border-radius: clamp(6px, 1.5vw, 12px);
            width: 100%;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 16px;
            position: relative;
            scroll-behavior: smooth;
            box-sizing: border-box;
            touch-action: pan-y;
            -webkit-overflow-scrolling: touch;
            margin: 0;
            flex: 1;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        }

        .facebook-post {
            background: white !important;
            border-radius: 8px;
            padding: 0;
            margin: 0 0 clamp(12px, 2.5vw, 16px) 0;
            border: none;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 3px 1px rgba(0, 0, 0, 0.07);
            transition: all 0.3s ease;
            position: relative;
            width: 100%;
            box-sizing: border-box;
            overflow: visible;
        }
        
        .facebook-post.post-highlighted {
            border: 2px solid #1e40af !important;
            box-shadow: 0 0 20px rgba(30, 64, 175, 0.3) !important;
            transform: none !important;
            transition: all 0.3s ease !important;
            margin: 0 0 clamp(12px, 2.5vw, 16px) 0 !important;
        }
        
        .facebook-post.post-analyzing {
            position: relative;
        }
        
        .facebook-post.post-has-banner {
            position: relative;
        }

        .facebook-post:hover {
            background: white !important;
            border-color: #dddfe2;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }

        .post-header {
            display: flex;
            align-items: flex-start;
            padding: clamp(12px, 2.5vw, 16px) 16px clamp(8px, 1.5vw, 12px) 16px;
            width: 100%;
            gap: clamp(8px, 1.5vw, 12px);
            box-sizing: border-box;
        }

        /* Avatar Component */
        .avatar {
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            font-weight: 600;
            background: var(--primary-gradient);
        }

        .avatar-sm {
            width: clamp(32px, 7vw, 40px);
            height: clamp(32px, 7vw, 40px);
            font-size: clamp(11px, 2.2vw, 14px);
            background: linear-gradient(135deg, #9ca3af, #6b7280);
            color: white;
            font-weight: 600;
            border: 2px solid #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .avatar-md {
            width: 40px;
            height: 40px;
            font-size: 14px;
            border: 2px solid #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .avatar-lg {
            width: 48px;
            height: 48px;
            font-size: 16px;
        }

        .post-avatar {
            margin-left: 0;
            flex-shrink: 0;
        }
        
        /* Comment avatar - fixed size to prevent oval shape */
        .comment-bubble + *, .avatar.comment-avatar {
            width: 32px !important;
            height: 32px !important;
            min-width: 32px !important;
            min-height: 32px !important;
            max-width: 32px !important;
            max-height: 32px !important;
            flex-shrink: 0 !important;
            flex-grow: 0 !important;
        }

        .post-info {
            flex: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: clamp(1px, 0.3vw, 2px);
            padding-top: clamp(1px, 0.3vw, 2px);
        }
        
        .post-info h3 {
            font-size: clamp(13px, 2.8vw, 15px);
            font-weight: 600;
            color: #1c1e21;
            margin: 0;
            line-height: 1.3;
            cursor: pointer;
        }
        
        .post-info h3:hover {
            text-decoration: underline;
        }
        
        .post-options {
            position: absolute;
            top: clamp(12px, 2.5vw, 16px);
            left: clamp(12px, 2.5vw, 16px);
            width: clamp(24px, 5vw, 32px);
            height: clamp(24px, 5vw, 32px);
            border-radius: 50%;
            background: transparent;
            border: none;
            color: #65676b;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(16px, 3.5vw, 20px);
            transition: background 0.2s ease;
        }
        
        .post-options:hover {
            background: #f2f3f4;
        }

        .post-info span {
            font-size: clamp(11px, 2.2vw, 13px);
            color: #65676b;
            line-height: 1.3;
            cursor: pointer;
        }
        
        .post-info span:hover {
            text-decoration: underline;
        }

        .post-content {
            font-size: clamp(14px, 3vw, 16px);
            color: #1c1e21;
            line-height: 1.33;
            padding: 0 16px clamp(8px, 1.5vw, 12px) 16px;
            width: 100%;
            word-wrap: break-word;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            box-sizing: border-box;
        }

        .post-actions {
            display: flex !important;
            border-top: 1px solid #dadde1 !important;
            padding: clamp(6px, 1.2vw, 8px) 16px !important;
            margin: 0 !important;
            justify-content: space-between !important;
            gap: clamp(4px, 0.8vw, 8px) !important;
            flex-wrap: nowrap !important;
            width: 100% !important;
            box-sizing: border-box !important;
        }

        .post-action {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            color: #65676b !important;
            font-size: clamp(11px, 2.2vw, 13px) !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
            padding: clamp(4px, 0.8vw, 6px) clamp(6px, 1.2vw, 10px) !important;
            border-radius: 6px !important;
            background: transparent !important;
            border: none !important;
            flex: 1 !important;
            gap: clamp(3px, 0.6vw, 5px) !important;
            max-width: 100% !important;
            overflow: hidden !important;
        }

        .post-action:hover {
            background: #f2f3f4;
            color: #1c1e21;
        }
        
        .post-action.like-action:hover {
            color: #1877f2;
        }
        
        .post-action.comment-action:hover {
            color: #65676b;
        }
        
        .post-action.share-action:hover {
            color: #65676b;
        }

        .post-action i {
            margin-left: 0;
            font-size: clamp(12px, 2.5vw, 14px);
            flex-shrink: 0;
        }
        
        /* Ensure post-actions styling is preserved even with comments */
        .facebook-post .post-actions {
            display: flex !important;
            border-top: 1px solid #dadde1 !important;
            padding: clamp(6px, 1.2vw, 8px) 16px !important;
            margin: 0 !important;
            justify-content: space-between !important;
            gap: clamp(4px, 0.8vw, 8px) !important;
            flex-wrap: nowrap !important;
            width: 100% !important;
            box-sizing: border-box !important;
        }
        
        /* Ensure post-action buttons maintain proper sizing with comments */
        .facebook-post .post-action {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            color: #65676b !important;
            font-size: clamp(11px, 2.2vw, 13px) !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
            padding: clamp(4px, 0.8vw, 6px) clamp(6px, 1.2vw, 10px) !important;
            border-radius: 6px !important;
            background: transparent !important;
            border: none !important;
            flex: 1 !important;
            gap: clamp(3px, 0.6vw, 5px) !important;
            max-width: 100% !important;
            overflow: hidden !important;
            white-space: nowrap !important;
            text-overflow: ellipsis !important;
        }
        
        /* Facebook-style post reactions */
        .post-reactions {
            display: flex;
            align-items: center;
            padding: clamp(8px, 1.5vw, 12px) 16px 0;
            gap: clamp(4px, 0.8vw, 6px);
            font-size: clamp(11px, 2.2vw, 13px);
            color: #65676b;
        }
        
        .reaction-count {
            cursor: pointer;
        }
        
        .reaction-count:hover {
            text-decoration: underline;
        }
        
        .reaction-icons {
            display: flex;
            gap: -2px;
        }
        
        .reaction-icon {
            width: clamp(16px, 3.5vw, 18px);
            height: clamp(16px, 3.5vw, 18px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(10px, 2vw, 12px);
            margin-right: -2px;
            border: 1px solid white;
        }
        
        .reaction-like {
            background: #1877f2;
            color: white;
        }
        
        .reaction-love {
            background: #e41e3f;
            color: white;
        }
        
        .reaction-wow {
            background: #f7b928;
            color: white;
        }
        
        /* Ensure comment bubbles are always Facebook gray */
        .comment-bubble,
        .comment-bubble * {
            background: #f0f2f5 !important;
        }
        
        .comment-bubble .typing-indicator,
        .comment-bubble .typing-indicator * {
            background: transparent !important;
        }

        .hot-post {
            border: 2px solid #10b981 !important;
            background: white !important;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3) !important;
            position: relative;
        }

        .fire-icon {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: var(--text-primary);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            animation: bounce 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(239, 68, 68, 0); }
        }


        /* Testimonials */
        .testimonials {
            padding: 80px 0;
            background: var(--bg-gray);
        }

        .testimonials .container {
            position: relative;
            z-index: 2;
        }

        .testimonials .section-header h2 {
            color: var(--text-primary);
        }

        .testimonials .section-header p {
            color: var(--text-secondary);
        }

        .testimonials .section-badge {
            background: rgba(59, 130, 246, 0.15);
            color: var(--secondary-blue);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 32px;
            margin-top: 80px;
        }

        .testimonial-card {
            background: var(--bg-light);
            padding: 24px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-light);
            transition: box-shadow 0.2s ease;
            box-shadow: var(--shadow-sm);
        }

        .testimonial-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .testimonial-text {
            font-size: 16px;
            color: var(--text-primary);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
        }

        .author-avatar {
            margin-left: 16px;
        }

        .author-info h4 {
            font-size: 16px;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 2px;
        }

        .author-info span {
            font-size: 14px;
            color: #94a3b8;
        }

        .stars {
            color: #fbbf24;
            margin-bottom: 16px;
        }


        /* Pricing */
        .pricing {
            background: var(--bg-light);
            color: var(--text-primary);
            padding: 80px 0;
            text-align: center;
        }


        .pricing .container {
            position: relative;
            z-index: 2;
        }

        .pricing-header {
            margin-bottom: 80px;
        }

        .pricing-header h2 {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 24px;
        }

        .pricing-header p {
            font-size: 20px;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        .pricing-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 32px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .pricing-card {
            background: var(--bg-light);
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius);
            padding: 32px;
            box-shadow: var(--shadow-sm);
            transition: box-shadow 0.2s ease;
        }

        .pricing-card.featured {
            border-color: var(--secondary-blue);
            box-shadow: 0 0 40px rgba(59, 130, 246, 0.3);
        }

        .pricing-card.featured::before {
            content: 'הכי פופולרי';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(50%);
            background: var(--secondary-blue);
            color: var(--text-primary);
            padding: 6px 16px;
            border-radius: var(--border-radius-xl);
            font-size: 12px;
            font-weight: 600;
        }

        .pricing-card:hover {
            transform: translateY(-8px);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .pricing-plan {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .pricing-price {
            font-size: 48px;
            font-weight: 900;
            margin-bottom: 8px;
            color: var(--secondary-blue);
        }

        .pricing-period {
            color: var(--text-muted);
            margin-bottom: 32px;
        }

        .pricing-features {
            list-style: none;
            text-align: right;
            margin-bottom: 32px;
        }

        .pricing-features li {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            font-size: 15px;
        }

        .pricing-features i {
            color: var(--ai-purple);
            margin-left: 12px;
            width: 16px;
        }

        .pricing-cta {
            background: white;
            width: 100%;
            display: block;
        }

        .pricing-cta:hover {
            background: white;
            transform: translateY(-2px);
        }

        /* Comparison Table - Clean Build */
        .comparison-section {
            padding: 80px 0;
            background: var(--bg-gray);
        }

        .comparison-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 70% 30%, rgba(59, 130, 246, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }
        
        .comparison-section .container {
            position: relative;
            z-index: 2;
        }

        .comparison-table {
            margin: 60px auto;
            max-width: 1200px;
            display: grid;
            grid-template-columns: 1.5fr 1fr 1fr 1fr;
            gap: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius-xl);
            padding: 30px;
        }
        
        .comparison-column {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius);
            padding: 0;
            backdrop-filter: blur(10px);
        }
        
        .comparison-column.featured {
            box-shadow: 0 4px 15px rgba(255, 49, 49, 0.3);
            border: 1px solid rgba(255, 49, 49, 0.2);
            animation: featuredGlow 3s ease-in-out infinite;
        }
        
        .comparison-header-cell {
            padding: 20px 16px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 16px;
            background: var(--bg-light);
            border-bottom: 1px solid var(--border-light);
            min-height: 60px;
        }
        
        .comparison-cell {
            padding: 16px 12px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            min-height: 50px;
        }
        
        @keyframes featuredGlow {
            0%, 100% { 
                box-shadow: 0 4px 15px rgba(255, 49, 49, 0.3);
                transform: translateY(0);
            }
            50% { 
                box-shadow: 0 8px 25px rgba(255, 49, 49, 0.5);
                transform: translateY(-2px);
            }
        }

        
        .comparison-header-cell {
            padding: 20px 16px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60px;
            font-weight: 700;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        
        .comparison-cell {
            padding: 16px 12px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            min-height: 50px;
        }
        
        .comparison-cell:first-child {
            font-weight: 600;
        }
        
        .comparison-cell.featured {
            font-weight: 600;
        }
        
        
        .comparison-cell.positive {
            font-weight: 600;
        }
        
        .price-cell.expensive {
            font-weight: 700;
        }
        
        .price-cell.affordable {
            font-weight: 700;
        }

        /* Contact Form Section */
        .contact-section {
            padding: 80px 0;
            background: var(--bg-light);
            color: var(--text-primary);
        }

        .contact-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.06) 0%, transparent 50%);
            pointer-events: none;
        }

        .contact-section .container {
            position: relative;
            z-index: 2;
        }

        .contact-container {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            animation: fadeInUp 0.8s ease-out;
        }

        .contact-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            font-size: 32px;
            animation: pulse 2s ease-in-out infinite, float 3s ease-in-out infinite;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .contact-form {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-xl);
            backdrop-filter: blur(15px);
            padding: 40px;
            margin-top: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 40px rgba(96, 165, 250, 0.1);
            animation: slideInFromBottom 0.8s ease-out 0.3s both;
        }

        @keyframes slideInFromBottom {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 24px;
            text-align: right;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 16px;
            animation: slideInFromRight 0.6s ease-out;
        }

        .form-input {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--border-light);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: all 0.3s ease;
            box-sizing: border-box;
            background: var(--bg-light);
            color: var(--text-primary);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--ai-purple);
            box-shadow: 0 0 0 3px rgba(76, 29, 149, 0.2);
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.02);
        }

        .form-benefits {
            display: flex;
            justify-content: center;
            gap: 32px;
            margin-top: 24px;
            flex-wrap: wrap;
        }

        .form-benefit {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .form-benefit i {
            color: var(--success-green);
        }

        /* Tablet and medium screens */
        @media (max-width: 1200px) and (min-width: 769px) {
            /* Hero adjustments */
            .hero h1 {
                font-size: clamp(40px, 5vw, 48px);
            }
            
            .hero .subtitle {
                font-size: 20px;
            }
            
            /* Demo section */
            .demo-container {
                grid-template-columns: 1fr 1fr;
                gap: clamp(20px, 3vw, 40px);
                max-width: 95vw;
            }

            #demoLeftSide, #demoRightSide {
                width: 100%;
                min-width: 0;
                height: clamp(400px, 50vh, 500px);
                max-height: none;
            }

            #demoRightSide {
                padding: clamp(16px, 2vw, 24px);
                gap: 12px;
            }
            
            /* Testimonials and pricing */
            .testimonials-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 32px;
            }
            
            .pricing-cards {
                grid-template-columns: 1fr;
                max-width: 600px;
                margin: 0 auto;
            }
            
            /* Stats */
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 32px;
            }
            
            /* Section headers */
            .section-header h2 {
                font-size: clamp(32px, 4vw, 42px);
            }
            
            /* Contact form tablet layout */
            .form-row-responsive {
                grid-template-columns: 1fr 1fr;
                gap: 16px;
                margin-bottom: 16px !important;
            }
        }

        /* Hide mobile comparison cards on desktop */
        @media (min-width: 769px) {
            .comparison-mobile-cards {
                display: none;
            }
        }
        


        /* Mobile and small tablet design */
        @media (max-width: 768px) {
            /* Global heading consistency for mobile */
            h1 {
                font-size: clamp(28px, 6vw, 36px) !important;
                line-height: 1.2 !important;
                font-family: inherit !important;
                color: var(--text-primary) !important;
                font-weight: 700 !important;
            }
            
            h2 {
                font-size: clamp(28px, 6vw, 36px) !important;
                line-height: 1.2 !important;
                font-family: inherit !important;
                color: var(--text-primary) !important;
                font-weight: 700 !important;
            }
            
            .section-subtitle,
            .hero .subtitle,
            .section-header p {
                font-size: 16px !important;
                line-height: 1.5 !important;
                font-family: inherit !important;
                color: var(--text-secondary) !important;
            }
            
            h3 {
                font-size: 20px !important;
                font-weight: 700 !important;
                line-height: 1.3 !important;
                font-family: inherit !important;
                color: var(--text-primary) !important;
            }
            /* Header mobile improvements */
            .header {
                padding: 12px 0;
            }
            
            .header-content {
                padding: 0 16px;
                position: relative;
            }
            
            .logo-section h1 {
                font-size: 20px;
            }
            
            .logo-text {
                font-size: 18px;
            }
            
            /* Hide navigation on mobile to make room for CTA */
            .nav-container {
                display: none;
            }
            
            /* Hide CTA button on mobile */
            .header-cta-section {
                display: none !important;
            }
            
            .header-cta-section .cta-button {
                padding: 10px 18px;
                font-size: 13px;
                border-radius: 8px;
                min-width: 120px;
                text-align: center;
            }
            
            .cta-text {
                font-size: 13px;
                white-space: nowrap;
            }
            
            .cta-icon {
                font-size: 12px;
            }
            
            /* Mobile menu toggle - show when needed */
            .mobile-menu-toggle {
                display: flex;
                margin-left: 12px;
            }
            
            .mobile-menu-toggle span {
                background: var(--text-primary);
            }
            
            /* Hero responsive */
            .hero {
                padding: 40px 0;
                margin-top: 40px; /* Account for fixed header */
            }
            
            .hero-content {
                padding: 0 16px;
                text-align: center;
            }
            
            .hero h1 {
                font-size: clamp(28px, 6vw, 36px);
                line-height: 1.2;
                margin-bottom: 20px;
                text-align: center;
            }
            
            .hero .subtitle {
                font-size: 17px;
                line-height: 1.5;
                margin-bottom: 32px;
                color: var(--text-secondary);
                max-width: 100%;
                text-align: center;
            }
            
            .hero-badge {
                font-size: 12px;
                padding: 8px 14px;
                margin-bottom: 20px;
                margin-left: auto;
                margin-right: auto;
                display: inline-flex;
                justify-content: center;
                border-radius: 20px;
                background: rgba(76, 29, 149, 0.1);
                border: 1px solid rgba(76, 29, 149, 0.2);
                color: var(--ai-purple);
                font-weight: 600;
            }
            
            .hero-cta-group {
                flex-direction: column;
                align-items: center;
                gap: 24px;
                padding: 0 8px;
            }
            
            .hero-cta-group .btn-base {
                width: 100%;
                max-width: 320px;
                font-size: 16px;
                padding: 18px 24px;
                border-radius: 12px;
                text-align: center;
                font-weight: 600;
            }
            
            .hero-cta-group .cta-primary {
                order: 1;
            }
            
            .hero-cta-group .cta-secondary {
                order: 2;
                background: transparent;
                border: 2px solid var(--border-light);
                color: var(--text-primary);
                font-weight: 600;
            }
            
            .demo-container {
                grid-template-columns: 1fr;
                gap: 16px;
                justify-content: center;
                padding: 0;
                width: 100%;
                max-width: 100%;
                margin: 0 auto;
                overflow-x: hidden;
            }

            #demoLeftSide {
                width: 100%;
                min-width: 0;
                max-width: 100%;
                height: clamp(400px, 70vh, 500px);
                max-height: none;
                margin: 0 auto;
                padding: 0;
                border-radius: clamp(8px, 2vw, 12px);
                border: 1px solid var(--border-light);
                box-sizing: border-box;
            }

            
            /* Form responsive design */
            .form-row-responsive {
                grid-template-columns: 1fr !important;
                gap: 0 !important;
            }
            
            .form-row-responsive .form-group {
                margin-bottom: 16px !important;
            }
            
            /* Demo section mobile - preserve logic while improving responsiveness */
            .demo {
                padding: 40px 0 !important;
                overflow: visible !important;
            }
            
            .demo .container {
                padding: 0; /* הסרת padding כדי שהפיד פייסבוק יתפרס למלוא הרוחב */
            }
            
            .demo .section-header {
                margin-bottom: 30px !important;
                text-align: center;
                padding: 0 16px; /* שמירת padding רק לכותרת הסקציה */
            }
            
            .demo .section-header h2 {
                font-size: clamp(28px, 6vw, 36px) !important;
                line-height: 1.2;
                margin-bottom: 12px;
                color: var(--text-primary);
            }
            
            .demo .section-header p {
                font-size: 16px;
                line-height: 1.5;
                color: var(--text-secondary);
                max-width: 90%;
                margin: 0 auto;
            }
            
            /* Fixed height container mobile optimization */
            .demo > .container > div[style*="height: 200px"] {
                height: auto !important;
                margin-bottom: 0 !important;
            }

            /* Facebook Mobile Feed Container */
            .social-feed-demo {
                background: #f0f2f5 !important;
                border-radius: 0 0 clamp(8px, 2vw, 12px) clamp(8px, 2vw, 12px) !important;
                padding: 16px 4px 16px 4px !important;
                border: none !important;
                box-shadow: none !important;
                height: 100% !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }
            
            .facebook-header {
                background: #4267B2 !important;
                color: white !important;
                padding: 12px 16px !important;
                border-radius: 0 !important;
                margin-bottom: 0 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-size: 16px !important;
                font-weight: 600 !important;
                border-bottom: 1px solid rgba(255,255,255,0.2) !important;
            }
            
            .demo-container {
                margin-top: 0px !important;
            }
            
            .facebook-post {
                background: white !important;
                border-radius: 0 !important;
                padding: 0 !important;
                margin: 0 0 8px 0 !important;
                border: none !important;
                box-shadow: none !important;
                border-bottom: 1px solid #e4e6ea !important;
                width: 100% !important;
                min-width: 0 !important;
                max-width: 100% !important;
            }
            
            .post-header {
                padding: 16px 16px 0 16px !important;
                display: flex !important;
                align-items: center !important;
                gap: 12px !important;
                flex-wrap: nowrap !important;
                width: 100% !important;
                box-sizing: border-box !important;
            }
            
            /* Facebook Mobile Avatar */
            .post-header .avatar-sm {
                width: 40px !important;
                height: 40px !important;
                border-radius: 50% !important;
                background: #1877f2 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                color: white !important;
                font-size: 16px !important;
                font-weight: 600 !important;
                flex-shrink: 0 !important;
            }
            
            /* Facebook Mobile User Info */
            .user-info {
                flex: 1 !important;
                min-width: 0 !important;
            }
            
            .user-info h4 {
                font-size: 15px !important;
                font-weight: 600 !important;
                color: #1c1e21 !important;
                margin: 0 0 2px 0 !important;
                line-height: 1.2 !important;
            }
            
            .user-info .post-time {
                font-size: 13px !important;
                color: #65676b !important;
                font-weight: 400 !important;
                line-height: 1 !important;
            }
            
            /* Facebook Mobile Post Content */
            .post-content {
                padding: 16px 16px 16px 16px !important;
                font-size: 15px !important;
                line-height: 1.4 !important;
                color: #1c1e21 !important;
                font-weight: 400 !important;
                margin: 0 !important;
                width: 100% !important;
                box-sizing: border-box !important;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
            }
            
            /* Facebook Mobile Action Buttons */
            .post-actions,
            .facebook-post .post-actions {
                display: flex !important;
                border-top: 1px solid #dadde1 !important;
                padding: 0 8px !important;
                margin: 0 !important;
                justify-content: space-around !important;
                align-items: center !important;
                width: 100% !important;
                box-sizing: border-box !important;
                height: 48px !important;
                min-height: 48px !important;
            }
            
            .post-action,
            .facebook-post .post-action {
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                color: #65676b !important;
                font-size: clamp(12px, 3.5vw, 15px) !important;
                font-weight: 600 !important;
                cursor: pointer !important;
                transition: background-color 0.1s ease !important;
                padding: 0 clamp(4px, 2vw, 8px) !important;
                border-radius: 6px !important;
                background: transparent !important;
                border: none !important;
                flex: 1 !important;
                height: 40px !important;
                min-height: 40px !important;
                gap: clamp(4px, 1.5vw, 8px) !important;
                margin: 0 2px !important;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
                white-space: nowrap !important;
                overflow: hidden !important;
                text-overflow: ellipsis !important;
            }
            
            .post-action:hover {
                background-color: #f2f3f4 !important;
            }
            
            .post-action i {
                font-size: clamp(13px, 3vw, 16px) !important;
                margin-right: clamp(3px, 1.5vw, 6px) !important;
                flex-shrink: 0 !important;
            }
            
            /* Remove rounded corners from demo container on mobile */
            .demo-video.demo-side {
                border-radius: 0 !important;
            }
            
            /* Ensure proper mobile spacing */
            .demo .container > div[style*="height: 200px"] {
                height: auto !important;
            }
            
            /* Very small screens adjustments for Facebook feed */
            @media (max-width: 380px) {
                .post-header .avatar-sm {
                    width: 36px !important;
                    height: 36px !important;
                    font-size: 14px !important;
                }
                
                .user-info h4 {
                    font-size: 14px !important;
                }
                
                .user-info .post-time {
                    font-size: 12px !important;
                }
                
                .post-content {
                    font-size: 13px !important;
                }
                
                .post-action {
                    font-size: 14px !important;
                }
                
                .post-action i {
                    font-size: 14px !important;
                }
            }
            
            /* Messenger popup mobile adjustments */
            @media (max-width: 768px) {
                .demo-container [style*="position: relative"][style*="margin: 20px auto"] {
                    width: 95vw !important;
                    height: 60vh !important;
                    margin: 10px auto 0 auto !important;
                    max-width: none !important;
                }
            }
            
            .section-title {
                font-size: clamp(24px, 5vw, 32px);
            }
            
            .demo-progress {
                flex-wrap: nowrap;
                gap: 4px;
                justify-content: space-between;
                padding: 8px 12px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scroll-behavior: smooth;
            }
            
            .progress-step {
                flex: 1;
                min-width: 0;
                font-size: 11px;
                padding: 6px 4px;
                white-space: nowrap;
                text-align: center;
                border-radius: 4px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .progress-step span {
                display: block;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                max-width: 100%;
            }
            
            .progress-arrow {
                font-size: 10px;
                margin: 0 2px;
                flex-shrink: 0;
                display: none;
            }
            
            /* Shorten text for mobile using pseudo-elements */
            #step-detection span::after { content: "איתור"; }
            #step-analysis span::after { content: "ניתוח"; }
            #step-response span::after { content: "תגובה"; } 
            #step-messenger span::after { content: "מסנגר"; }
            
            #step-detection span,
            #step-analysis span,
            #step-response span,
            #step-messenger span {
                font-size: 0; /* Hide original text */
            }
            
            #step-detection span::after,
            #step-analysis span::after,
            #step-response span::after,
            #step-messenger span::after {
                font-size: 11px; /* Show shortened text */
            }
            
            /* Stabilize status text on mobile */
            #statusIndicatorText {
                min-height: 45px !important;
                height: auto !important;
                overflow: visible !important;
                font-size: 14px !important;
                line-height: 1.3 !important;
            }
            
            /* Consistent spacing on mobile - same as desktop */
            #statusIndicatorContainer {
                margin: 0 auto 15px auto !important;
            }
            
            .demo-progress {
                margin-bottom: 15px !important;
            }
            
            .demo-progress {
                margin-bottom: 15px !important;
            }
            
            .demo-container {
                margin-top: 15px !important;
                min-height: 300px !important;
            }
            
            /* Centered button responsive on mobile */
            #centeredDemoButton {
                position: absolute !important;
                z-index: 10 !important;
                left: 50% !important;
                top: 50% !important;
                transform: translate(-50%, -50%) !important;
                text-align: center !important;
            }
            
            #centeredDemoButton button {
                font-size: 16px !important;
                padding: 14px 32px !important;
                min-width: 160px !important;
            }
            
            /* Stats section responsive */
            .stats {
                padding: 40px 0;
                background: var(--bg-gray);
            }
            
            .stats .container {
                padding: 0 16px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 28px;
                margin-top: 36px;
            }
            
            .stats .section-header {
                margin-bottom: 36px;
                text-align: center;
            }
            
            .stats .section-header h2 {
                font-size: clamp(28px, 6vw, 36px);
                margin-bottom: 12px;
                color: var(--text-primary);
                font-weight: 800;
            }
            
            .stats .section-subtitle {
                font-size: 16px;
                color: var(--text-secondary);
                line-height: 1.5;
            }
            
            .stats .testimonial-card {
                padding: 24px;
                border-radius: 16px;
                background: white;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                border: 1px solid var(--border-light);
                text-align: center;
            }
            
            /* Testimonials responsive */
            .testimonials {
                padding: 40px 0;
            }
            
            .testimonials .container {
                padding: 0 16px;
            }
            
            .testimonials-grid {
                grid-template-columns: 1fr;
                gap: 24px;
                margin-top: 36px;
            }
            
            .testimonial-card {
                padding: 24px;
                border-radius: 16px;
                background: white;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                border: 1px solid var(--border-light);
            }
            
            .testimonial-text {
                font-size: 16px;
                line-height: 1.6;
                margin-bottom: 20px;
                color: var(--text-primary);
            }
            
            .testimonials .section-header {
                text-align: center;
                margin-bottom: 36px;
            }
            
            .testimonials .section-header h2 {
                font-size: clamp(28px, 6vw, 36px);
                margin-bottom: 12px;
                color: var(--text-primary);
                font-weight: 800;
            }
            
            .testimonials .section-subtitle {
                font-size: 16px;
                color: var(--text-secondary);
                line-height: 1.5;
                max-width: 90%;
                margin: 0 auto;
            }
            
            /* Pricing responsive */
            .pricing {
                padding: 40px 0;
                background: var(--bg-light);
            }
            
            .pricing .container {
                padding: 0 16px;
            }
            
            .pricing-cards {
                grid-template-columns: 1fr;
                gap: 28px;
                margin-top: 36px;
            }
            
            .pricing .section-header {
                text-align: center;
                margin-bottom: 36px;
            }
            
            .pricing .section-header h2 {
                font-size: clamp(28px, 6vw, 36px);
                margin-bottom: 12px;
                color: var(--text-primary);
                font-weight: 800;
            }
            
            .pricing .section-subtitle {
                font-size: 16px;
                color: var(--text-secondary);
                line-height: 1.5;
                max-width: 90%;
                margin: 0 auto;
            }
            
            .pricing-card {
                padding: 28px 24px;
                border-radius: 16px;
                background: white;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                border: 2px solid var(--border-light);
                text-align: center;
            }
            
            .pricing-card.featured {
                border-color: var(--ai-purple);
                box-shadow: 0 8px 24px rgba(76, 29, 149, 0.2);
            }
            
            /* Comparison table responsive - Convert to cards */
            .comparison-section {
                padding: 40px 0;
                background: var(--bg-gray);
            }
            
            .comparison-section .container {
                padding: 0 16px;
            }
            
            .comparison-section .section-header {
                text-align: center;
                margin-bottom: 36px;
            }
            
            .comparison-section .section-header h2 {
                font-size: clamp(28px, 6vw, 36px);
                margin-bottom: 12px;
                color: var(--text-primary);
                font-weight: 800;
            }
            
            .comparison-table {
                display: none; /* Hide original table on mobile */
            }
            
            /* Mobile comparison cards */
            .comparison-mobile-cards {
                display: flex;
                flex-direction: column;
                gap: 20px;
                margin-top: 36px;
            }
            
            .comparison-card {
                background: white;
                border-radius: 16px;
                padding: 24px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                border: 2px solid var(--border-light);
            }
            
            .comparison-card.featured {
                border-color: var(--ai-purple);
                box-shadow: 0 8px 24px rgba(76, 29, 149, 0.2);
                position: relative;
            }
            
            .comparison-card.featured::before {
                content: "מומלץ";
                position: absolute;
                top: -10px;
                right: 20px;
                background: var(--ai-purple);
                color: white;
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: 600;
            }
            
            .comparison-card h3 {
                font-size: 20px;
                font-weight: 700;
                margin-bottom: 16px;
                color: var(--text-primary);
                text-align: center;
            }
            
            .comparison-feature {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 12px 0;
                border-bottom: 1px solid var(--border-light);
            }
            
            .comparison-feature:last-child {
                border-bottom: none;
            }
            
            .comparison-feature-name {
                font-size: 14px;
                color: var(--text-secondary);
                font-weight: 500;
            }
            
            .comparison-feature-value {
                font-size: 14px;
                color: var(--text-primary);
                font-weight: 600;
            }
            
            .comparison-feature-value.check {
                color: var(--success-green);
            }
            
            .comparison-feature-value.cross {
                color: #dc2626;
            }
            
            /* Contact section responsive */
            .contact {
                padding: 40px 0;
                background: var(--bg-light);
            }
            
            .contact .container {
                padding: 0 16px;
            }
            
            .contact-container {
                max-width: 100%;
                margin: 0 auto;
                text-align: center;
            }
            
            .contact .section-header {
                margin-bottom: 36px;
                text-align: center;
            }
            
            .contact .section-header h2 {
                font-size: clamp(28px, 6vw, 36px);
                margin-bottom: 12px;
                color: var(--text-primary);
                font-weight: 800;
            }
            
            .contact .section-subtitle {
                font-size: 16px;
                color: var(--text-secondary);
                line-height: 1.5;
                max-width: 90%;
                margin: 0 auto;
            }
            
            .contact-form {
                background: white;
                padding: 24px 20px;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                border: 1px solid var(--border-light);
                max-width: 100%;
                margin: 0 auto;
            }
            
            .form-group {
                margin-bottom: 16px;
                text-align: right;
            }
            
            .form-group label {
                display: block;
                font-size: 14px;
                font-weight: 600;
                color: var(--text-primary);
                margin-bottom: 6px;
            }
            
            .form-group input,
            .form-group select,
            .form-group textarea {
                width: 100%;
                padding: 12px 14px;
                border: 2px solid var(--border-light);
                border-radius: 8px;
                font-size: 16px;
                font-family: inherit;
                background: white;
                transition: border-color 0.3s ease;
            }
            
            .form-group input:focus,
            .form-group select:focus,
            .form-group textarea:focus {
                outline: none;
                border-color: var(--ai-purple);
                box-shadow: 0 0 0 3px rgba(76, 29, 149, 0.1);
            }
            
            .form-row {
                display: grid;
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .contact-form button {
                width: 100%;
                padding: 14px 20px;
                background: var(--ai-purple);
                color: white;
                border: none;
                border-radius: 10px;
                font-size: 16px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                margin-top: 8px;
            }
            
            .contact-form button:hover {
                background: #3730a3;
                transform: translateY(-2px);
                box-shadow: 0 8px 24px rgba(76, 29, 149, 0.3);
            }
            
            .contact .container {
                padding: 0 16px;
            }
            
            .contact-content {
                max-width: 100%;
                padding: 32px 16px;
            }
            
            .contact h2 {
                font-size: clamp(32px, 7vw, 42px);
                line-height: 1.2;
            }
            
            .contact p {
                font-size: 16px;
                line-height: 1.5;
            }
            
            /* Section headers global */
            .section-header {
                margin-bottom: 40px;
            }
            
            .section-header h2 {
                font-size: clamp(28px, 6vw, 36px);
                line-height: 1.2;
            }
            
            .section-header p {
                font-size: 16px;
                line-height: 1.5;
            }
            
            .section-badge {
                font-size: 12px;
                padding: 4px 8px;
            }
        }
        
        /* Very small screens (iPhone SE, etc.) */
        @media (max-width: 480px) {
            /* Additional Facebook Mobile improvements for small screens */
            .facebook-post {
                margin-bottom: 6px !important;
            }
            
            .post-header {
                padding: 10px 12px 0 12px !important;
                gap: 10px !important;
            }
            
            .post-content {
                padding: 10px 12px 12px 12px !important;
            }
            
            /* Reduce Facebook header on mobile */
            .facebook-header {
                padding: 8px 12px !important;
                font-size: 14px !important;
            }
            /* Global heading consistency for very small screens */
            h1 {
                font-size: clamp(24px, 6vw, 32px) !important;
                line-height: 1.2 !important;
                font-family: inherit !important;
                color: var(--text-primary) !important;
                font-weight: 700 !important;
            }
            
            h2 {
                font-size: clamp(24px, 6vw, 32px) !important;
                line-height: 1.2 !important;
                font-family: inherit !important;
                color: var(--text-primary) !important;
                font-weight: 700 !important;
            }
            
            .section-subtitle,
            .hero .subtitle,
            .section-header p {
                font-size: 15px !important;
                line-height: 1.5 !important;
                font-family: inherit !important;
                color: var(--text-secondary) !important;
            }
            
            h3 {
                font-size: 18px !important;
                font-weight: 700 !important;
                line-height: 1.3 !important;
                font-family: inherit !important;
                color: var(--text-primary) !important;
            }
            /* Header adjustments for very small screens */
            .header-content {
                padding: 0 12px;
            }
            
            .logo-text {
                font-size: 16px;
            }
            
            .header-cta-section .cta-button {
                padding: 8px 14px;
                font-size: 12px;
                min-width: 100px;
            }
            
            .mobile-menu-toggle {
                margin-left: 8px;
            }
            
            /* Hero section for very small screens */
            .hero h1 {
                font-size: clamp(32px, 5vw, 48px) !important;
                line-height: 1.3 !important;
                font-weight: 700 !important;
                margin-bottom: 24px !important;
                max-width: 900px !important;
                margin-left: auto !important;
                margin-right: auto !important;
            }
            
            .hero .subtitle {
                font-size: 16px;
                line-height: 1.4;
            }
            
            .hero-content {
                padding: 0 12px;
            }
            
            .hero-cta-group .btn-base {
                max-width: 280px;
                font-size: 14px;
                padding: 14px 16px;
            }
            
            .section-header h2 {
                font-size: clamp(28px, 6vw, 36px);
            }
            
            .section-header p {
                font-size: 16px;
            }
            
            /* Contact section for very small screens */
            .contact .container {
                padding: 0 12px;
            }
            
            .contact-form {
                padding: 20px 16px;
                border-radius: 10px;
            }
            
            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 10px 12px;
                font-size: 16px; /* Keep 16px to prevent zoom on iOS */
            }
            
            .contact-form button {
                padding: 12px 16px;
                font-size: 16px;
            }
            
            /* Additional mobile optimizations */
            .stats .testimonial-card {
                padding: 16px;
            }
            
            .testimonial-card {
                padding: 16px;
            }
            
            .pricing-card {
                padding: 24px 16px;
            }
            
            .comparison-card {
                padding: 16px;
            }
            
            .hero-badge {
                padding: 6px 12px;
                font-size: 11px;
            }
            
            /* General mobile improvements */
            .container {
                padding: 0 12px;
            }
            
            .btn-base {
                font-size: 14px;
                padding: 14px 16px;
            }
            
            /* Ensure proper spacing on all sections - 40px only */
            section {
                padding: 40px 0;
            }
            
            /* Typography improvements for very small screens */
            .section-badge {
                font-size: 11px;
                padding: 3px 8px;
            }
            
            .testimonial-author h4 {
                font-size: 14px;
            }
            
            .testimonial-author span {
                font-size: 12px;
            }
            
            .avatar {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }

            /* Mobile demo nav - only show when demo is active */
            .mobile-demo-nav.active {
                display: block !important;
            }
            
            /* Hero buttons mobile responsive */
            .hero-buttons {
                flex-direction: column;
                gap: 16px;
                margin: 30px 0 40px 0;
                align-items: center;
            }
            
            .hero-btn {
                min-width: 200px;
                max-width: 280px;
                padding: 12px 16px;
                font-size: 15px;
                white-space: nowrap;
            }
            
            
            /* Revenue Sources Section Mobile */
            .revenue-sources {
                padding: 40px 0 !important;
            }
            
            .revenue-sources .section-header {
                margin-bottom: 50px !important;
            }
            
            .revenue-sources h2 {
                font-size: 32px !important;
                line-height: 1.3 !important;
            }
            
            .revenue-sources .section-header p {
                font-size: 16px !important;
            }
            
            .revenue-sources-grid {
                gap: 40px !important;
            }
            
            .revenue-source-card {
                padding: 24px !important;
            }
            
            .source-header {
                flex-direction: column !important;
                text-align: center !important;
                margin-bottom: 20px !important;
            }
            
            .source-icon {
                margin-left: 0 !important;
                margin-bottom: 16px !important;
            }
            
            .source-header h3 {
                font-size: 22px !important;
            }
            
            .step-item {
                flex-direction: column !important;
                text-align: center !important;
            }
            
            .step-number {
                margin-left: 0 !important;
                margin-bottom: 12px !important;
                margin-top: 0 !important;
            }
            
            .step-item h4 {
                font-size: 16px !important;
            }
            
            .result-highlight p {
                font-size: 14px !important;
            }
            
            .contact-content {
                padding: 24px 16px;
            }
            
            .contact h2 {
                font-size: clamp(28px, 6vw, 36px);
            }
            
            .contact p {
                font-size: 14px;
            }
            
            .testimonial-card {
                padding: 16px;
            }
            
            .testimonial-text {
                font-size: 14px;
            }
            
            .pricing-card {
                padding: 16px;
            }
            
            .form-input, .form-label {
                font-size: 14px;
            }
            
            .btn-base {
                font-size: 14px;
                padding: 12px 16px;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes bannerSlideIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes modernBannerSlideIn {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.85) translateY(-20px);
                filter: blur(4px);
            }
            60% {
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(1.02) translateY(-5px);
                filter: blur(0px);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) translateY(0);
                filter: blur(0px);
            }
        }

        @keyframes bannerSlideOut {
            from {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            to {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
        }

        /* Demo Progress and Focus Styles */
        .demo-progress {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 24px auto;
            padding: 8px 16px;
            background: rgba(248, 250, 252, 0.8);
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            max-width: 500px;
        }

        .progress-step {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            color: #64748b;
            background: transparent;
            text-align: center;
            white-space: nowrap;
        }

        .progress-step.active {
            background: #3b82f6;
            color: white;
            font-weight: 600;
        }

        .progress-step.completed {
            color: #10b981;
            background: #f0f9ff;
        }

        .progress-arrow {
            color: #cbd5e1;
            margin: 0 8px;
            font-size: 12px;
            font-weight: normal;
        }

        .demo-side {
            transition: all 0.4s ease;
            border-radius: 12px;
            position: relative;
        }
        
        /* Make right side fully responsive */
        #demoRightSide {
            width: 100%;
            min-width: 0;
            height: clamp(500px, 55vh, 600px);
            min-height: clamp(450px, 50vh, 500px);
            max-height: none;
            border: 1px solid var(--border-light);
            background: var(--bg-light);
            border-radius: clamp(8px, 1.5vw, 12px);
            padding: clamp(16px, 3vw, 24px);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            gap: clamp(12px, 2vw, 20px);
            box-sizing: border-box;
            overflow-y: auto;
            box-shadow: var(--shadow-sm);
        }
        
        #demoLeftSide {
            width: 100%;
            min-width: 0;
            height: clamp(500px, 55vh, 600px);
            min-height: clamp(450px, 50vh, 500px);
            max-height: none;
            border: 1px solid var(--border-light);
            background: var(--bg-light);
            border-radius: clamp(8px, 1.5vw, 12px);
            padding: clamp(16px, 3vw, 24px);
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            overflow: hidden;
            position: relative;
        }

        #demoLeftSide.focused {
            border-color: var(--primary-blue);
            background: var(--bg-gray);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2), var(--shadow-sm);
        }

        #demoRightSide.focused {
            border-color: var(--primary-blue);
            background: var(--bg-gray);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2), var(--shadow-sm);
        }

        .demo-side.focused {
            filter: brightness(1.05);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.4);
        }

        .demo-side.dimmed {
        }

        /* Container locking states */
        .demo-container.locked {
            opacity: 0.3;
            pointer-events: none;
            filter: blur(2px);
            transition: all 0.5s ease;
        }

        .demo-side.locked {
            opacity: 0.3;
            pointer-events: none;
            filter: blur(2px);
            transition: all 0.5s ease;
        }

        .demo-container.unlocked,
        .demo-side.unlocked {
            opacity: 1;
            pointer-events: auto;
            filter: none;
            transition: all 0.5s ease;
        }

        @keyframes sidePulse {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.6); }
            70% { box-shadow: 0 0 0 12px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }

        @keyframes postPulse {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.6); }
            70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }

        .demo-side.pulse-blue {
            animation: sidePulse 1.5s ease-out;
        }

        .facebook-post.pulse-green {
            animation: postPulse 1.5s ease-out;
        }

        /* Custom Scrollbar */
        .social-feed-demo::-webkit-scrollbar {
            width: 8px;
        }

        .social-feed-demo::-webkit-scrollbar-track {
            background: #f0f2f5;
            border-radius: 4px;
        }

        .social-feed-demo::-webkit-scrollbar-thumb {
            background: #bcc0c4;
            border-radius: 4px;
        }

        .social-feed-demo::-webkit-scrollbar-thumb:hover {
            background: #8a8d91;
        }

        /* Ensure proper visibility and layering */
        .demo-container {
            position: relative;
            z-index: 2;
        }
        
        /* Centered demo button styling */
        #centeredDemoButton {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        /* Header container animation */
        #demoHeaderContainer {
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        /* Demo container transition for blur/opacity */
        .demo-video.demo-side {
            transition: opacity 0.5s ease, filter 0.5s ease;
        }
        
        /* Centered demo button hover effect */
        #centeredDemoButton button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 25px rgba(255, 49, 49, 0.4);
            border-color: #d1d5db;
            background: #f9fafb;
        }

        .demo-side {
            position: relative;
            z-index: 3;
        }

        .social-feed-demo {
            position: relative;
            z-index: 1;
        }

        /* Fix any potential display issues */
        .facebook-post {
            position: relative;
            display: block;
            width: 100%;
            box-sizing: border-box;
            background: white !important;
        }

        .facebook-post * {
            box-sizing: border-box;
        }

        /* Ensure all post variations maintain white background */
        .facebook-post.hot-post,
        .facebook-post.pulse-green,
        .facebook-post:hover,
        .facebook-post:focus,
        .facebook-post:active {
            background: white !important;
        }

        /* Right container element constraints */
        #demoRightSide > * {
            flex-shrink: 0;
        }

        #demoRightSide .demo-features {
            margin-bottom: 0;
            overflow: visible;
            flex: 1;
        }

        #demoRightSide p {
            margin-bottom: 16px;
            overflow-wrap: break-word;
        }

        /* Status indicator fixed sizing */
        #demoRightSide .status-indicator {
            flex-shrink: 0;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.1); }
        }

        @keyframes slideInFromRight {
            from { 
                opacity: 0; 
                transform: translateX(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }

        /* Minimalist Process Roadmap Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes progressFlow {
            0% {
                height: 0%;
            }
            100% {
                height: 100%;
            }
        }

        @keyframes gentleFloat {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-3px);
            }
        }

        /* Smart hover states for process steps */
        .process-step {
            will-change: transform, box-shadow;
            /* Mobile optimization */
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .process-step:hover .step-number {
            animation: gentleFloat 2s ease-in-out infinite;
        }

        /* Smooth progress line animation */
        .progress-fill {
            transition: height 2.5s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: height;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }

        /* Mobile performance optimizations */
        @media (max-width: 768px) {
            .process-step {
                will-change: opacity;
                -webkit-transform: translate3d(0,0,0);
                transform: translate3d(0,0,0);
            }
            
            .step-number {
                -webkit-transform: translateZ(0);
                transform: translateZ(0);
            }
        }

        /* Enhanced Mobile Responsive Design */
        @media (max-width: 768px) {
            /* Global section spacing - 40px between sections only */
            section {
                padding: 40px 0 !important;
            }
            
            #process {
                padding: 40px 0 !important;
            }
            
            .container {
                padding: 0 16px !important;
            }
            
            /* Header optimizations */
            .section-header {
                margin-bottom: 40px !important;
            }
            
            .section-title {
                font-size: 28px !important;
                line-height: 1.3 !important;
                margin-bottom: 12px !important;
            }
            
            .section-subtitle {
                font-size: 16px !important;
                line-height: 1.5 !important;
            }
            
            /* Timeline container */
            .process-timeline {
                max-width: 100% !important;
                padding: 0 !important;
            }
            
            /* Progress line - centered for mobile */
            .progress-line {
                right: 50% !important;
                transform: translateX(50%) !important;
                top: 80px !important;
                bottom: 80px !important;
                width: 2px !important;
            }
            
            /* Process steps - mobile optimized */
            .process-step {
                flex-direction: column !important;
                text-align: center !important;
                margin-bottom: 40px !important;
                padding: 24px 16px !important;
                transform: none !important; /* Override desktop transforms */
            }
            
            .process-step[style*="row-reverse"] {
                flex-direction: column !important;
            }
            
            .process-step .step-number {
                margin: 0 auto 16px auto !important;
                width: 50px !important;
                height: 50px !important;
                font-size: 20px !important;
                z-index: 10 !important;
                position: relative !important;
            }
            
            .process-step .step-content {
                text-align: center !important;
                margin: 0 !important;
            }
            
            .process-step h3 {
                font-size: 20px !important;
                line-height: 1.3 !important;
                margin-bottom: 10px !important;
            }
            
            .process-step p {
                font-size: 15px !important;
                line-height: 1.5 !important;
                margin-bottom: 12px !important;
            }
            
            .process-step .step-features {
                justify-content: center !important;
                gap: 6px !important;
            }
            
            .process-step .step-features span {
                font-size: 12px !important;
                padding: 4px 8px !important;
            }
            
            .process-step:hover {
                transform: none !important;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important;
            }
            
        }
        
        /* Extra small devices (phones in portrait) */
        @media (max-width: 480px) {
            /* Global section spacing - 40px between sections only */
            section {
                padding: 40px 0 !important;
            }
            
            #process {
                padding: 40px 0 !important;
            }
            
            .container {
                padding: 0 12px !important;
            }
            
            .section-title {
                font-size: 24px !important;
            }
            
            .section-subtitle {
                font-size: 15px !important;
            }
            
            .process-step {
                padding: 20px 12px !important;
                margin-bottom: 30px !important;
            }
            
            .process-step h3 {
                font-size: 18px !important;
            }
            
            .process-step p {
                font-size: 14px !important;
            }
            
            /* Revenue Engines Mobile Responsive */
            .revenue-engines {
                padding: 40px 0 !important;
            }
            
            .engines-grid {
                max-width: 100% !important;
                padding: 0 !important;
                gap: clamp(30px, 8vw, 40px) !important;
            }
            
            
            
        }

    </style>
</head>
<body>
    
    
    <!-- Innovative Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <!-- Mobile Menu Toggle - Left -->
                <div class="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>

                <!-- Demo Control Button - Center (hidden by default) -->
                <div class="mobile-demo-nav" id="navDemoControl" style="display: none;">
                    <button class="mobile-demo-button" id="navDemoBtn" onclick="toggleDemoWithScroll()">
                        <span id="navDemoText">השהה דמו</span>
                        <i class="fas fa-pause" id="navDemoIcon"></i>
                    </button>
                </div>

                <!-- Logo Section - Right -->
                <div class="logo-section">
                    <div class="logo-text">
                        <span>Collabo <span class="ai-highlight">AI</span></span>
                        <span class="pro-sub">Pro</span>
                    </div>
                </div>

                <!-- Navigation - Center -->
                <nav class="nav-container">
                    <div class="nav-background"></div>
                    <div class="scroll-progress"></div>
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="#demo" class="nav-link">
                                <i class="fas fa-play-circle"></i>
                                <span>הדגמה חיה</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#pricing" class="nav-link">
                                <i class="fas fa-credit-card"></i>
                                <span>מחירים</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#contact" class="nav-link">
                                <i class="fas fa-envelope"></i>
                                <span>צור קשר</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <!-- CTA Section -->
                <div class="header-cta-section">
                    <button class="cta-button" onclick="startDemo()">
                        <span class="cta-text">התחל ניסיון חינם</span>
                        <div class="cta-icon">
                            <i class="fas fa-arrow-left"></i>
                        </div>
                        <div class="cta-glow"></div>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content fade-in-up">
                <h1>תארו לעצמכם מציאות שבה אתם <span class="highlight">לא רודפים יותר</span> אחרי לקוחות<br>
                אלא <span class="highlight">הם מגיעים אליכם</span> - <span class="highlight">מעוניינים ומוכנים</span></h1>
                <p class="subtitle highlight-text">מפסיקים לרדוף אחרי לקוחות ברשת! מערכת AI שהופכת את פייסבוק למכונת לידים אוטומטית עבורכם - מזהה, ניגשת ומדבר בקול שלכם! והופכת כל פוסט ברשת למקור הכנסה פוטנציאלי בזמן שאתם מתרכזים באיכות השירות שלכם.</p>
                
                <!-- Hero Buttons -->
                <div class="hero-buttons">
                    <button class="hero-btn demo-btn" onclick="scrollToDemoAndStart()">
                        רוצה לראות איך זה עובד?
                        <i class="fas fa-play" style="transform: scaleX(-1); margin-right: 8px;"></i>
                    </button>
                </div>
                
                
            </div>
        </div>
    </section>

    <!-- Demo Section -->
    <section class="demo" id="demo" style="padding: 80px 0; overflow: hidden; position: relative;">
        <div class="container">

            <!-- Progress Breadcrumb with clean design -->
            <div class="demo-progress" id="demoProgress" style="margin-bottom: 15px; display: none; justify-content: center;">
                <div class="progress-step" id="step-detection">
                    <span>איתור פוסטים</span>
                </div>
                <div class="progress-arrow">→</div>
                <div class="progress-step" id="step-analysis">
                    <span>ניתוח פוסטים</span>
                </div>
                <div class="progress-arrow">→</div>
                <div class="progress-step" id="step-response">
                    <span>יצירת תגובה</span>
                </div>
                <div class="progress-arrow">→</div>
                <div class="progress-step" id="step-messenger">
                    <span>מעבר למסנג'ר</span>
                </div>
            </div>

            <!-- Status Indicator -->
            <div id="statusIndicatorContainer" style="display: none; margin: 0 auto 15px auto; font-size: 18px; color: #000000; text-align: center; max-width: 800px;">
                <div id="statusIndicatorText" style="direction: rtl; unicode-bidi: isolate; text-align: right; width: 100%; height: auto; min-height: 50px; color: #000000; font-family: inherit; white-space: normal; overflow: visible; display: flex; align-items: flex-start; font-size: 16px; line-height: 1.4; background: #fff3cd; padding: 12px 12px; border-radius: 6px; box-sizing: border-box;"></div>
            </div>

            <!-- Demo Features - properly positioned -->
            <div class="demo-features" style="display: none; max-width: 900px; margin: 0 auto 0px auto;">
                <!-- Dynamic features list will be populated here -->
            </div>

            <!-- Demo Container - properly centered and spaced -->
            <div class="demo-container" style="display: flex; justify-content: center; margin-top: 15px; position: relative; min-height: 400px; align-items: center;" id="demoContainer">
                
                <!-- Centered Demo Button - shown initially -->
                <div id="centeredDemoButton" style="position: absolute; z-index: 10; text-align: center;">
                    <button onclick="startDemo()" style="
                        background: white;
                        color: #37352f;
                        border: 2px solid white;
                        border-radius: 8px;
                        font-size: 18px; 
                        padding: 16px 40px; 
                        min-width: 180px; 
                        display: flex; 
                        align-items: center; 
                        justify-content: center; 
                        gap: 10px;
                        font-weight: 600;
                        font-family: 'Inter', sans-serif;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1), 0 0 20px rgba(255, 49, 49, 0.3);
                    ">
                        <span>הפעל דמו</span>
                        <i class="fas fa-play" style="transform: scaleX(-1); color: #37352f;"></i>
                    </button>
                </div>

                <div class="demo-video demo-side" id="demoLeftSide" style="max-width: 800px; width: 100%; opacity: 0.3; filter: blur(1px);">
                    <!-- Facebook Header - Refined -->
                    <div class="facebook-header" style="
                        background: #4267B2;
                        color: white;
                        padding: 10px 16px;
                        border-radius: clamp(6px, 1.5vw, 12px) clamp(6px, 1.5vw, 12px) 0 0;
                        margin-bottom: 0;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 15px;
                        font-weight: 600;
                        box-shadow: none;
                        border-bottom: 1px solid rgba(255,255,255,0.2);
                    ">
                        <div style="display: flex; align-items: center; gap: 8px; min-height: 24px;">
                            <i class="fas fa-user-tie" style="font-size: 16px; display: none;"></i>
                            <span id="headerTitle">&nbsp;</span>
                        </div>
                    </div>
                    <div class="social-feed-demo" id="socialFeed" style="border-radius: 0 0 clamp(6px, 1.5vw, 12px) clamp(6px, 1.5vw, 12px);">
                        <!-- Customer card content - populated when demo starts -->
                        <div id="customerCardContent" style="padding: 0px 6px; text-align: center; direction: rtl; display: none; box-sizing: border-box;">
                            <!-- Dynamic content will be inserted here for each phase -->
                        </div>
                        
                        <!-- Facebook posts content - shown after customer card phases -->
                        <div id="facebookContent" style="display: none;">
                            <!-- Demo posts will be populated here -->
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </section>


    <!-- Process Roadmap Section -->
    <section class="process-roadmap" id="process" style="padding: 80px 0; background: #ffffff;">
        <div class="container">
            <!-- Section Header -->
            <div class="section-header" style="text-align: center; margin-bottom: 60px !important; opacity: 1; transform: translateY(0); transition: opacity 0.8s ease-out, transform 0.8s ease-out;" data-animate="header">
                <h2 class="section-title" style="font-size: 42px; font-weight: 800; color: var(--text-primary); margin-bottom: 16px; line-height: 1.2;">מה קורה מאחורי הקלעים?</h2>
                <p class="section-subtitle" style="color: var(--text-secondary); font-size: 18px; line-height: 1.6; max-width: 800px; margin: 0 auto;">6 שלבים אוטומטיים: מאפיון לקוח אישי ועד לידים מוכנים למכירה - הכל ברמת דיוק של 96%</p>
            </div>

            <!-- Interactive Process Timeline -->
            <div class="process-timeline" style="position: relative; max-width: 900px; margin: 0 auto;">
                
                <!-- Progress Line -->
                <div class="progress-line" style="position: absolute; right: 40px; top: 60px; bottom: 60px; width: 2px; background: rgba(0, 0, 0, 0.1); border-radius: 1px;">
                    <div class="progress-fill" style="width: 100%; height: 0%; background: linear-gradient(180deg, var(--text-primary) 0%, var(--text-secondary) 100%); border-radius: 1px; transition: height 2s ease-out;"></div>
                </div>
                
                
                <!-- Step 1: אפיון ולמידת לקוח -->
                <div class="process-step" data-step="0" style="display: flex; align-items: flex-start; margin-bottom: 60px !important; opacity: 1; transform: translateX(0); transition: all 0.6s ease-out; padding: 30px; border-radius: 16px; background: #ffffff; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 0, 0, 0.05); position: relative; cursor: pointer; flex-direction: row-reverse;" onmouseover="this.style.transform='translateX(30px) translateY(-8px)'; this.style.boxShadow='0 12px 40px rgba(0, 0, 0, 0.15)'" onmouseout="this.style.transform='translateX(30px) translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.08)'">
                    <div class="step-number" style="width: 60px; height: 60px; background: linear-gradient(135deg, #6366f1, #4338ca); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; flex-shrink: 0; margin-right: 30px; position: relative; z-index: 2;">1</div>
                    <div class="step-content" style="flex: 1; text-align: left;">
                        <div class="step-badge" style="display: inline-block; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(67, 56, 202, 0.1)); color: #4338ca; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; margin-bottom: 12px; border: 1px solid rgba(99, 102, 241, 0.2);">התחלה חכמה</div>
                        <h3 style="font-size: 24px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; line-height: 1.3;">אפיון ובניית אסטרטגיה</h3>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">אנחנו לומדים את העסק שלכם: מיהם לקוחות המטרה ומה הערך הייחודי שלכם. על בסיס זה בונים אסטרטגיה מדויקת לאיתור ולהשבת לקוחות בפייסבוק.</p>
                        <div class="step-features" style="display: flex; flex-wrap: wrap; gap: 8px; justify-content: flex-end;">
                            <span style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(67, 56, 202, 0.1)); color: #4338ca; padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; border: 1px solid rgba(99, 102, 241, 0.2);">פסיכולוגיית לקוח</span>
                            <span style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(67, 56, 202, 0.1)); color: #4338ca; padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; border: 1px solid rgba(99, 102, 241, 0.2);">מיפוי רגשי</span>
                            <span style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(67, 56, 202, 0.1)); color: #4338ca; padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; border: 1px solid rgba(99, 102, 241, 0.2);">אסטרטגיית תקשורת</span>
                        </div>
                    </div>
                </div>

                <!-- Step 2: בניית קול מותג -->
                <div class="process-step" data-step="1" style="display: flex; align-items: flex-start; margin-bottom: 60px !important; opacity: 1; transform: translateX(0); transition: all 0.6s ease-out; padding: 30px; border-radius: 16px; background: #ffffff; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 0, 0, 0.05); position: relative; cursor: pointer;" onmouseover="this.style.transform='translateX(-30px) translateY(-8px)'; this.style.boxShadow='0 12px 40px rgba(0, 0, 0, 0.15)'" onmouseout="this.style.transform='translateX(-30px) translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.08)'">
                    <div class="step-number" style="width: 60px; height: 60px; background: var(--text-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; flex-shrink: 0; margin-left: 30px; position: relative; z-index: 2;">2</div>
                    <div class="step-content" style="flex: 1;">
                        <div class="step-badge" style="display: inline-block; background: rgba(0, 0, 0, 0.08); color: var(--text-primary); padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; margin-bottom: 12px;">ייחוד מותגי</div>
                        <h3 style="font-size: 24px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; line-height: 1.3;">בניית קול המותג שלכם</h3>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">יוצרים אישיות דיגיטלית מושלמת שלכם: הטון, הסגנון, והפרטים האישיים שאתם משתפים. כל תגובה נשמעת בדיוק כמוכם, רק עם חשיבה אסטרטגית.</p>
                        <div class="step-features" style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">זהות קולית ייחודית</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">טון אותנטי</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">עקביות מלאה</span>
                        </div>
                    </div>
                </div>

                <!-- Step 3: סריקה וסינון -->
                <div class="process-step" data-step="2" style="display: flex; align-items: flex-start; margin-bottom: 60px !important; opacity: 1; transform: translateX(0); transition: all 0.6s ease-out; padding: 30px; border-radius: 16px; background: #ffffff; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 0, 0, 0.05); position: relative; cursor: pointer; flex-direction: row-reverse;" onmouseover="this.style.transform='translateX(30px) translateY(-8px)'; this.style.boxShadow='0 12px 40px rgba(0, 0, 0, 0.15)'" onmouseout="this.style.transform='translateX(30px) translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.08)'">
                    <div class="step-number" style="width: 60px; height: 60px; background: var(--text-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; flex-shrink: 0; margin-right: 30px; position: relative; z-index: 2;">3</div>
                    <div class="step-content" style="flex: 1; text-align: left;">
                        <div class="step-badge" style="display: inline-block; background: rgba(0, 0, 0, 0.08); color: var(--text-primary); padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; margin-bottom: 12px;">סריקה חכמה</div>
                        <h3 style="font-size: 24px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; line-height: 1.3;">רק הפוסטים עם הפוטנציאל הגדול ביותר</h3>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">מאות אלפי פוסטים ביום נסרקים, אבל אנחנו מזהים רק את אלו עם לקוחות אמיתיים שצריכים את השירות שלכם. כך אתם מגיעים ראשונים לפוסטים עם הפוטנציאל הגדול ביותר.</p>
                        <div class="step-features" style="display: flex; flex-wrap: wrap; gap: 8px; justify-content: flex-end;">
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">חיפוש עמוק</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">סינון מתקדם</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">אמת לחלוטין</span>
                        </div>
                    </div>
                </div>

                <!-- Step 4: ניתוח כוונות -->
                <div class="process-step" data-step="3" style="display: flex; align-items: flex-start; margin-bottom: 60px !important; opacity: 1; transform: translateX(0); transition: all 0.6s ease-out; padding: 30px; border-radius: 16px; background: #ffffff; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 0, 0, 0.05); position: relative; cursor: pointer;" onmouseover="this.style.transform='translateX(-30px) translateY(-8px)'; this.style.boxShadow='0 12px 40px rgba(0, 0, 0, 0.15)'" onmouseout="this.style.transform='translateX(-30px) translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.08)'">
                    <div class="step-number" style="width: 60px; height: 60px; background: var(--text-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; flex-shrink: 0; margin-left: 30px; position: relative; z-index: 2;">4</div>
                    <div class="step-content" style="flex: 1;">
                        <div class="step-badge" style="display: inline-block; background: rgba(0, 0, 0, 0.08); color: var(--text-primary); padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; margin-bottom: 12px;">אינטליגנציה רגשית</div>
                        <h3 style="font-size: 24px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; line-height: 1.3;">זיהוי כוונות ורמת דחיפות</h3>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">מנתחים את הפוסט ומבינים: האם זה סקרנות או לקוח אמיתי? מה רמת הדחיפות? כמה הוא מעוניין בפתרון? רק כך אנחנו יודעים איך להגיב בצורה היעילה ביותר.</p>
                        <div class="step-features" style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">חוכמה רגשית</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">זיהוי דחיפות</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">הערכת פוטנציאל</span>
                        </div>
                    </div>
                </div>

                <!-- Step 5: תגובה חכמה -->
                <div class="process-step" data-step="4" style="display: flex; align-items: flex-start; margin-bottom: 60px !important; opacity: 1; transform: translateX(0); transition: all 0.6s ease-out; padding: 30px; border-radius: 16px; background: #ffffff; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 0, 0, 0.05); position: relative; cursor: pointer; flex-direction: row-reverse;" onmouseover="this.style.transform='translateX(30px) translateY(-8px)'; this.style.boxShadow='0 12px 40px rgba(0, 0, 0, 0.15)'" onmouseout="this.style.transform='translateX(30px) translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.08)'">
                    <div class="step-number" style="width: 60px; height: 60px; background: var(--text-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; flex-shrink: 0; margin-right: 30px; position: relative; z-index: 2;">5</div>
                    <div class="step-content" style="flex: 1; text-align: left;">
                        <div class="step-badge" style="display: inline-block; background: rgba(0, 0, 0, 0.08); color: var(--text-primary); padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; margin-bottom: 12px;">מאסטר תקשורת</div>
                        <h3 style="font-size: 24px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; line-height: 1.3;">תגובות אינפורמטיביות שמוסיפות ערך</h3>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">לא "דבר איתי בפרטי" אלא ערך אמיתי. כל תגובה כוללת טיפ מעשי שמקדם את הלקוח + קריאה עדינה להמשך. הלקוח מרגיש שקיבל שירות איכותי כבר בתגובה הראשונה.</p>
                        <div class="step-features" style="display: flex; flex-wrap: wrap; gap: 8px; justify-content: flex-end;">
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">תגובות בעלות נשמה</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">ייחודיות מלאה</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">השפעה מיידית</span>
                        </div>
                    </div>
                </div>

                <!-- Step 6: פולואפ מסנג'ר -->
                <div class="process-step" data-step="5" style="display: flex; align-items: flex-start; margin-bottom: 60px !important; opacity: 1; transform: translateX(0); transition: all 0.6s ease-out; padding: 30px; border-radius: 16px; background: #ffffff; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 0, 0, 0.05); position: relative; cursor: pointer;" onmouseover="this.style.transform='translateX(-30px) translateY(-8px)'; this.style.boxShadow='0 12px 40px rgba(0, 0, 0, 0.15)'" onmouseout="this.style.transform='translateX(-30px) translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.08)'">
                    <div class="step-number" style="width: 60px; height: 60px; background: var(--text-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; flex-shrink: 0; margin-left: 30px; position: relative; z-index: 2;">6</div>
                    <div class="step-content" style="flex: 1;">
                        <div class="step-badge" style="display: inline-block; background: rgba(0, 0, 0, 0.08); color: var(--text-primary); padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; margin-bottom: 12px;">סוגר עסקות</div>
                        <h3 style="font-size: 24px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; line-height: 1.3;">פולואפ במסנג'ר שמגיע ללקוח</h3>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">לא רק תגובה ציבורית - גם פולואפ אישי במסנג'ר. פרוטוקול מיוחד מוודא שההודעה תגיע ישיר ל-Inbox של הלקוח, לא לספאם. שיעורי פתיחה גבוהים משמעותית.</p>
                        <div class="step-features" style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">מוכר מנוסה</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">המרה למכירה</span>
                            <span style="background: rgba(0, 0, 0, 0.06); color: var(--text-primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">כסף במזומן</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Revenue Engines Section -->
    <section class="revenue-engines" id="revenue-engines" style="padding: 80px 0; background: #ffffff;">
        <div class="container">
            <!-- Section Header -->
            <div class="section-header" style="text-align: center; margin-bottom: 60px !important;">
                <h2 class="section-title" style="font-size: 42px; font-weight: 800; color: var(--text-primary); margin-bottom: 16px; line-height: 1.2;">מנועי הכנסה</h2>
                <p class="section-subtitle" style="color: var(--text-secondary); font-size: 18px; line-height: 1.6; max-width: 800px; margin: 0 auto;">2 סוגי לקוחות שונים המייצרים לכם הכנסה קבועה 24/7</p>
            </div>

            <div class="engines-grid" style="display: grid; grid-template-columns: 1fr; gap: 60px; max-width: 900px; margin: 0 auto; padding: 0;">
                
                <!-- Engine 1: Direct Revenue - Pyramid Style -->
                <div class="engine-pyramid" style="text-align: center; padding: 30px 20px 40px 20px; border-radius: 16px; background: #ffffff; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 2px solid #e5e7eb;">
                    
                    <!-- TITLE - Top of Pyramid -->
                    <div class="pyramid-title" style="margin-bottom: 40px;">
                        <span style="display: inline-block; background: #000000; color: white; padding: 8px 16px; border-radius: 20px; font-size: 18px; font-weight: 700; margin-bottom: 8px;">לקוחות "פעילים"</span>
                        <p style="font-size: 18px; color: var(--text-secondary); font-weight: 500;">משתמשים שמפרסמים פוסטים בהם הם מחפשים בעלי מקצוע או שירותים שונים</p>
                    </div>

                    <!-- DETAILED STEPS - Full Content -->
                    <div class="detailed-steps" style="text-align: right; margin-bottom: 40px; padding-top: 32px;">
                        
                        <!-- Step 1 Details -->
                        <div style="text-align: center; margin-bottom: 16px;">
                            <span style="width: 32px; height: 32px; background: var(--text-primary); color: white; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 700; min-width: 32px; min-height: 32px; line-height: 1;">1</span>
                        </div>
                        <h4 style="font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; text-align: center;">
                            זיהוי לקוח בזמן אמת
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">לקוח שמפרסם פוסט - מחפש פתרון כאן ועכשיו. כל דקה שעוברת עד שאתם מגיעים אליו היא לקוח פוטנציאלי שמגיע למתחרים. הזיהוי המהיר שלנו נותן לכם יתרון ענק בסגירת הלקוח</p>
                        <p style="color: var(--text-primary); font-size: 15px; font-weight: 600; margin-bottom: 32px; display: flex; align-items: flex-start;"><span style="display: inline-flex; align-items: center; justify-content: center; width: 20px; height: 20px; background: #10b981; color: white; border-radius: 50%; font-size: 12px; margin-left: 8px; flex-shrink: 0;">✓</span>85% מפוסטים מסוג זה הופכים לפגישה כבר באותו יום</p>
                        <div style="width: 70%; height: 1px; background: #d1d5db; margin: 0 auto 32px auto;"></div>

                        <!-- Step 2 Details -->
                        <div style="text-align: center; margin-bottom: 16px;">
                            <span style="width: 32px; height: 32px; background: var(--text-primary); color: white; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 700; min-width: 32px; min-height: 32px; line-height: 1;">2</span>
                        </div>
                        <h4 style="font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; text-align: center;">
                            תגובה מקצועית עם ערך אמיתי
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">לא מספיק רק להגיב לפוסטים. התגובה שלכם צריכה לפתור בעיה, לענות לשאלה ולהראות שאתם מומחים. זה מייצר אמון מידי וחוב פסיכולוגי, הגורם לכך שהם תמיד יבחרו לעבוד איתכם!</p>
                        <p style="color: var(--text-primary); font-size: 15px; font-weight: 600; margin-bottom: 32px; display: flex; align-items: flex-start;"><span style="display: inline-flex; align-items: center; justify-content: center; width: 20px; height: 20px; background: #10b981; color: white; border-radius: 50%; font-size: 12px; margin-left: 8px; flex-shrink: 0;">✓</span>הלקוח הראשון שמגיב - זה שמקבל את העסקה</p>
                        <div style="width: 70%; height: 1px; background: #d1d5db; margin: 0 auto 32px auto;"></div>

                        <!-- Step 3 Details -->
                        <div style="text-align: center; margin-bottom: 16px;">
                            <span style="width: 32px; height: 32px; background: var(--text-primary); color: white; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 700; min-width: 32px; min-height: 32px; line-height: 1;">3</span>
                        </div>
                        <h4 style="font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; text-align: center;">
                            אימות מכירה
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">אחרי שהגבנו לפוסט, שליחת הודעה אישית מאפשרת לבדוק שהלקוח מבין את ההצעה, לענות על שאלות נוספות ולהפוך את הפוסט ללקוח משלם!</p>
                        <p style="color: var(--text-primary); font-size: 15px; font-weight: 600; margin-bottom: 32px; display: flex; align-items: flex-start;"><span style="display: inline-flex; align-items: center; justify-content: center; width: 20px; height: 20px; background: #10b981; color: white; border-radius: 50%; font-size: 12px; margin-left: 8px; flex-shrink: 0;">✓</span>בממוצע - 30% יותר ממחיר השוק</p>
                    </div>

                    <!-- QUOTE - Bottom of Engine -->
                    <div class="pyramid-quote" style="background: rgba(0, 0, 0, 0.04); border: 2px solid rgba(0, 0, 0, 0.15); color: var(--text-primary); padding: 20px; border-radius: 12px; max-width: 600px; margin: 40px auto 0 auto;">
                        <p style="font-size: 18px; font-weight: 600; margin: 0; font-style: italic; text-align: center;">מי שמגיב נכון ראשון - סוגר ראשון !</p>
                    </div>

                </div>

                <!-- Engine 2: Indirect Revenue - Pyramid Style -->
                <div class="engine-pyramid" style="text-align: center; padding: 30px 20px 40px 20px; border-radius: 16px; background: #ffffff; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 2px solid #e5e7eb;">
                    
                    <!-- TITLE - Top of Pyramid -->
                    <div class="pyramid-title" style="margin-bottom: 40px;">
                        <span style="display: inline-block; background: #000000; color: white; padding: 8px 16px; border-radius: 20px; font-size: 18px; font-weight: 700; margin-bottom: 8px;">לקוחות "שקטים"</span>
                        <p style="font-size: 18px; color: var(--text-secondary); font-weight: 500;">משתמשים שלא מפרסמים בעצמם, אלא מאתרים בעלי מקצוע מתוך קריאה וצפייה של התגובות מובילות בלבד שנכתבו לפוסטים של הלקוחות הפעילים</p>
                    </div>

                    <!-- DETAILED STEPS - Full Content -->
                    <div class="detailed-steps" style="text-align: right; margin-bottom: 40px; padding-top: 32px;">
                        
                        <!-- Step 1 Details -->
                        <div style="text-align: center; margin-bottom: 16px;">
                            <span style="width: 32px; height: 32px; background: var(--text-primary); color: white; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 700; min-width: 32px; min-height: 32px; line-height: 1;">1</span>
                        </div>
                        <h4 style="font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; text-align: center;">
                            מענה מקצועי גם לפוסטים המבקשים עצה או עזרה
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">כל תגובה מקצועית שלכם נצפית על ידי עשרות או מאות לקוחות שקטים. הם קוראים הכל, מזהים אותכם כמומחים, ופונים אליכם בעצמם!</p>
                        <p style="color: var(--text-primary); font-size: 15px; font-weight: 600; margin-bottom: 32px; display: flex; align-items: flex-start;"><span style="display: inline-flex; align-items: center; justify-content: center; width: 20px; height: 20px; background: #10b981; color: white; border-radius: 50%; font-size: 12px; margin-left: 8px; flex-shrink: 0;">✓</span>60% מאותם פוסטים הופכים ללקוחות משלמים כבר באותו יום</p>
                        <div style="width: 70%; height: 1px; background: #d1d5db; margin: 0 auto 32px auto;"></div>

                        <!-- Step 2 Details -->
                        <div style="text-align: center; margin-bottom: 16px;">
                            <span style="width: 32px; height: 32px; background: var(--text-primary); color: white; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 700; min-width: 32px; min-height: 32px; line-height: 1;">2</span>
                        </div>
                        <h4 style="font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; text-align: center;">
                            פייסבוק עובדת בשבילכם
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">אחרי שהגבתם ל-50 פוסטים, האלגוריתם של פייסבוק מזהה אותכם כמומחים בתחום, ומציב אתכם בראש הפוסטים, וכל תגובה שלכם הופכת לגלגל ענק של חשיפה לאלפי לקוחות חדשים – בלי פרסום נוסף!</p>
                        <p style="color: var(--text-primary); font-size: 15px; font-weight: 600; margin-bottom: 32px; display: flex; align-items: flex-start;"><span style="display: inline-flex; align-items: center; justify-content: center; width: 20px; height: 20px; background: #10b981; color: white; border-radius: 50%; font-size: 12px; margin-left: 8px; flex-shrink: 0;">✓</span>ככה נוצר ליד ממוצע של 300-500 לידים איכותיים בחודש</p>
                        <div style="width: 70%; height: 1px; background: #d1d5db; margin: 0 auto 32px auto;"></div>

                        <!-- Step 3 Details -->
                        <div style="text-align: center; margin-bottom: 16px;">
                            <span style="width: 32px; height: 32px; background: var(--text-primary); color: white; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 700; min-width: 32px; min-height: 32px; line-height: 1;">3</span>
                        </div>
                        <h4 style="font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; text-align: center;">
                            אמון ומוניטין = כסף גדול
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 16px;">הלקוחות השקטים הם רוב המשתמשים (יותר מ-85%). הם לא מגיבים, ולא מפרסמים, אבל הם בוחרים בכם כשהם צריכים שירות. זה לקוחות שמוכנים לשלם יותר, כי הם כבר סומכים עליכם עוד לפני שפנו אליכם</p>
                        <p style="color: var(--text-primary); font-size: 15px; font-weight: 600; margin-bottom: 32px; display: flex; align-items: flex-start;"><span style="display: inline-flex; align-items: center; justify-content: center; width: 20px; height: 20px; background: #10b981; color: white; border-radius: 50%; font-size: 12px; margin-left: 8px; flex-shrink: 0;">✓</span>תמיד בתקציב נכון - כי הלקוח כבר "הכיר" אותכם</p>
                    </div>

                    <!-- QUOTE - Bottom of Engine -->
                    <div class="pyramid-quote" style="background: rgba(0, 0, 0, 0.04); border: 2px solid rgba(0, 0, 0, 0.15); color: var(--text-primary); padding: 20px; border-radius: 12px; max-width: 600px; margin: 40px auto 0 auto;">
                        <p style="font-size: 18px; font-weight: 600; margin: 0; font-style: italic; text-align: center;">כשמישהו רואה אותכם עוזרים לאחרים - הוא כבר יודע שאתם שווים את הכסף!</p>
                    </div>

                </div>

            </div>
        </div>
    </section>

    <!-- Performance Statistics -->
    <section class="performance-stats" id="performance-stats" style="padding: 80px 0;">
        <div class="container">
            <div class="section-header" style="text-align: center; margin-bottom: 60px !important;">
                <h2 class="section-title font-black mb-6">התוצאות מדברות בעד עצמן</h2>
                <p class="section-subtitle">נתונים אמיתיים מלקוחותינו ברחבי הארץ</p>
            </div>
            
            <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 40px;">
                
                <!-- Response Rate -->
                <div class="testimonial-card" style="text-align: center;">
                    <div style="font-size: clamp(48px, 8vw, 64px); font-weight: 800; color: var(--text-primary); line-height: 1; margin-bottom: 16px;">73%</div>
                    <h3 style="font-size: 20px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">שיעור מענה</h3>
                    <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.5;">מהלקוחות הפוטנציאליים מגיבים להודעות הסוכן</p>
                </div>

                <!-- Warm Lead Rate -->
                <div class="testimonial-card" style="text-align: center;">
                    <div style="font-size: clamp(48px, 8vw, 64px); font-weight: 800; color: var(--text-primary); line-height: 1; margin-bottom: 16px;">65%</div>
                    <h3 style="font-size: 20px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">שיעור לידים חמים</h3>
                    <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.5;">מהתגובות הופכות ללידים איכותיים המוכנים לקנייה</p>
                </div>

                <!-- Total Leads Generated -->
                <div class="testimonial-card" style="text-align: center;">
                    <div style="font-size: clamp(48px, 8vw, 64px); font-weight: 800; color: var(--text-primary); line-height: 1; margin-bottom: 16px;">250K</div>
                    <h3 style="font-size: 20px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">סך הלידים שנוצרו</h3>
                    <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.5;">לידים איכותיים נוצרו עד היום על ידי הסוכנים שלנו</p>
                </div>

            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials" id="testimonials" style="padding: 80px 0;">
        <div class="container">
            <div class="section-header" style="text-align: center; margin-bottom: 60px !important;">
                <h2 class="section-title font-black mb-6">מה אומרים הלקוחות שלנו</h2>
                <p class="section-subtitle">אלפי עסקים כבר השתכנעו ביכולות של הסוכן הדיגיטלי. ראה איך הם הגדילו את המכירות והחסכו זמן יקר</p>
            </div>
            
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"הסוכן הדיגיטלי פשוט שינה לנו את המשחק. במקום לבזבז שעות על סריקה ידנית, אנחנו מקבלים לידים איכותיים ישירות אלינו. העסק גדל משמעותית בחצי שנה האחרונה"</p>
                    <div class="testimonial-author">
                        <div class="avatar avatar-lg author-avatar">ד.כ</div>
                        <div class="author-info">
                            <h4>דני כהן</h4>
                            <span>מנכ"ל, חברת שיפוצים</span>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"כמו שאמר שותף שלי - זה כמו שיש לנא עובד נוסף רק על לידים. הטכנולוגיה מדהימה והתמיכה מעולה. השקעה שמחזירה את עצמה תוך חודש."</p>
                    <div class="testimonial-author">
                        <div class="avatar avatar-lg author-avatar">ר.ל</div>
                        <div class="author-info">
                            <h4>מיכל פרידמן</h4>
                            <span>מייסדת, סטודיו לעיצוב פנים</span>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"הפלטפורמה הכי מתקדמת שראיתי. מבין בדיוק מה הלקוחות רוצים ומגיב בצורה טבעית. עד עכשיו רכשנו לידים מכל מיני ספקים שלא הביאו שום תועלת ועלו הרבה כסף."</p>
                    <div class="testimonial-author">
                        <div class="avatar avatar-lg author-avatar">מ.ג</div>
                        <div class="author-info">
                            <h4>מיכאל גולן</h4>
                            <span>בעלים, רשת מוסכים</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Pricing -->
    <section class="pricing" id="pricing" style="padding: 80px 0;">
        <div class="container">
            <div class="pricing-header" style="text-align: center; margin-bottom: 60px !important;">
                <h2>תוכנית Collabo AI Pro</h2>
                <p>פתרון מקצועי ומשתלם לעסקים שרוצים לגדול עם ליווי אישי מלא</p>
            </div>
            
            <div class="pricing-cards" style="max-width: 500px;">
                <div class="pricing-card featured">
                    <h3 class="pricing-plan">Collabo AI Pro</h3>
                    <div class="pricing-price">₪350</div>
                    <div class="pricing-period">לחודש + מע"מ</div>
                    <ul class="pricing-features">
                        <li><i class="fas fa-check"></i> סריקה אוטומטית של פוסטים ברשתות חברתיות</li>
                        <li><i class="fas fa-check"></i> זיהוי לקוחות פוטנציאליים בזמן אמת</li>
                        <li><i class="fas fa-check"></i> תגובות מותאמות אישית לכל פוסט</li>
                        <li><i class="fas fa-check"></i> מעבר אוטומטי לשיחה פרטית ב-Messenger</li>
                        <li><i class="fas fa-check"></i> איסוף פרטי קשר ואיכות לידים</li>
                        <li><i class="fas fa-check"></i> העברה אוטומטית ל-CRM או WhatsApp</li>
                        <li><i class="fas fa-check"></i> פעילות 24/7 ללא הפסקות או חופשות</li>
                        <li><i class="fas fa-check"></i> דוחות יומיים ושבועיים מפורטים</li>
                        <li><i class="fas fa-check"></i> התאמה מלאה לתחום ואיזור הפעילות</li>
                        <li><i class="fas fa-check"></i> ליווי אישי וטכני מלא</li>
                        <li><i class="fas fa-check"></i> 3 ימים ניסיון חינם ללא התחייבות</li>
                        <li><i class="fas fa-check"></i> אפשרות ביטול בכל עת</li>
                    </ul>
                    <button class="btn-base px-6 py-4 font-semibold text-center btn-primary btn-lg pricing-cta" onclick="selectPlan('digital-agent')">התחל ניסיון חינם עכשיו</button>
                </div>
            </div>
        </div>
    </section>


    <!-- Contact Form Section -->
    <section class="contact-section" id="contact" style="padding: 80px 0;">
        <div class="container">
            <div class="contact-container">
                <div class="contact-icon">
                    <i class="fas fa-rocket"></i>
                </div>
                <h2 class="font-black mb-4">מוכן להטיס את העסק שלך?</h2>
                <p class="section-subtitle" style="margin-bottom: 0; opacity: 0.95;">השאר פרטים ונחזור אליך תוך 24 שעות עם הצעה מותאמת אישית</p>
                
                <form class="contact-form" id="contactForm">
                    <!-- Row with Name and Phone side by side -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;" class="form-row-responsive">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label class="form-label" for="phone">מספר טלפון</label>
                            <input type="tel" id="phone" name="phone" class="form-input" placeholder="הכנס מספר טלפון" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label class="form-label" for="fullName">שם מלא</label>
                            <input type="text" id="fullName" name="fullName" class="form-input" placeholder="הכנס את שמך המלא" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="businessType">איזה תחום עסקי?</label>
                        <select id="businessType" name="businessType" class="form-input" required onchange="toggleOtherBusinessField()">
                            <option value="">בחר תחום...</option>
                            <option value="design">עיצוב פנים</option>
                            <option value="construction">שיפוצים ובנייה</option>
                            <option value="automotive">מוסכים ואוטו</option>
                            <option value="legal">משרדי עורכי דין</option>
                            <option value="medical">שירותי רפואה</option>
                            <option value="consulting">ייעוץ עסקי</option>
                            <option value="other">אחר</option>
                        </select>
                    </div>
                    
                    <!-- Hidden field for custom business type -->
                    <div class="form-group" id="otherBusinessGroup" style="display: none;">
                        <label class="form-label" for="otherBusiness">תאר את התחום העסקי שלך</label>
                        <input type="text" id="otherBusiness" name="otherBusiness" class="form-input" placeholder="לדוגמה: שירותי ניקיון, צילום, קייטרינג...">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="location">איזור פעילות עיקרי?</label>
                        <select id="location" name="location" class="form-input" required>
                            <option value="">בחר איזור...</option>
                            <option value="center">מרכז</option>
                            <option value="north">צפון</option>
                            <option value="south">דרום</option>
                            <option value="jerusalem">ירושלים והסביבה</option>
                            <option value="national">כל הארץ</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn-base px-6 py-4 font-semibold text-center btn-gradient btn-lg" style="width: 100%; font-size: 18px;">
                        🚀 שלח פרטים וקבל הצעה מותאמת
                    </button>
                </form>
                
                <div class="form-benefits">
                    <div class="form-benefit">
                        <i class="fas fa-check"></i>
                        ללא התחייבות
                    </div>
                    <div class="form-benefit">
                        <i class="fas fa-check"></i>
                        3 ימים ניסיון חינם
                    </div>
                    <div class="form-benefit">
                        <i class="fas fa-check"></i>
                        הגדרה תוך 24 שעות
                    </div>
                </div>
            </div>
        </div>
    </section>


    <script>
        // Enhanced Animated Stars Background
        function createStars() {
            const starsContainer = document.getElementById('stars');
            if (!starsContainer) {
                console.log('Stars container not found, skipping star creation');
                return;
            }
            const numberOfStars = 150; // Increased number of stars
            
            // Create regular twinkling and drifting stars
            for (let i = 0; i < numberOfStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                // Random size classes with weighted distribution
                const starTypes = ['small', 'small', 'small', 'medium', 'medium', 'large'];
                const randomType = starTypes[Math.floor(Math.random() * starTypes.length)];
                star.classList.add(randomType);
                
                // Random position
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                
                // Random animation delay
                star.style.animationDelay = Math.random() * 5 + 's';
                
                starsContainer.appendChild(star);
            }
            
            // Create floating stars (rise from bottom)
            function createFloatingStars() {
                for (let i = 0; i < 8; i++) {
                    setTimeout(() => {
                        const floatingStar = document.createElement('div');
                        floatingStar.className = 'star floating';
                        
                        // Random horizontal position
                        floatingStar.style.left = Math.random() * 100 + '%';
                        floatingStar.style.top = '100vh';
                        
                        starsContainer.appendChild(floatingStar);
                        
                        // Remove after animation
                        setTimeout(() => {
                            if (floatingStar.parentNode) {
                                floatingStar.parentNode.removeChild(floatingStar);
                            }
                        }, 15000);
                    }, i * 2000); // Stagger creation
                }
                
                // Schedule next batch
                setTimeout(createFloatingStars, 20000);
            }
            
            // Create orbiting stars
            function createOrbitingStars() {
                for (let i = 0; i < 5; i++) {
                    const orbitingStar = document.createElement('div');
                    orbitingStar.className = 'star orbiting';
                    
                    // Random center position
                    orbitingStar.style.left = Math.random() * 80 + 10 + '%';
                    orbitingStar.style.top = Math.random() * 80 + 10 + '%';
                    
                    // Random animation delay
                    orbitingStar.style.animationDelay = Math.random() * 10 + 's';
                    
                    starsContainer.appendChild(orbitingStar);
                }
            }
            
            // Create shooting stars
            function createShootingStar() {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'star shooting';
                
                // Random starting position (from different sides)
                const side = Math.random();
                if (side < 0.5) {
                    // From left
                    shootingStar.style.left = '-100px';
                    shootingStar.style.top = Math.random() * 70 + '%';
                } else {
                    // From top-left corner
                    shootingStar.style.left = Math.random() * 30 + '%';
                    shootingStar.style.top = '-100px';
                }
                
                starsContainer.appendChild(shootingStar);
                
                // Remove after animation
                setTimeout(() => {
                    if (shootingStar.parentNode) {
                        shootingStar.parentNode.removeChild(shootingStar);
                    }
                }, 4000);
            }
            
            // Create shooting star every 3-6 seconds (more frequent)
            function scheduleShootingStar() {
                const delay = Math.random() * 3000 + 3000; // 3-6 seconds
                setTimeout(() => {
                    createShootingStar();
                    scheduleShootingStar();
                }, delay);
            }
            
            // Create central "reaching for the stars" animation
            function createReachingStarAnimation() {
                const centralStar = document.createElement('div');
                centralStar.className = 'star central-reaching';
                
                // Position in center-bottom area
                centralStar.style.left = '50%';
                centralStar.style.top = '85%';
                centralStar.style.transform = 'translateX(-50%)';
                
                starsContainer.appendChild(centralStar);
                
                // Create trail of smaller stars that follow
                for (let i = 1; i <= 5; i++) {
                    setTimeout(() => {
                        const trailStar = document.createElement('div');
                        trailStar.className = 'star trail-star';
                        trailStar.style.left = '50%';
                        trailStar.style.top = '85%';
                        trailStar.style.transform = 'translateX(-50%)';
                        trailStar.style.animationDelay = (i * 0.2) + 's';
                        
                        starsContainer.appendChild(trailStar);
                        
                        // Remove trail star after animation
                        setTimeout(() => {
                            if (trailStar.parentNode) {
                                trailStar.parentNode.removeChild(trailStar);
                            }
                        }, 8000);
                    }, i * 300);
                }
                
                // Remove central star after animation
                setTimeout(() => {
                    if (centralStar.parentNode) {
                        centralStar.parentNode.removeChild(centralStar);
                    }
                }, 8000);
            }
            
            // Schedule central animation every 15 seconds
            function scheduleCentralAnimation() {
                setTimeout(() => {
                    createReachingStarAnimation();
                    scheduleCentralAnimation();
                }, 15000);
            }
            
            // Create constellation animation
            function createConstellation() {
                const constellationStars = [];
                const positions = [
                    { x: 20, y: 30 }, { x: 25, y: 25 }, { x: 30, y: 32 },
                    { x: 80, y: 40 }, { x: 85, y: 35 }, { x: 75, y: 45 }
                ];
                
                positions.forEach((pos, index) => {
                    setTimeout(() => {
                        const conStar = document.createElement('div');
                        conStar.className = 'star constellation';
                        conStar.style.left = pos.x + '%';
                        conStar.style.top = pos.y + '%';
                        conStar.style.animationDelay = (index * 0.5) + 's';
                        
                        starsContainer.appendChild(conStar);
                        constellationStars.push(conStar);
                    }, index * 500);
                });
                
                // Remove constellation after animation
                setTimeout(() => {
                    constellationStars.forEach(star => {
                        if (star.parentNode) {
                            star.parentNode.removeChild(star);
                        }
                    });
                }, 10000);
            }
            
            // Initialize all star types with enhanced timing
            createOrbitingStars();
            setTimeout(createFloatingStars, 2000);
            setTimeout(scheduleShootingStar, 1000);
            setTimeout(scheduleCentralAnimation, 5000);
            setTimeout(createConstellation, 8000);
            
            // Create constellation every 20 seconds
            setInterval(createConstellation, 20000);
        }
        
        // Constants
        const DELAYS = {
            SHORT: 800,
            MEDIUM: 1200,
            LONG: 1500,
            TYPING: 25,
            TYPING_SLOW: 40
        };

        // Utility Functions
        const $ = (selector) => document.querySelector(selector);
        const $$ = (selector) => document.querySelectorAll(selector);
        const $id = (id) => document.getElementById(id);

        function delayedExecute(fn, delay = DELAYS.MEDIUM) {
            return setTimeout(fn, delay);
        }
        
        // Tracked setTimeout wrapper - LEGACY COMPATIBILITY - uses new smart delay system
        function trackedSetTimeout(fn, delay) {
            console.log('⚠️ LEGACY: trackedSetTimeout called - converting to smartDelay');
            
            // Convert to smartDelay + function execution
            smartDelay(delay)
                .then(() => {
                    if (typeof fn === 'function') {
                        fn();
                    }
                })
                .catch(error => {
                    if (error.message !== 'Demo not active' && error.message !== 'Delay cancelled') {
                        console.error('trackedSetTimeout error:', error);
                    }
                });
            
            // Return a fake timeout ID for backward compatibility
            return Date.now() + Math.random();
        }
        
        // Tracked delay function - LEGACY COMPATIBILITY - uses new smart delay system
        let pausedDelays = new Map(); // Keep for backward compatibility
        
        function trackedDelay(delay) {
            console.log('⚠️ LEGACY: trackedDelay called - forwarding to smartDelay');
            return smartDelay(delay);
        }
        
        // Resume all paused delays - LEGACY COMPATIBILITY (now handled by DemoStateManager)
        function resumeDelays() {
            console.log('⚠️ LEGACY: resumeDelays called - operations now handled by DemoStateManager');
            // Clear legacy delays map for compatibility
            pausedDelays.clear();
        }
        
        // Global state for typing functions
        let activeTypingPromises = new Set();
        let pausedTypingStates = new Map(); // Store typing states for resume
        
        // Resume all paused typing functions - LEGACY COMPATIBILITY (now handled by DemoStateManager)
        function resumeTyping() {
            console.log('⚠️ LEGACY: resumeTyping called - operations now handled by DemoStateManager');
            // Clear legacy typing states for compatibility
            pausedTypingStates.clear();
        }
        
        // REMOVED: Legacy typing functions - now handled by smartTypeText in DemoStateManager

        function setStyles(element, styles) {
            element.style.cssText = styles;
        }

        // Demo Examples
        const demoExamples = [
            // Post 1: לא רלוונטי (חדש)
            {
                name: "נועה דהן",
                avatar: "נ.ד",
                time: "1 דקה",
                content: "מישהו יודע איפה יש סרט טוב היום? אני צריכה משהו שיעשה לי טוב לנפש 🍿🎬",
                isLead: false,
                category: "bot_post"
            },
            // Posts 2-3: לא רלוונטיים
            {
                name: "ליאת כץ",
                avatar: "ל.כ",
                time: "2 דקות",
                content: "הסתובבתי היום בקניון וראיתי כמה דברים יפים! הקניות עושות לי טוב 😊",
                isLead: false,
                category: "bot_post"
            },
            {
                name: "איתן לוי",
                avatar: "א.ל",
                time: "5 דקות",
                content: "מחפש קבלן טוב ברמת גן לתיקון גג רעפים. מישהו מכיר מקום אמין?",
                isLead: false,
                category: "old_post"
            },
            // Post 3: רלוונטי (ירוק)
            {
                name: "שרה לוי",
                avatar: "ש.ל",
                time: "8 דקות",
                content: "חיפשתי המון אבל לא מוצאת מישהו טוב לשיפוץ המטבח שלי... כל קבלני השיפוצים שפगשתי עד עכשיו לא הבינו מה אני רוצה ואיך לתכנן את המטבח 😕",
                isLead: true,
                category: "relevant"
            },
            // Post 4: רלוונטי (סגול)
            {
                name: "דוד כהן",
                avatar: "ד.כ",
                time: "12 דקות",
                content: "היי חברים, צריך את עזרתכם עם התייעצות קלה. לפני שבועיים הופיעו לי כתמי רטיבות בכל הבית, ולא נראה שיש נזילה. איך לדעתכם אפשר לפתור את זה?",
                isLead: true,
                category: "advice_seeking"
            },
            // Post 5: לא רלוונטי (חדש)
            {
                name: "רון אברמס",
                avatar: "ר.א",
                time: "14 דקות",
                content: "הילדים שלי התחילו לשחק כדורגל בליגה. אני כל כך גאה בהם! מישהו יכול להמליץ על נעליים טובות? ⚽",
                isLead: false,
                category: "bot_post"
            },
            // Post 6: לא רלוונטי
            {
                name: "עדי גולן",
                avatar: "ע.ג",
                time: "15 דקות",
                content: "פרסום: קורס יוגה חדש בסטודיו שלנו! הרשמה עד סוף החודש במחיר מיוחד 💪",
                isLead: false,
                category: "bot_post"
            },
            // Post 6: רלוונטי (ירוק)
            {
                name: "רונית גולן",
                avatar: "ר.ג",
                time: "18 דקות",
                content: "האמבטיה שלי שוב נוזלת... פעם שלישית החודש! אני חייבת קבלן איטום אמין באזור המרכז שיפתור את הבעיה סופית 🚿💸",
                isLead: true,
                category: "relevant"
            },
            // Post 8: רלוונטי (סגול)
            {
                name: "מיכל אברמוב",
                avatar: "מ.א",
                time: "22 דקות",
                content: "חברים, יש לי בעיה עם קיר שמתחיל להתקלף. איך אפשר לדעת אם זה בגלל לחות או סתם צבע ישן? אני לא רוצה להתחיל לצבוע ואז שזה יחזור...",
                isLead: true,
                category: "advice_seeking"
            },
            // Post 9: לא רלוונטי (חדש)
            {
                name: "מירב שקד",
                avatar: "מ.ש",
                time: "24 דקות",
                content: "התחלתי דיאטה חדשה השבוע. מישהו יודע איפה יש סלטים טובים באזור? אני מחפשת משהו בריא ולא יקר 🥗",
                isLead: false,
                category: "bot_post"
            },
            // Post 10: לא רלוונטי
            {
                name: "תמר לוי",
                avatar: "ת.ל",
                time: "25 דקות",
                content: "האיזור שלי הוא בצפון, אז אני לא חושבת שיש פה שירותים מקצועיים בתחום השיפוצים שאני צריכה...",
                isLead: false,
                category: "area_irrelevant"
            },
            // Post 9: רלוונטי (ירוק)
            {
                name: "אבי שמיר",
                avatar: "א.ש",
                time: "28 דקות",
                content: "הרצפות בבית נראות נוראי, זקוקות לחידוש דחוף. מישהו יכול להמליץ על חברת שיפוצים מהימנה?",
                isLead: true,
                category: "relevant"
            },
            // Post 10: רלוונטי (ירוק)
            {
                name: "רונית פרץ",
                avatar: "ר.פ",
                time: "28 דקות",
                content: "הבית של הבעל צריך שיפוץ השבוע, נזקקת לקבלן אמין במרכז שיטפל בזה במהירות ובמחיר הוגן. עדיפות לקבלנים מקצועיים!",
                isLead: true,
                category: "relevant"
            },
            {
                name: "שמעון רודה",
                avatar: "ש.ר",
                time: "32 דקות",
                content: "הקירות בסלון צריכים צביעה חדשה לפני החגים. מכירים צבע איכותי שלא יתקלף?",
                isLead: true,
                category: "relevant"
            },
            {
                name: "עדי גולן",
                avatar: "ע.ג",
                time: "35 דקות",
                content: "פרסום: קורס יוגה חדש בסטודיו שלנו! הרשמה עד סוף החודש במחיר מיוחד 💪",
                isLead: false,
                category: "bot_post"
            },
            {
                name: "גל משה",
                avatar: "ג.מ",
                time: "40 דקות",
                content: "מטבח הבית שלי נראה מיושן, חולמת על שיפוץ מקצועי שיהפוך אותו למטבח חלומותי. יש מישהו שמכיר מעצב פנים מוכשר?",
                isLead: true,
                category: "relevant"
            },
            {
                name: "תמר לוי",
                avatar: "ת.ל",
                time: "45 דקות",
                content: "האיזור שלי הוא בצפון, אז אני לא חושבת שיש פה שירותים מקצועיים בתחום השיפוצים שאני צריכה...",
                isLead: false,
                category: "area_irrelevant"
            }
        ];

        let currentDemo = null;
        let feedPosts = [];

        function createPost(example, index) {
            const timeAgo = Math.floor(Math.random() * 30) + 1;
            return `
                <div class="facebook-post" data-index="${index}" ${example.isLead ? 'data-potential-lead="true"' : ''}>
                    <div class="post-header">
                        <div class="avatar avatar-md post-avatar">${example.avatar}</div>
                        <div class="post-info">
                            <h3>${example.name}</h3>
                            <span>${timeAgo} דקות</span>
                        </div>
                    </div>
                    <div class="post-content">${example.content}</div>
                    <div class="post-actions">
                        <div class="post-action">
                            <i class="far fa-thumbs-up"></i>
                            לייק
                        </div>
                        <div class="post-action">
                            <i class="far fa-comment"></i>
                            תגובה
                        </div>
                        <div class="post-action">
                            <i class="far fa-share"></i>
                            שתף
                        </div>
                    </div>
                </div>
            `;
        }

        function populateFeed() {
            console.log('populateFeed called');
            const feed = document.getElementById('socialFeed');
            if (!feed) {
                console.error('socialFeed element not found!');
                return;
            }
            console.log('socialFeed element found');
            
            feedPosts = [];
            
            // Create exactly 6 posts for demo: 5 irrelevant + 1 relevant (6th post)
            const demoPosts = [
                demoExamples[1], // דוד כהן - field_irrelevant (אתרי אינטרנט)
                demoExamples[0], // נועה דהן - bot_post (סרט) - NEW IRRELEVANT POST
                demoExamples[3], // מיכל אברמוב - area_irrelevant (בגדים)
                demoExamples[5], // נטלי רוזן - free_help (פיאנו)
                demoExamples[8], // איתן לבי - old_post (מוסך ישן)
                demoExamples[4]  // אבי שמיר - relevant (שיפוצים) - THE RELEVANT ONE
            ];
            
            // Add 5 additional posts for manual scrolling (indices 9-13 from demoExamples)
            const additionalPosts = [
                demoExamples[9],  // רונית פרץ - relevant (מוסך)
                demoExamples[10], // שמעון רודה - relevant (צביעה)
                demoExamples[11], // עדי גולן - bot_post (יוגה)
                demoExamples[12], // גל משה - relevant (עיצוב מטבח)
                demoExamples[13]  // תמר לוי - area_irrelevant (צפון)
            ];
            
            // Combine demo posts with additional posts
            const allPosts = [...demoPosts, ...additionalPosts];
            
            allPosts.forEach((example, i) => {
                feedPosts.push({...example, index: i});
            });
            
            feed.innerHTML = feedPosts.map((post, index) => createPost(post, index)).join('');
            console.log('Feed populated with', feedPosts.length, 'posts');
            
            // Add hover effects for additional posts (indices 5-9)
            setTimeout(() => {
                addHoverAnalysisToAdditionalPosts();
                addClickAnalysisToAllPosts();
            }, 500);
        }

        function detectAndMarkPosts() {
            // Prevent multiple detection processes from running simultaneously
            if (isDetectionRunning) {
                console.log('⚠️ Detection already running - ignoring duplicate call');
                return;
            }
            
            console.log('detectAndMarkPosts called, starting from index:', currentPostIndex);
            isDetectionRunning = true;
            const allPosts = getAllPosts();
            console.log('Found', allPosts.length, 'posts');
            totalPosts = allPosts.length;
            
            function processPost(index) {
                if (index >= totalPosts) {
                    // All posts processed, restart the demo
                    console.log('All posts completed - restarting demo cycle');
                    isDetectionRunning = false; // Reset flag before restarting
                    trackedSetTimeout(() => {
                        console.log('🔄 Restarting demo from beginning');
                        currentPostIndex = 0;
                        totalPosts = 0;
                        processedPosts.clear();
                        messengerConversationActive = false;
                        
                        // Clear and repopulate feed
                        populateFeed();
                        
                        // Start detection from beginning
                        trackedSetTimeout(() => {
                            detectAndMarkPosts();
                        }, 1000);
                    }, 3000);
                    return;
                }
                
                const post = allPosts[index];
                if (!post || post.classList.contains('post-analyzed')) {
                    // Skip to next post
                    currentPostIndex = index + 1;
                    trackedSetTimeout(() => processPost(index + 1), 1000);
                    return;
                }
                
                const postIndex = parseInt(post.dataset.index);
                const postData = feedPosts[postIndex];
                if (!postData) {
                    // Skip to next post
                    currentPostIndex = index + 1;
                    trackedSetTimeout(() => processPost(index + 1), 1000);
                    return;
                }
                
                const { icon, reason, isRelevant, highlightField } = getPostAnalysis(postData);
                
                // First, highlight the current post being analyzed
                highlightCurrentPost(post, true);
                
                // Show explanation banner on the post after a brief moment
                trackedSetTimeout(async () => {
                    // Update to analysis stage when starting to analyze a post
                    await updateEnhancedDemoStage('analysis');
                    showPostExplanationBanner(post, reason, isRelevant, postData.name, icon, highlightField);
                    
                    // Mark post as analyzed and handle post logic directly
                    trackedSetTimeout(() => {
                        post.classList.add('post-analyzed');
                        
                        if (isRelevant === true || isRelevant === 'advice') {
                            post.classList.add('hot-post');
                            
                            // Add appropriate icon for relevant and advice_seeking posts
                            const fireIcon = document.createElement('div');
                            fireIcon.className = 'fire-icon';
                            fireIcon.innerHTML = isRelevant === 'advice' ? '💜' : '🔥';
                            fireIcon.style.cssText = `
                                position: absolute;
                                top: -15px;
                                right: -15px;
                                width: 32px;
                                height: 32px;
                                border-radius: 50%;
                                background: #fff;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                font-size: 18px;
                                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                                z-index: 1500;
                                animation: bounce 1s infinite;
                                border: 2px solid #f3f4f6;
                            `;
                            post.style.position = 'relative';
                            post.appendChild(fireIcon);
                            
                            
                            // Run full demo sequence for relevant post
                            trackedSetTimeout(async () => {
                                console.log('Starting autoHandleComment for post:', postIndex, 'current index will be:', index + 1);
                                await autoHandleComment(postIndex, async () => {
                                    console.log('autoHandleComment completed, setting currentPostIndex to:', index + 1);
                                    // DO NOT reset messenger state here - it's already handled in finishMessengerConversation
                                    console.log('🔄 NOT resetting messengerConversationActive - already handled');
                                    // Set next post index AFTER demo completes
                                    currentPostIndex = index + 1;
                                    // After demo completes, continue with next post
                                    trackedSetTimeout(async () => {
                                        // Reset detection flag before continuing
                                        isDetectionRunning = false;
                                        await continueToNextPost();
                                    }, 2000);
                                });
                            }, 2000);
                        } else {
                            // Add sad emoji for irrelevant posts
                            const sadIcon = document.createElement('div');
                            sadIcon.className = 'sad-icon';
                            sadIcon.innerHTML = '😞';
                            sadIcon.style.cssText = `
                                position: absolute;
                                top: -15px;
                                right: -15px;
                                width: 32px;
                                height: 32px;
                                border-radius: 50%;
                                background: #fff;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                font-size: 18px;
                                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                                z-index: 1500;
                                animation: bounce 1s infinite;
                                border: 2px solid #f3f4f6;
                            `;
                            post.style.position = 'relative';
                            post.appendChild(sadIcon);
                            
                            // For irrelevant posts, just continue to next
                            currentPostIndex = index + 1;
                            trackedSetTimeout(() => {
                                // Reset detection flag before moving to next post
                                isDetectionRunning = false;
                                processPost(index + 1);
                            }, 1500);
                        }
                        
                        // Remove highlight after analysis is complete (only for irrelevant posts)
                        if (!isRelevant || isRelevant === false) {
                            setTimeout(() => {
                                highlightCurrentPost(post, false);
                            }, DELAYS.SHORT);
                        }
                        
                    }, DELAYS.SHORT);
                    
                }, 600); // Show post first, then explanation
            }
            
            // Start processing from the current post index
            processPost(currentPostIndex);
        }
        
        async function continueToNextPost() {
            console.log('Continuing to next post, index:', currentPostIndex);
            
            // Reset demo stage for next post (messenger stage completed)
            if (currentDemoStage === 'messenger') {
                console.log('✅ Continuing from messenger stage to next post');
                currentDemoStage = 'detection'; // Reset for next post
            }
            
            if (currentPostIndex < totalPosts) {
                // Continue with detection of remaining posts without updating status
                trackedSetTimeout(() => {
                    detectAndMarkPosts();
                }, 1000);
            } else {
                // All posts done, restart the demo
                console.log('No more posts to process - restarting demo cycle');
                isDetectionRunning = false; // Reset flag before restarting
                trackedSetTimeout(() => {
                    console.log('🔄 Restarting demo from beginning (path 2)');
                    currentPostIndex = 0;
                    totalPosts = 0;
                    processedPosts.clear();
                    messengerConversationActive = false;
                    
                    // Clear and repopulate feed
                    populateFeed();
                    
                    // Start detection from beginning
                    trackedSetTimeout(() => {
                        detectAndMarkPosts();
                    }, 1000);
                }, 3000);
            }
        }
        
        // DELETED: restartEntireDemo() function was causing Messenger conflicts
        // The demo now finishes naturally without forced restarts
        
        function highlightCurrentPost(post, highlight) {
            if (highlight) {
                post.classList.add('post-highlighted');
                
                // Scroll within the feed container only, not the main page
                const feedContainer = document.getElementById('socialFeed');
                if (feedContainer) {
                    const postRect = post.getBoundingClientRect();
                    const containerRect = feedContainer.getBoundingClientRect();
                    const scrollOffset = postRect.top - containerRect.top - (containerRect.height / 2) + (postRect.height / 2);
                    
                    // Use smooth scrolling within the feed container
                    feedContainer.scrollTo({
                        top: feedContainer.scrollTop + scrollOffset,
                        behavior: 'smooth'
                    });
                }
            } else {
                post.classList.remove('post-highlighted');
            }
        }

        function showPostExplanationBanner(post, reason, isRelevant, customerName, icon, highlightField = null) {
            // Remove any existing banner first
            removePostExplanationBanner(post);
            
            const banner = document.createElement('div');
            banner.className = 'post-explanation-banner';
            
            // Calculate post dimensions to ensure banner fits within
            const postRect = post.getBoundingClientRect();
            
            banner.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: ${
                    isRelevant === true 
                        ? 'rgba(236, 253, 245, 0.95)'
                        : isRelevant === 'advice'
                        ? 'rgba(245, 243, 255, 0.95)'
                        : 'rgba(254, 242, 242, 0.95)'
                };
                border: 1px solid ${
                    isRelevant === true 
                        ? '#10b981' 
                        : isRelevant === 'advice'
                        ? '#8b5cf6'
                        : '#ef4444'
                };
                border-radius: 8px;
                padding: 12px 14px;
                max-width: ${Math.min(280, postRect.width - 40)}px;
                width: calc(100% - 40px);
                z-index: 25;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
                animation: modernBannerSlideIn 0.4s ease-out;
                direction: rtl;
                text-align: right;
                font-family: inherit;
                backdrop-filter: blur(4px);
            `;
            
            // Compact content design
            banner.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                    <div style="
                        display: flex; 
                        align-items: center; 
                        gap: 6px;
                        font-size: 14px;
                        font-weight: 600;
                        color: ${
                            isRelevant === true ? '#059669' 
                            : isRelevant === 'advice' ? '#8b5cf6'
                            : '#dc2626'
                        };
                    ">
                        <span>${
                            isRelevant === true ? '🎯'
                            : isRelevant === 'advice' ? '💜'
                            : '❌'
                        }</span>
                        <span>${
                            isRelevant === true ? 'רלוונטי'
                            : isRelevant === 'advice' ? 'פוסט ייעוצי'
                            : 'לא מתאים'
                        }</span>
                    </div>
                    <button onclick="event.stopPropagation(); event.preventDefault(); const banner = this.closest('.post-explanation-banner'); if(banner) banner.remove();" style="
                        background: none;
                        border: none;
                        cursor: pointer;
                        font-size: 14px;
                        color: #6b7280;
                        padding: 2px;
                        line-height: 1;
                    ">×</button>
                </div>
                
                <div style="font-size: 12px; line-height: 1.3; color: #374151;">
                    ${reason}
                </div>
            `;
            
            post.style.position = 'relative';
            post.appendChild(banner);
        }

        function removePostExplanationBanner(post) {
            const existingBanner = post.querySelector('.post-explanation-banner');
            if (existingBanner) {
                existingBanner.style.animation = 'bannerSlideOut 0.3s ease-out';
                setTimeout(() => {
                    if (existingBanner.parentNode) {
                        existingBanner.remove();
                    }
                }, 300);
            }
        }

        function addClickAnalysisToAllPosts() {
            console.log('Adding click events to all posts');
            const allPosts = getAllPosts();
            console.log('Found', allPosts.length, 'posts for click events');
            
            // Add click events to all posts
            for (let i = 0; i < allPosts.length; i++) {
                const post = allPosts[i];
                if (!post) continue;
                
                const postIndex = parseInt(post.dataset.index);
                const postData = feedPosts[postIndex];
                if (!postData) continue;
                
                console.log('Adding click event to post', postIndex);
                
                // Add click event to show analysis banner
                post.addEventListener('click', (e) => {
                    console.log('Post clicked:', postIndex, e.target);
                    
                    // Prevent triggering on action buttons
                    if (e.target.closest('.post-action')) {
                        console.log('Click was on post action, ignoring');
                        return;
                    }
                    
                    console.log('Showing analysis banner for post', postIndex);
                    // Show analysis banner on click
                    const { icon, reason, isRelevant, highlightField } = getPostAnalysis(postData);
                    showPostExplanationBanner(post, reason, isRelevant, postData.name, icon, highlightField);
                });
            }
        }
        
        function addHoverAnalysisToAdditionalPosts() {
            const allPosts = getAllPosts();
            
            // Add hover effects to additional posts (indices 5-9)
            for (let i = 5; i < allPosts.length && i < 10; i++) {
                const post = allPosts[i];
                if (!post) continue;
                
                const postIndex = parseInt(post.dataset.index);
                const postData = feedPosts[postIndex];
                if (!postData) continue;
                
                let hoverTimeout;
                
                post.addEventListener('mouseenter', () => {
                    // Clear any existing timeout
                    if (hoverTimeout) clearTimeout(hoverTimeout);
                    
                    // Show analysis after short delay
                    hoverTimeout = setTimeout(() => {
                        if (!post.querySelector('.post-explanation-banner')) {
                            const { icon, reason, isRelevant, highlightField } = getPostAnalysis(postData);
                            showPostExplanationBanner(post, reason, isRelevant, postData.name, icon, highlightField);
                            
                        }
                    }, 800);
                });
                
                post.addEventListener('mouseleave', () => {
                    // Clear timeout if mouse leaves before analysis shows
                    if (hoverTimeout) clearTimeout(hoverTimeout);
                    
                    // Remove banner after short delay
                    setTimeout(() => {
                        removePostExplanationBanner(post);
                    }, DELAYS.SHORT);
                });
                
                // Add click event to show analysis banner
                post.addEventListener('click', (e) => {
                    // Prevent triggering on action buttons
                    if (e.target.closest('.post-action')) return;
                    
                    // Show analysis banner on click
                    const { icon, reason, isRelevant, highlightField } = getPostAnalysis(postData);
                    showPostExplanationBanner(post, reason, isRelevant, postData.name, icon, highlightField);
                });
            }
        }

        function getPostClassification(postIndex) {
            const postData = feedPosts[postIndex];
            if (!postData) return [];
            
            // Define our business criteria (this would come from user settings)
            const businessCriteria = {
                field: 'שיפוצים ובנייה', // Our business field
                area: 'תל אביב והמרכז'      // Our service area
            };
            
            let classification = [];
            
            // Always show field analysis
            let fieldMatch = false;
            let detectedField = '';
            
            if (postData.content.includes('עיצוב המטבח') || postData.content.includes('שיפוצים')) {
                detectedField = 'שיפוצים ובנייה';
                fieldMatch = true;
            } else if (postData.content.includes('אתרי אינטרנט')) {
                detectedField = 'בניית אתרים';
                fieldMatch = false;
            } else if (postData.content.includes('מוסך') || postData.content.includes('מכונית')) {
                detectedField = 'שירותי רכב';
                fieldMatch = false;
            } else if (postData.content.includes('בגדים')) {
                detectedField = 'אופנה ובגדים';
                fieldMatch = false;
            } else if (postData.content.includes('קייטרינג')) {
                detectedField = 'שיפוצים ובנייה';
                fieldMatch = true;
            } else if (postData.content.includes('פיאנו') || postData.content.includes('קניון')) {
                detectedField = 'לא רלוונטי';
                fieldMatch = false;
            } else {
                detectedField = 'לא מזוהה';
                fieldMatch = false;
            }
            
            classification.push({
                label: 'תחום פעילות',
                value: detectedField,
                match: fieldMatch
            });
            
            // Always show area analysis (simplified for demo)
            let areaMatch = true; // Most posts are in relevant area
            let detectedArea = 'תל אביב והמרכז';
            
            if (postData.category === 'area_irrelevant') {
                detectedArea = 'מחוץ לאזור';
                areaMatch = false;
            }
            
            classification.push({
                label: 'איזור פעילות',
                value: detectedArea,
                match: areaMatch
            });
            
            // Add additional criteria based on category
            switch (postData.category) {
                case 'bot_post':
                    classification.push({
                        label: 'סוג פרופיל',
                        value: 'פרופיל מזויף',
                        match: false
                    });
                    break;
                case 'old_post':
                    classification.push({
                        label: 'זמן פרסום',
                        value: 'יותר מ-24 שעות',
                        match: false
                    });
                    break;
                case 'free_help':
                    classification.push({
                        label: 'כוונת הפוסט',
                        value: 'חיפוש עזרה חינם',
                        match: false
                    });
                    break;
                case 'relevant':
                    classification.push({
                        label: 'כוונת הפוסט',
                        value: 'חיפוש שירות בתשלום',
                        match: true
                    });
                    break;
            }
            
            return classification;
        }
        
        function getPostAnalysis(postData) {
            // Create specific analysis based on post content
            const getSpecificReason = (postData) => {
                const content = postData.content.toLowerCase();
                
                if (content.includes('מטבח')) {
                    return 'שיפוץ מטבח במרכז';
                } else if (content.includes('אמבטיה') || content.includes('נוזלת')) {
                    return 'איטום אמבטיה במרכז';
                } else if (content.includes('רצפות')) {
                    return 'חידוש רצפות';
                } else if (content.includes('צביעה') || content.includes('קירות')) {
                    return 'עבודות צביעה';
                } else if (content.includes('קבלן') && content.includes('שיפוץ')) {
                    return 'מחפש קבלן שיפוצים';
                } else {
                    return 'שירותי שיפוצים במרכז';
                }
            };
            
            switch (postData.category) {
                case 'relevant':
                    return {
                        icon: '🎯',
                        reason: `<strong>${getSpecificReason(postData)}</strong><br>✓ תחום מתאים ✓ מרכז/שרון`,
                        isRelevant: true,
                        highlightField: null
                    };
                case 'advice_seeking':
                    return {
                        icon: '💜',
                        reason: `<strong>פוסט ייעוצי - הזדמנות לבניית מוניטין</strong><br>✓ תחום מתאים ✓ מרכז/שרון`,
                        isRelevant: 'advice',
                        highlightField: null
                    };
                case 'bot_post':
                    return {
                        icon: '🤖',
                        reason: `פוסט פרסומי - לא לקוח אמיתי`,
                        isRelevant: false,
                        highlightField: 'authenticity'
                    };
                case 'field_irrelevant':
                    return {
                        icon: '🚫',
                        reason: `תחום פעילות לא מתאים - לא שיפוצים`,
                        isRelevant: false,
                        highlightField: 'field'
                    };
                case 'area_irrelevant':
                    return {
                        icon: '📍',
                        reason: `מיקום רחוק - מחוץ לאזור השירות`,
                        isRelevant: false,
                        highlightField: 'location'
                    };
                case 'old_post':
                    return {
                        icon: '⏰',
                        reason: `פוסט ישן מדי - יותר מ-24 שעות`,
                        isRelevant: false,
                        highlightField: 'timing'
                    };
                case 'free_help':
                    return {
                        icon: '💭',
                        reason: `שיתוף אישי - לא מחפש שירות`,
                        isRelevant: false,
                        highlightField: 'intent'
                    };
                default:
                    return {
                        icon: '🚫',
                        reason: 'פוסט לא מזוהה',
                        isRelevant: false,
                        highlightField: null
                    };
            }
        }
        
        let currentDemoStage = null;
        
        // Focus Management System
        function setDemoFocus(side, pulseColor = null) {
            const leftSide = document.getElementById('demoLeftSide');
            const rightSide = document.getElementById('demoRightSide');
            
            if (!leftSide || !rightSide) return;
            
            // Clear previous states
            leftSide.classList.remove('focused', 'dimmed', 'pulse-blue', 'pulse-green');
            rightSide.classList.remove('focused', 'dimmed', 'pulse-blue', 'pulse-green');
            
            if (side === 'left') {
                leftSide.classList.add('focused');
                rightSide.classList.add('dimmed');
                if (pulseColor) leftSide.classList.add(`pulse-${pulseColor}`);
            } else if (side === 'right') {
                rightSide.classList.add('focused');
                leftSide.classList.add('dimmed');
                if (pulseColor) rightSide.classList.add(`pulse-${pulseColor}`);
            } else {
                // Both sides neutral
                leftSide.classList.remove('focused', 'dimmed');
                rightSide.classList.remove('focused', 'dimmed');
            }
        }
        
        function updateProgressStep(currentStep) {
            const steps = ['detection', 'analysis', 'response', 'messenger'];
            const currentIndex = steps.indexOf(currentStep);
            
            steps.forEach((step, index) => {
                const stepElement = document.getElementById(`step-${step}`);
                if (!stepElement) return;
                
                stepElement.classList.remove('active', 'completed');
                
                if (step === currentStep) {
                    stepElement.classList.add('active');
                } else if (index < currentIndex) {
                    // Add completed class with sequential delay (500ms between each)
                    setTimeout(() => {
                        stepElement.classList.add('completed');
                    }, index * 500);
                }
            });
        }
        
        function pulseSpecificPost(postIndex) {
            const post = getPostByIndex(postIndex);
            if (post) {
                post.classList.remove('pulse-green');
                // Force reflow to restart animation
                post.offsetHeight;
                post.classList.add('pulse-green');
            }
        }

        // Enhanced stage descriptions for each demo phase
        const stageDescriptions = {
            'profile': {
                title: 'לומד את פרופיל הלקוח - מזהה תחום פעילות, איזור ועדיפויות למציאת לקוחות רלוונטיים'
            },
            'detection': {
                title: 'מאתר ומסנן פוסטים רלוונטיים עבור הלקוח'
            },
            'analysis': {
                title: 'מנתח פוסטים...'
            },
            'response': {
                title: 'כותב תגובה מקצועית - יוצר תגובה אישית ומותאמת שמציגה שירותים ומניעה לשיחה'
            },
            'messenger': {
                title: 'עובר למסנגר - שולח הודעת המשך במטרה לקבוע שיחה טלפונית עם הלקוח'
            },
            'complete': {
                title: ''
            }
        };


        // BLOCKING typewriter animation - Hebrew RTL from fixed position
        function animateText(element, text) {
            return new Promise((resolve) => {
                element.textContent = '';
                let currentChar = 0;
                
                // Set fixed width container for consistent positioning
                element.style.direction = 'rtl';
                element.style.textAlign = 'right';
                element.style.unicodeBidi = 'isolate';
                element.style.width = '100%';
                element.style.minHeight = '1.2em';
                element.style.position = 'relative';
                element.style.color = '#000000'; // Ensure black text during animation
                element.style.fontFamily = 'inherit';
                element.style.whiteSpace = 'normal';
                
                function typeNextChar() {
                    if (currentChar < text.length) {
                        element.textContent += text.charAt(currentChar);
                        currentChar++;
                        trackedSetTimeout(typeNextChar, 50); // 50ms delay between characters
                    } else {
                        // Animation complete - resolve promise
                        resolve();
                    }
                }
                
                // Start typing immediately
                typeNextChar();
            });
        }

        function animateTextAppend(element, text) {
            return new Promise((resolve) => {
                const existingContent = element.textContent;
                let currentChar = 0;
                
                // Maintain the same styling
                element.style.direction = 'rtl';
                element.style.textAlign = 'right';
                element.style.unicodeBidi = 'isolate';
                element.style.fontFamily = 'inherit';
                element.style.whiteSpace = 'normal';
                element.style.width = '100%';
                element.style.color = '#000000';
                
                function typeNextChar() {
                    if (currentChar < text.length) {
                        element.textContent = existingContent + text.substring(0, currentChar + 1);
                        currentChar++;
                        trackedSetTimeout(typeNextChar, 50); // 50ms delay between characters
                    } else {
                        // Animation complete - resolve promise
                        resolve();
                    }
                }
                
                // Start typing immediately
                typeNextChar();
            });
        }

        async function updateEnhancedDemoStage(stage) {
            const statusElement = document.getElementById('statusIndicatorText');
            
            if (!statusElement) return;
            
            // Prevent multiple calls to same stage
            if (currentDemoStage === stage) {
                console.log('⚠️ Ignoring duplicate call to updateEnhancedDemoStage for stage:', stage);
                return;
            }
            
            console.log('🎯 updateEnhancedDemoStage called for stage:', stage, 'previous stage:', currentDemoStage);
            currentDemoStage = stage;
            
            // Update progress step in navigation immediately
            updateProgressStep(stage);
            
            // Get stage info - just use the title
            const stageInfo = stageDescriptions[stage] || { title: 'הסוכן בפעילות...' };
            
            // Ensure text is black before fading
            statusElement.style.color = '#000000';
            
            // Quick clear and start typing immediately - no fade transitions
            statusElement.style.opacity = '1';
            statusElement.style.transition = 'none';
            
            // Start typing animation and WAIT for it to complete
            console.log('🔤 Starting text animation for:', stageInfo.title.substring(0, 30) + '...');
            await animateText(statusElement, stageInfo.title);
            console.log('✅ Text animation completed for stage:', stage);
            
            // Ensure text remains black after animation
            statusElement.style.color = '#000000';
            statusElement.style.opacity = '1';
            
            // Demo can only continue AFTER this function completes
        }

        
        function updateDemoStageText(stage, text) {
            const explanationElement = document.querySelector('.status-indicator p');
            const featuresElement = document.querySelector('.demo-features');
            
            if (!explanationElement) return;
            
            currentDemoStage = stage;
            
            // Progress step is already updated by updateEnhancedDemoStage - don't duplicate
            // updateProgressStep(stage);
            
            // Focus on right side when text updates
            setDemoFocus('right', 'blue');
            
            // Animate text change
            explanationElement.style.opacity = '0.5';
            explanationElement.style.transform = 'translateY(-10px)';
            
            trackedSetTimeout(() => {
                explanationElement.textContent = text;
                explanationElement.style.opacity = '1';
                explanationElement.style.transform = 'translateY(0)';
                explanationElement.style.transition = 'all 0.3s ease';
                explanationElement.style.color = '#1e40af';
                explanationElement.style.fontWeight = '600';
                
                // Update features list based on stage
                if (featuresElement) {
                    updateFeaturesList(stage);
                }
                
                // After text is updated, shift focus back to left side after a delay
                trackedSetTimeout(() => {
                    if (stage === 'analysis') {
                        setDemoFocus('left');
                    } else if (stage === 'response' || stage === 'messenger') {
                        setDemoFocus('left', 'green');
                    }
                }, DELAYS.MEDIUM);
            }, 300);
        }
        
        function updateFeaturesList(stage) {
            const featuresElement = document.querySelector('.demo-features');
            if (!featuresElement) return;
            
            // Add updating animation
            featuresElement.classList.add('updating');
            featuresElement.classList.remove('updated', 'highlight');
            
            let featuresHTML = '';
            
            switch (stage) {
                case 'analysis':
                    featuresHTML = `
                        <li style="--delay: 0"><i class="fas fa-check"></i> סריקת מיליוני פוסטים בזמן אמת</li>
                        <li style="--delay: 1"><i class="fas fa-check"></i> זיהוי לקוחות פוטנציאליים ברמת דיוק של 96%</li>
                        <li style="--delay: 2"><i class="fas fa-check"></i> סינון אוטומטי של פוסטים לא רלוונטיים</li>
                        <li style="--delay: 3"><i class="fas fa-check"></i> מיקוד גיאוגרפי ותחומי מדויק</li>
                    `;
                    break;
                case 'response':
                    featuresHTML = `
                        <li style="--delay: 0"><i class="fas fa-check"></i> יצירת תגובות מותאמות אישית</li>
                        <li style="--delay: 1"><i class="fas fa-check"></i> ניתוח הקשר וכוונה של הפוסט</li>
                        <li style="--delay: 2"><i class="fas fa-check"></i> סגנון תגובה מקצועי ורלוונטי</li>
                        <li style="--delay: 3"><i class="fas fa-check"></i> המלצות ספציפיות למוצר/שירות</li>
                    `;
                    break;
                case 'messenger':
                    featuresHTML = `
                        <li style="--delay: 0"><i class="fas fa-check"></i> מעבר חלק לשיחה פרטית</li>
                        <li style="--delay: 1"><i class="fas fa-check"></i> שיחת ייעוץ מקצועית</li>
                        <li style="--delay: 2"><i class="fas fa-check"></i> איסוף פרטים לקביעת פגישה</li>
                        <li style="--delay: 3"><i class="fas fa-check"></i> העברה אוטומטית למערכת CRM</li>
                    `;
                    break;
                case 'complete':
                    featuresHTML = `
                        <li style="--delay: 0"><i class="fas fa-check"></i> הסוכן פועל 24/7 ללא הפסקה</li>
                        <li style="--delay: 1"><i class="fas fa-check"></i> מעקב וניתוח מתקדמים</li>
                        <li style="--delay: 2"><i class="fas fa-check"></i> דוחות ביצוע בזמן אמת</li>
                        <li style="--delay: 3"><i class="fas fa-check"></i> ROI מוכח ומדיד</li>
                    `;
                    break;
            }
            
            // Update content after fade out animation
            trackedSetTimeout(() => {
                featuresElement.innerHTML = featuresHTML;
                featuresElement.classList.remove('updating');
                featuresElement.classList.add('updated');
                
                // Add highlight animation after content is updated
                trackedSetTimeout(() => {
                    featuresElement.classList.add('highlight');
                    
                    // Add individual checkmark animations
                    const listItems = featuresElement.querySelectorAll('li');
                    listItems.forEach((item, index) => {
                        trackedSetTimeout(() => {
                            item.classList.add('animate-check');
                            trackedSetTimeout(() => {
                                item.classList.remove('animate-check');
                            }, 1000);
                        }, index * 300);
                    });
                    
                    // Remove highlight class after animation
                    trackedSetTimeout(() => {
                        featuresElement.classList.remove('highlight');
                    }, 3500);
                }, 600);
            }, 600);
        }

        async function autoHandleComment(postIndex, onComplete = null) {
            const post = getPostByIndex(postIndex);
            if (!post || !post.classList.contains('hot-post')) {
                if (onComplete) onComplete();
                return;
            }
            
            // Store the callback - it will be called by finishMessengerConversation
            demoCompleteCallback = onComplete;
            
            // Scroll post into view for better visibility
            scrollPostToView(postIndex);
            
            // Remove analysis banner when agent starts responding
            removePostExplanationBanner(post);
            
            // Check if comment box already exists for this post
            const existingCommentBox = post.querySelector(`[data-comment-box="${postIndex}"]`);
            if (existingCommentBox) {
                console.log('Comment box already exists for post', postIndex, '- skipping creation');
                // Still need to continue with messenger if typing is complete
                trackedSetTimeout(async () => {
                    if (feedPosts[postIndex] && feedPosts[postIndex].name && !messengerConversationActive) {
                        messengerConversationActive = true;
                        await showMessengerTransition(feedPosts[postIndex].name, feedPosts[postIndex].category);
                    }
                }, 1000);
                return;
            }
            
            // Update progress to response stage
            await updateEnhancedDemoStage('response');
            
            // Create comment box PROPERLY without breaking post-actions layout
            const commentBox = document.createElement('div');
            // Add unique identifier to prevent duplicate creation
            commentBox.setAttribute('data-comment-box', postIndex);
            commentBox.style.cssText = `
                margin-top: 0;
                padding: 6px 16px 12px 16px;
                border-top: none;
                box-sizing: border-box;
                width: 100%;
            `;
            
            const customerName = feedPosts[postIndex].name;
            const postData = feedPosts[postIndex];
            
            // Generate more personalized and varied responses based on post content
            const getPersonalizedResponse = (postData, customerName) => {
                const content = postData.content.toLowerCase();
                const responses = [];
                
                // Handle advice-seeking posts (לקוחות שקטים)  
                if (postData.category === 'advice_seeking') {
                    if (content.includes('רטיבות') || content.includes('כתמי')) {
                        responses.push(`אהלן ${customerName.split(' ')[0]}, כתמי לחות ליד חלונות זה לרוב סיליקון ישן או חור ניקוז סתום. בודק קודם הסיליקון והניקוז בצד הדרומי`);
                    } else if (content.includes('צבע') || content.includes('צביעה')) {
                        responses.push(`תראי ${customerName.split(' ')[0]}, האור משפיע על צבע. חדרים עם חלונות צפון צריכים צבעים חמים, דרומיים - קרירים. נסי דוגמא קטנה קודם`);
                    } else {
                        responses.push(`${customerName.split(' ')[0]}, תלוי בהרבה גורמים - איכות חומרים, הכנת משטח נכונה ותנאי אקלים. חשוב לתת זמן לייבוש בין שכבות`);
                    }
                } 
                // Handle direct sales posts (לקוחות פעילים)
                else {
                    if (content.includes('מטבח') || content.includes('כיור') || content.includes('ארון')) {
                        responses.push(`אהלן ${customerName.split(' ')[0]}, במטבח חשוב לתכנן נקודות מים וחשמל לפני התחלה. גם לוודא ביטוח הקבלן. אני עובד במטבחים 8 שנים 👍`);
                        responses.push(`היי ${customerName.split(' ')[0]}, הסדר הנכון: קודם חשמלאי ואינסטלטור, רק אחר כך ארונות. זה מונע הפתעות ועלויות נוספות. יש לי מחירים נוחים`);
                    } else if (content.includes('אמבטיה') || content.includes('שירותים') || content.includes('ברז') || content.includes('מקלחת')) {
                        responses.push(`שלום ${customerName.split(' ')[0]}, באמבטיה חשוב איטום מושלם ותכנון שיפועי ניקוז נכון לפני התחלה. אני מתמחה באמבטיות ונותן אחריות`);
                        responses.push(`היי ${customerName.split(' ')[0]}, לפני קרמיקה חובה לוודא אינסטלציה ואיטום תקינים. בלי זה יהיו רטיבות ונזילות. יש לי ציוד מקצועי`);
                    } else {
                        responses.push(`שלום ${customerName.split(' ')[0]}! חשוב לוודא שהקבלן מבין צרכים ויודע לתת ייעוץ נכון. הרבה פעמים יש פתרונות פשוטים שחוסכים כסף`);
                        responses.push(`היי ${customerName.split(' ')[0]}! בכל פרויקט יש פרטים קטנים שעושים הבדל - תכנון נכון, חומרים איכותיים וסדר עבודה. יש לי צוות מקצועי`);
                    }
                }
                
                return responses[Math.floor(Math.random() * responses.length)];
            };
            
            let response = getPersonalizedResponse(postData, customerName);
            
            commentBox.innerHTML = `
                <div style="display: flex; align-items: flex-start; gap: 8px; margin-bottom: 8px;">
                    <div class="avatar avatar-sm comment-avatar" style="background: var(--ai-purple); color: white; display: flex; align-items: center; justify-content: center; width: 32px !important; height: 32px !important; min-width: 32px !important; min-height: 32px !important; border-radius: 50%; font-size: 12px; font-weight: bold; flex-shrink: 0;">
                        י.ש
                    </div>
                    <div class="comment-bubble" style="flex: 1; background: #f0f2f5 !important; border-radius: 16px; padding: 12px 16px; position: relative; border: 1px solid #e4e6ea !important; min-height: 44px; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04) !important; box-sizing: border-box !important; max-width: 100%; overflow-wrap: break-word;">
                        <div id="aiResponse${postIndex}" style="font-size: 14px; color: #1c1e21; line-height: 1.33; word-wrap: break-word; font-family: inherit; background: transparent !important;"></div>
                    </div>
                </div>
            `;
            
            // Insert AFTER post-actions properly without changing existing styling
            const postActions = post.querySelector('.post-actions');
            if (postActions) {
                postActions.insertAdjacentElement('afterend', commentBox);
            } else {
                post.appendChild(commentBox);
            }
            
            // Type the response immediately
            typeResponse(`aiResponse${postIndex}`, response, () => {
                // After typing completes, add small pause before messenger
                trackedSetTimeout(async () => {
                    if (feedPosts[postIndex] && feedPosts[postIndex].name && !messengerConversationActive) {
                        messengerConversationActive = true;
                        await showMessengerTransition(feedPosts[postIndex].name, feedPosts[postIndex].category);
                    }
                }, 1200); // Pause to let user read the response
            });
        }

        function typeText(elementId, text, callback, speed = 30) {
            const element = document.getElementById(elementId);
            if (!element || !text) {
                callback && callback();
                return;
            }
            
            let i = 0;
            element.textContent = '';
            
            function typeChar() {
                // If demo is paused, store state and wait for resume instead of calling callback
                if (demoPaused) {
                    console.log('⏸️ typeText paused - storing state for resume');
                    const typingId = `typing_${Date.now()}`;
                    pausedTypingStates.set(typingId, {
                        element: element,
                        text: text,
                        currentIndex: i,
                        speed: speed,
                        callback: callback,
                        isLegacyType: true
                    });
                    return; // Don't call callback yet - wait for resume
                }
                
                if (i < text.length && element) {
                    element.textContent += text.charAt(i);
                    i++;
                    trackedSetTimeout(typeChar, speed);
                } else {
                    callback && callback();
                }
            }
            
            typeChar();
        }
        

        // Legacy function for backward compatibility
        function typeResponse(elementId, text, callback) {
            typeText(elementId, text, callback, DELAYS.TYPING);
        }

        // Utility functions for common DOM operations
        function getPostByIndex(postIndex) {
            return document.querySelector(`[data-index="${postIndex}"]`);
        }

        function scrollPostToView(postIndex) {
            const post = getPostByIndex(postIndex);
            const feed = document.getElementById('socialFeed');
            
            if (!post || !feed) {
                console.log('Post or feed not found for scrolling');
                return;
            }
            
            // Calculate post position relative to the feed container
            const postOffsetTop = post.offsetTop;
            
            // Account for the original feed padding (16px) to maintain the natural spacing
            const feedPadding = 16;
            const scrollPosition = Math.max(0, postOffsetTop - feedPadding);
            
            // Scroll the feed container to show the post with natural spacing
            feed.scrollTo({ top: scrollPosition, behavior: 'smooth' });
        }

        function getAllPosts() {
            return document.querySelectorAll('.facebook-post');
        }

        function removeFixedElements(selector) {
            const elements = document.querySelectorAll(selector);
            elements.forEach(el => el.remove());
        }

        function createTypingIndicator(senderText = 'הסוכן כותב') {
            return `
                <div class="typing-indicator" style="
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    padding: 12px 16px;
                    background: rgba(0, 0, 0, 0.05);
                    border-radius: 12px;
                    margin: 8px 0;
                    font-size: 14px;
                    color: #6b7280;
                ">
                    <span>${senderText}</span>
                    <div style="display: flex; gap: 2px;">
                        <div style="width: 4px; height: 4px; background: #6b7280; border-radius: 50%; animation: bounce 1.4s infinite;"></div>
                        <div style="width: 4px; height: 4px; background: #6b7280; border-radius: 50%; animation: bounce 1.4s infinite 0.2s;"></div>
                        <div style="width: 4px; height: 4px; background: #6b7280; border-radius: 50%; animation: bounce 1.4s infinite 0.4s;"></div>
                    </div>
                </div>
            `;
        }

        function createMessengerTypingIndicator(isAgent = true, customerName = '') {
            const senderName = isAgent ? 'הסוכן' : customerName.split(' ')[0];
            const bgColor = isAgent ? '#0084ff' : '#e4e6ea';
            const textColor = isAgent ? 'white' : '#050505';
            const avatarBg = isAgent ? 'var(--ai-purple)' : '#e4e6ea';
            const avatarColor = isAgent ? 'white' : '#65676b';
            const avatarText = isAgent ? 'י.ש' : customerName.split(' ').map(n => n[0]).join('');
            
            return `
                <div class="messenger-typing-indicator" style="
                    display: flex;
                    gap: 8px;
                    margin-bottom: 16px;
                    ${isAgent ? 'flex-direction: row-reverse;' : ''}
                ">
                    <div class="avatar avatar-sm" style="width: 28px; height: 28px; min-width: 28px; min-height: 28px; background: ${avatarBg}; color: ${avatarColor}; font-size: 12px; font-weight: 600; flex-shrink: 0; align-self: flex-start;">
                        ${avatarText}
                    </div>
                    <div style="background: ${bgColor}; color: ${textColor}; border-radius: 18px; padding: 8px 12px; max-width: 240px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; gap: 8px;">
                        <div style="display: flex; gap: 3px;">
                            <div style="width: 6px; height: 6px; background: ${textColor}; border-radius: 50%; animation: bounce 1.4s infinite; opacity: 0.6;"></div>
                            <div style="width: 6px; height: 6px; background: ${textColor}; border-radius: 50%; animation: bounce 1.4s infinite 0.2s; opacity: 0.6;"></div>
                            <div style="width: 6px; height: 6px; background: ${textColor}; border-radius: 50%; animation: bounce 1.4s infinite 0.4s; opacity: 0.6;"></div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function showMessengerTyping(customerName, isAgent = true, duration = 2000) {
            const chat = document.getElementById('messengerChat');
            if (!chat) return Promise.resolve();
            
            const typingId = 'typing-' + Date.now();
            const typingHTML = createMessengerTypingIndicator(isAgent, customerName);
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = typingHTML;
            tempDiv.firstElementChild.id = typingId;
            
            chat.appendChild(tempDiv.firstElementChild);
            chat.scrollTop = chat.scrollHeight;
            
            return new Promise(resolve => {
                setTimeout(() => {
                    const typingElement = document.getElementById(typingId);
                    if (typingElement) {
                        typingElement.remove();
                    }
                    resolve();
                }, duration);
            });
        }

        // Reusable popup creation function
        function createPopup(config) {
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                backdrop-filter: blur(5px);
                z-index: ${config.zIndex || 1003};
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 16px;
            `;
            
            overlay.innerHTML = `
                <div style="${config.containerStyle}">
                    ${config.closeButton ? `<button onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 16px; left: 16px; background: none; border: none; font-size: 24px; color: #6b7280; cursor: pointer;">×</button>` : ''}
                    ${config.content}
                </div>
            `;
            
            document.body.appendChild(overlay);
            return overlay;
        }

        async function showMessengerTransition(customerName, postCategory = 'relevant') {
            console.log('🎆 showMessengerTransition started for:', customerName);
            
            // Update progress to messenger stage and wait for typing to complete
            await updateEnhancedDemoStage('messenger');
            
            // Wait for users to read the completed text
            await new Promise(resolve => trackedSetTimeout(resolve, 1000));
            
            // Remove any existing notifications and popups first
            console.log('🧹 Removing existing fixed elements');
            removeFixedElements('[style*="position: fixed"][style*="top: 80px"]');
            removeFixedElements('[style*="position: fixed"][style*="bottom: 20px"]');
            removeFixedElements('[style*="position: absolute"][style*="bottom: 20px"]'); // Also remove absolute positioned popups
            removeFixedElements('[style*="position: relative"][style*="margin: 20px auto"]'); // Remove centered positioned elements
            
            // Skip notification and go directly to messenger popup
            console.log('📱 Opening Messenger popup directly');
            showMessengerPopup(customerName, 0, postCategory);
            console.log('✅ showMessengerTransition completed - opened Messenger directly');
        }

        function showMessengerPopup(customerName, resumeFromStep = 0, postCategory = 'relevant') {
            const demoSection = document.getElementById('demo');
            const facebookFeed = demoSection ? demoSection.querySelector('#demoLeftSide') : null;
            const isMobile = window.innerWidth <= 768;
            
            console.log('Looking for Facebook feed:', facebookFeed ? 'Found' : 'Not found');
            console.log('Is mobile:', isMobile);
            
            if (!facebookFeed) {
                console.error('demoLeftSide element not found!');
            }
            
            let popup, overlay;
            
            if (isMobile) {
                // Create overlay for mobile
                overlay = document.createElement('div');
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.6);
                    z-index: 1001;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    animation: fadeIn 0.3s ease-out;
                `;
                
                // Create popup for mobile
                popup = document.createElement('div');
                popup.style.cssText = `
                    width: 80vw;
                    max-width: 320px;
                    height: 70vh;
                    max-height: 600px;
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
                    overflow: hidden;
                    animation: popupSlideIn 0.4s ease-out;
                    display: flex;
                    flex-direction: column;
                `;
                
                // Close overlay when clicking outside popup
                overlay.onclick = (e) => {
                    if (e.target === overlay) {
                        overlay.remove();
                        messengerPopup = null;
                        messengerConversationActive = false;
                    }
                };
                
                overlay.appendChild(popup);
                // Add overlay to demo section instead of body to constrain it to demo area
                const demoSection = document.getElementById('demo');
                if (demoSection) {
                    // Make demo section relative positioned to contain the fixed overlay properly
                    demoSection.style.position = 'relative';
                    demoSection.style.overflow = 'hidden';
                    // Change overlay position to absolute instead of fixed
                    overlay.style.position = 'absolute';
                    demoSection.appendChild(overlay);
                } else {
                    // Fallback to body if demo section not found
                    document.body.appendChild(overlay);
                }
                
            } else {
                // Desktop version - overlay only on demo container
                overlay = document.createElement('div');
                overlay.style.cssText = `
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.6);
                    z-index: 9999;
                    display: flex;
                    align-items: flex-start;
                    justify-content: center;
                    padding-top: 60px;
                    animation: fadeIn 0.3s ease-out;
                `;
                
                // Create popup for desktop with overlay
                popup = document.createElement('div');
                popup.style.cssText = `
                    width: min(360px, 90vw);
                    height: min(540px, 70vh);
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
                    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
                    overflow: hidden;
                    display: flex;
                    flex-direction: column;
                    position: relative;
                    animation: popupSlideIn 0.4s ease-out;
                `;
                
                // Close overlay when clicking outside popup
                overlay.onclick = (e) => {
                    if (e.target === overlay) {
                        overlay.remove();
                        messengerPopup = null;
                        messengerConversationActive = false;
                    }
                };
                
                popup.onclick = e => e.stopPropagation();
                
                overlay.appendChild(popup);
                
                // Add overlay to Facebook feed area for better alignment
                if (facebookFeed) {
                    facebookFeed.style.position = 'relative';
                    facebookFeed.appendChild(overlay);
                    console.log('✅ Desktop overlay popup added to Facebook feed area');
                } else {
                    // Fallback to demo container
                    const demoContainer = demoSection ? demoSection.querySelector('.demo-container') : null;
                    if (demoContainer) {
                        demoContainer.style.position = 'relative';
                        demoContainer.appendChild(overlay);
                        console.log('✅ Desktop overlay popup added to demo container (fallback)');
                    } else {
                        document.body.appendChild(overlay);
                        console.log('⚠️ Fallback: Desktop overlay popup added to body');
                    }
                }
            }
            
            popup.innerHTML = `
                <div style="background: linear-gradient(135deg, #0084ff, #0066cc); color: white; padding: 12px 16px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid rgba(255,255,255,0.1); flex-shrink: 0;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <i class="fab fa-facebook-messenger" style="font-size: 16px;"></i>
                        </div>
                        <div>
                            <div style="font-weight: 600; font-size: 14px;">${customerName}</div>
                            <div style="font-size: 12px; opacity: 0.8;">פעיל עכשיו</div>
                        </div>
                    </div>
                    <button onclick="closeMessengerPopup()" style="background: rgba(255,255,255,0.2); border: none; color: white; font-size: 16px; cursor: pointer; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">×</button>
                </div>
                <div style="padding: 12px 16px; flex: 1; overflow-y: auto; background: #f8f9fa;" id="messengerChat">
                    <!-- Messages will be added here -->
                </div>
            `;
            
            // Store popup reference for closing when user scrolls away
            messengerPopup = overlay;
            
            console.log('✅ Popup created and added to DOM');
            console.log('Popup element:', popup);
            console.log('Is mobile overlay:', isMobile);
            
            // Wait for DOM to be fully updated before starting conversation
            trackedSetTimeout(() => {
                console.log('🚀 Starting messenger conversation');
                startMessengerConversation(customerName, postCategory);
            }, 10);
        }
        

        function closeMessengerPopup() {
            console.log('🚨 closeMessengerPopup() called');
            
            if (messengerPopup) {
                messengerPopup.remove();
                messengerPopup = null;
                messengerConversationActive = false;
                
                // Only call callback if this is a manual close (not from finishMessengerConversation)
                // We can detect this by checking if we're in the middle of normal flow
                console.log('🔍 Callback status:', !!demoCompleteCallback);
            }
            
            // Also remove any mobile overlays and notifications
            document.querySelectorAll('[style*="position: fixed"][style*="rgba(0, 0, 0, 0.6)"]').forEach(el => el.remove());
            removeFixedElements('[style*="position: fixed"][style*="top: 80px"]');
        }

        // Debug function to check demo state (for testing)
        function debugDemoState() {
            console.log('=== DEMO STATE DEBUG ===');
            console.log('demoStarted:', demoStarted);
            console.log('messengerConversationActive:', messengerConversationActive);
            console.log('feedPosts length:', feedPosts.length);
            console.log('processedPosts:', processedPosts);
            console.log('========================');
        }
        
        // Make it globally available for testing
        window.debugDemoState = debugDemoState;

        // Smart Process Roadmap Animations - Mobile Optimized
        function initProcessRoadmapAnimations() {
            const isMobile = window.innerWidth <= 768;
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const target = entry.target;
                        const section = target.closest('#process');
                        
                        if (section && !section.classList.contains('animated')) {
                            section.classList.add('animated');
                            animateProcessSection(section);
                        }
                    }
                });
            }, {
                threshold: isMobile ? 0.1 : 0.3, // Lower threshold for mobile
                rootMargin: isMobile ? '0px 0px -50px 0px' : '0px 0px -100px 0px'
            });

            const processSection = document.getElementById('process');
            if (processSection) {
                observer.observe(processSection);
            }
        }

        async function animateProcessSection(section) {
            console.log('🎬 Starting process roadmap animations');
            const isMobile = window.innerWidth <= 768;
            
            // 1. Animate header first
            const header = section.querySelector('[data-animate="header"]');
            if (header) {
                await new Promise(resolve => {
                    setTimeout(() => {
                        header.style.opacity = '1';
                        header.style.transform = 'translateY(0)';
                        resolve();
                    }, isMobile ? 100 : 200);
                });
                await new Promise(resolve => setTimeout(resolve, isMobile ? 300 : 600));
            }

            // 2. Start progress line animation
            const progressFill = section.querySelector('.progress-fill');
            if (progressFill) {
                progressFill.style.height = '100%';
            }

            // 3. Animate steps sequentially with smart delays
            const steps = section.querySelectorAll('[data-step]');
            const staggerDelay = isMobile ? 250 : 400; // Faster on mobile
            
            for (let i = 0; i < steps.length; i++) {
                const step = steps[i];
                await new Promise(resolve => {
                    setTimeout(() => {
                        step.style.opacity = '1';
                        // Mobile: reset all transforms to avoid conflicts
                        if (isMobile) {
                            step.style.transform = 'none';
                        } else {
                            step.style.transform = step.style.transform.replace(/translateX\([^)]*\)/, 'translateX(0)');
                        }
                        resolve();
                    }, i * staggerDelay);
                });
            }

            // 4. Animation complete - no CTA to animate

            console.log('✅ Process roadmap animations complete');
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            // Small delay to ensure all elements are rendered
            setTimeout(initProcessRoadmapAnimations, 100);
        });

        // Handle orientation changes and resize events
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                // Re-initialize animations if screen size changes significantly
                const processSection = document.getElementById('process');
                if (processSection && processSection.classList.contains('animated')) {
                    // Reset animation state to allow re-triggering if needed
                    console.log('🔄 Screen size changed, adjusting mobile layout');
                }
            }, 250);
        });

        // Optimize for mobile performance
        if ('ontouchstart' in window) {
            // Mobile device detected - disable some heavy animations
            document.addEventListener('DOMContentLoaded', () => {
                const style = document.createElement('style');
                style.textContent = `
                    .process-step:hover .step-number {
                        animation: none !important;
                    }
                    .progress-fill {
                        transition: height 1.5s ease-out !important;
                    }
                `;
                document.head.appendChild(style);
            });
        }


        
        
        
        function removeFixedElements(selector) {
            const elements = document.querySelectorAll(selector);
            if (elements.length > 0) {
                console.log('🗑️ removeFixedElements() removing', elements.length, 'elements with selector:', selector);
            }
            elements.forEach(el => el.remove());
        }
        
        
        function startMessengerConversation(customerName, postCategory = 'relevant') {
            startMessengerConversationFromStep(customerName, 0, postCategory);
        }
        
        function startMessengerConversationFromStep(customerName, fromStep = 0, postCategory = 'relevant') {
            const chat = document.getElementById('messengerChat');
            if (!chat) {
                console.error('CRITICAL: Messenger DOM elements not found!', {
                    chat: !!chat,
                    messengerPopup: !!messengerPopup
                });
                return;
            }
            
            console.log('Starting messenger conversation from step:', fromStep, 'category:', postCategory);
            
            // Step 1: Agent message with built-in typing animation
            const step1Delay = fromStep === 0 ? 1000 : 0;
            demoTimeouts.push(setTimeout(async () => {
                if (fromStep <= 0) {
                    let agentMessage;
                    if (postCategory === 'advice_seeking') {
                        // Advice/reputation building conversation
                        agentMessage = `${customerName.split(' ')[0]}, בקשר למה שכתבתי בתגובה - אגב, עוד דבר שכדאי לדעת זה שלפעמים הבעיה חוזרת גם אחרי תיקון אם לא טיפלו בגורם השורש. זמין לכל שאלה אם יש!`;
                    } else {
                        // Direct sales conversation (existing)
                        agentMessage = `${customerName.split(' ')[0]}, בקשר למה שכתבתי בפוסט - אגב, יש עוד נושא של תיאום עם שאר בעלי המקצוע שכדאי לתכנן מראש, זה יחסוך לך כסף וזמן. אם בא לך נוכל לעשות שיחת טלפון קצרה של 10-15 דקות כדי שאסביר לך איך התהליך עובד בפועל ומה חשוב לדעת. אני פנוי מחר בבוקר או מתי שנוח לך 👍`;
                    }
                    await addAgentMessage(chat, agentMessage);
                }
                
                // Step 2: Customer response with built-in typing animation
                const step2Delay = 2000;
                demoTimeouts.push(setTimeout(async () => {
                    if (fromStep <= 1) {
                        let customerResponse;
                        if (postCategory === 'advice_seeking') {
                            customerResponse = 'תודה רבה, זה באמת עוזר הרבה! אני רואה שיש לך ניסיון רחב. למען האמת יש לי עוד כמה דברים בבית שאני חושבת עליהם לטווח הארוך, אשמח לשמוע על השירותים שלך ואולי גם לקבל ייעוץ מקצועי.';
                        } else {
                            customerResponse = 'שלום! באמת נשמע מעניין ומתאים בדיוק למה שאני מחפשת. אשמח לראות עבודות שעשית ולשמוע על האופן שלך בעבודה. גם מעניין אותי לשמוע על לוחות זמנים ומחירים כמובן. איך הכי נוח לך לדבר על זה?';
                        }
                        await addCustomerMessage(chat, customerName, customerResponse);
                    }
                    
                    // Step 3: Close messenger and complete (2 seconds)
                    demoTimeouts.push(setTimeout(async () => {
                        await finishMessengerConversation();
                    }, 2000));
                }, step2Delay));
            }, step1Delay));
        }
        
        async function finishMessengerConversation() {
            console.log('🏁 finishMessengerConversation() called - NORMAL COMPLETION');
            
            // Clear any remaining Messenger timeouts to prevent accumulation
            console.log('🧹 Clearing accumulated timeouts before finishing conversation');
            console.log('🧹 Had', demoTimeouts.length, 'timeouts before cleanup');
            
            // Close messenger popup using the proper function
            closeMessengerPopup();
            
            // First update to detection stage, then show the message
            updateProgressStep('detection');
            
            // Show searching for more posts message after stage is updated
            const statusElement = document.getElementById('statusIndicatorText');
            if (statusElement) {
                statusElement.textContent = '';
                await typeTextInElement(statusElement, 'מאתר פוסטים רלוונטיים נוספים', 30);
                await trackedDelay(1200); // Wait for typing + small buffer
            }
            
            // Quick transition (no message to read)
            await new Promise(resolve => trackedSetTimeout(resolve, 500));
            
            // Clear timeouts AFTER completing the status text to prevent interruptions
            demoTimeouts.forEach(timeout => clearTimeout(timeout));
            demoTimeouts = [];
            
            // Call the completion callback LAST - after all animations complete
            if (demoCompleteCallback) {
                console.log('Demo sequence completed, calling callback');
                const callback = demoCompleteCallback;
                demoCompleteCallback = null; // Clear the callback
                callback();
            }
        }
        
        function restartDemo() {
            console.log('🚫 restartDemo() DISABLED - NOT RESTARTING!');
            console.trace();
            // DISABLED: resetDemoState();
            // DISABLED: setTimeout(() => { startAutoDemo(); }, 1000);
            return; // Do nothing
        }
        
        
        function addAgentMessage(chat, message, animate = true) {
            const uniqueId = `agentTyping${Date.now()}`;
            
            return new Promise((resolve) => {
                if (animate) {
                    // First show typing indicator
                    const typingIndicator = createMessengerTypingIndicator(true, 'Agent');
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = typingIndicator;
                    const typingElement = tempDiv.firstElementChild;
                    const typingId = 'typing-' + Date.now();
                    typingElement.id = typingId;
                    
                    chat.appendChild(typingElement);
                    chat.scrollTop = chat.scrollHeight;
                    
                    // After 2 seconds, remove typing indicator and add actual message
                    setTimeout(() => {
                        // Remove typing indicator
                        document.getElementById(typingId)?.remove();
                        
                        // Add the actual message
                        const messageDiv = document.createElement('div');
                        messageDiv.style.cssText = `
                            display: flex;
                            gap: 8px;
                            margin-bottom: 16px;
                            flex-direction: row-reverse;
                        `;
                        
                        messageDiv.innerHTML = `
                            <div class="avatar avatar-sm" style="width: 28px; height: 28px; min-width: 28px; min-height: 28px; background: var(--ai-purple); color: white; font-size: 12px; font-weight: 600; flex-shrink: 0; align-self: flex-start;">
                                י.ש
                            </div>
                            <div style="background: #0084ff; color: white; border-radius: 18px; padding: 8px 12px; max-width: 240px; font-size: 14px; line-height: 1.3;">
                                <div id="${uniqueId}"></div>
                            </div>
                        `;
                        
                        chat.appendChild(messageDiv);
                        chat.scrollTop = chat.scrollHeight;
                        
                        // Start typing the message
                        typeMessageWithAnimation(uniqueId, message, resolve);
                    }, 2000);
                } else {
                    // No animation, just add message directly
                    const messageDiv = document.createElement('div');
                    messageDiv.style.cssText = `
                        display: flex;
                        gap: 8px;
                        margin-bottom: 16px;
                        flex-direction: row-reverse;
                    `;
                    
                    messageDiv.innerHTML = `
                        <div class="avatar avatar-sm" style="width: 28px; height: 28px; min-width: 28px; min-height: 28px; background: var(--ai-purple); color: white; font-size: 12px; font-weight: 600; flex-shrink: 0; align-self: flex-start;">
                            י.ש
                        </div>
                        <div style="background: #0084ff; color: white; border-radius: 18px; padding: 8px 12px; max-width: 240px; font-size: 14px; line-height: 1.3;">
                            <div id="${uniqueId}"></div>
                        </div>
                    `;
                    
                    chat.appendChild(messageDiv);
                    document.getElementById(uniqueId).textContent = message;
                    resolve();
                }
            });
        }
        
        function addCustomerMessage(chat, customerName, message, animate = true) {
            const uniqueId = `customerTyping${Date.now()}`;
            
            return new Promise((resolve) => {
                if (animate) {
                    // First show typing indicator
                    const typingIndicator = createMessengerTypingIndicator(false, customerName);
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = typingIndicator;
                    const typingElement = tempDiv.firstElementChild;
                    const typingId = 'typing-' + Date.now();
                    typingElement.id = typingId;
                    
                    chat.appendChild(typingElement);
                    chat.scrollTop = chat.scrollHeight;
                    
                    // After 2 seconds, remove typing indicator and add actual message
                    setTimeout(() => {
                        // Remove typing indicator
                        document.getElementById(typingId)?.remove();
                        
                        // Add the actual message
                        const messageDiv = document.createElement('div');
                        messageDiv.style.cssText = `
                            display: flex;
                            gap: 8px;
                            margin-bottom: 16px;
                        `;
                        
                        messageDiv.innerHTML = `
                            <div class="avatar avatar-sm" style="width: 28px; height: 28px; min-width: 28px; min-height: 28px; background: #e4e6ea; color: #65676b; font-size: 12px; font-weight: 600; flex-shrink: 0; align-self: flex-start;">
                                ${customerName.split(' ').map(n => n[0]).join('')}
                            </div>
                            <div style="background: #e4e6ea; color: #050505; border-radius: 18px; padding: 8px 12px; max-width: 240px; font-size: 14px; line-height: 1.3;">
                                <div id="${uniqueId}"></div>
                            </div>
                        `;
                        
                        chat.appendChild(messageDiv);
                        chat.scrollTop = chat.scrollHeight;
                        
                        // Start typing the message
                        typeMessageWithAnimation(uniqueId, message, resolve);
                    }, 2000);
                } else {
                    // No animation, just add message directly
                    const messageDiv = document.createElement('div');
                    messageDiv.style.cssText = `
                        display: flex;
                        gap: 8px;
                        margin-bottom: 16px;
                    `;
                    
                    messageDiv.innerHTML = `
                        <div class="avatar avatar-sm" style="width: 28px; height: 28px; min-width: 28px; min-height: 28px; background: #e4e6ea; color: #65676b; font-size: 12px; font-weight: 600; flex-shrink: 0; align-self: flex-start;">
                            ${customerName.split(' ').map(n => n[0]).join('')}
                        </div>
                        <div style="background: #e4e6ea; color: #050505; border-radius: 18px; padding: 8px 12px; max-width: 240px; font-size: 14px; line-height: 1.3;">
                            <div id="${uniqueId}"></div>
                        </div>
                    `;
                    
                    chat.appendChild(messageDiv);
                    document.getElementById(uniqueId).textContent = message;
                    resolve();
                }
            });
        }
        
        // Legacy function for backward compatibility
        function typeMessageWithAnimation(elementId, text, callback) {
            typeText(elementId, text, callback, DELAYS.TYPING_SLOW);
        }


        /**
         * מערכת ניהול דמו חדשה ומושלמת - פותרת את כל הבאגים
         */
        class DemoStateManager {
            constructor() {
                this.state = 'idle'; // 'idle', 'running', 'paused', 'completed'
                this.operations = new Map(); // כל הפעולות הפעילות
                this.pausedAt = null;
                this.totalPauseTime = 0;
                this.operationCounter = 0;
                
                console.log('🎬 DemoStateManager initialized');
            }
            
            // בדיקת מצב הדמו
            isRunning() { return this.state === 'running'; }
            isPaused() { return this.state === 'paused'; }
            isIdle() { return this.state === 'idle'; }
            
            // התחלת דמו
            start() {
                if (this.state !== 'idle') {
                    console.warn('⚠️ Demo already active, state:', this.state);
                    return false;
                }
                
                this.state = 'running';
                this.totalPauseTime = 0;
                console.log('▶️ Demo started');
                return true;
            }
            
            // השהיית דמו
            pause() {
                if (this.state !== 'running') {
                    console.warn('⚠️ Cannot pause demo, current state:', this.state);
                    return false;
                }
                
                this.state = 'paused';
                this.pausedAt = Date.now();
                
                console.log(`⏸️ Demo paused with ${this.operations.size} active operations`);
                
                // הודעה לכל הפעולות שהמצב השתנה
                this.operations.forEach(operation => {
                    if (operation.onPause) {
                        operation.onPause();
                    }
                });
                
                return true;
            }
            
            // חידוש דמו
            resume() {
                if (this.state !== 'paused') {
                    console.warn('⚠️ Cannot resume demo, current state:', this.state);
                    return false;
                }
                
                // חישוב זמן פאוזה
                if (this.pausedAt) {
                    this.totalPauseTime += Date.now() - this.pausedAt;
                    this.pausedAt = null;
                }
                
                this.state = 'running';
                console.log(`▶️ Demo resumed with ${this.operations.size} operations to continue`);
                
                // הודעה לכל הפעולות שהמצב השתנה
                this.operations.forEach(operation => {
                    if (operation.onResume) {
                        operation.onResume();
                    }
                });
                
                return true;
            }
            
            // עצירת דמו
            stop() {
                const prevState = this.state;
                this.state = 'idle';
                
                console.log(`🛑 Demo stopped from state: ${prevState}, cleaning ${this.operations.size} operations`);
                
                // ביטול כל הפעולות
                this.operations.forEach(operation => {
                    if (operation.cancel) {
                        operation.cancel();
                    }
                });
                
                this.operations.clear();
                this.pausedAt = null;
                this.totalPauseTime = 0;
                
                return true;
            }
            
            // רישום פעולה חדשה
            registerOperation(type, cancelCallback, pauseCallback = null, resumeCallback = null) {
                const id = ++this.operationCounter;
                const operation = {
                    id,
                    type,
                    createdAt: Date.now(),
                    cancel: cancelCallback,
                    onPause: pauseCallback,
                    onResume: resumeCallback
                };
                
                this.operations.set(id, operation);
                console.log(`📝 Registered ${type} operation #${id}, total: ${this.operations.size}`);
                
                return id;
            }
            
            // הסרת פעולה
            unregisterOperation(id) {
                const operation = this.operations.get(id);
                if (operation) {
                    this.operations.delete(id);
                    console.log(`✅ Unregistered ${operation.type} operation #${id}, remaining: ${this.operations.size}`);
                    return true;
                }
                return false;
            }
        }

        // יצירת instance גלובלי
        const demoManager = new DemoStateManager();

        /**
         * פונקציית השהיה חדשה ומושלמת
         * מחליפה את trackedDelay הישנה
         */
        function smartDelay(duration) {
            return new Promise((resolve, reject) => {
                if (demoManager.isIdle()) {
                    reject(new Error('Demo not active'));
                    return;
                }
                
                let timeoutId = null;
                let startTime = Date.now();
                let remainingDuration = duration;
                let cancelled = false;
                
                const cleanup = () => {
                    if (timeoutId) {
                        clearTimeout(timeoutId);
                        timeoutId = null;
                    }
                    demoManager.unregisterOperation(operationId);
                };
                
                const executeDelay = () => {
                    if (cancelled) return;
                    
                    timeoutId = setTimeout(() => {
                        if (!cancelled) {
                            cleanup();
                            resolve();
                        }
                    }, remainingDuration);
                };
                
                const pauseHandler = () => {
                    if (timeoutId) {
                        clearTimeout(timeoutId);
                        timeoutId = null;
                        
                        // חישוב זמן שנותר
                        const elapsed = Date.now() - startTime;
                        remainingDuration = Math.max(0, remainingDuration - elapsed);
                        
                        console.log(`⏸️ Delay paused, ${remainingDuration}ms remaining`);
                    }
                };
                
                const resumeHandler = () => {
                    if (!cancelled && demoManager.isRunning()) {
                        startTime = Date.now();
                        console.log(`▶️ Delay resumed with ${remainingDuration}ms`);
                        executeDelay();
                    }
                };
                
                const cancelHandler = () => {
                    cancelled = true;
                    cleanup();
                    reject(new Error('Delay cancelled'));
                };
                
                // רישום הפעולה
                const operationId = demoManager.registerOperation(
                    'delay',
                    cancelHandler,
                    pauseHandler,
                    resumeHandler
                );
                
                // התחלת הביצוע אם הדמו רץ
                if (demoManager.isRunning()) {
                    executeDelay();
                } else if (demoManager.isPaused()) {
                    console.log('⏸️ Delay created while demo is paused - waiting for resume');
                }
            });
        }

        /**
         * פונקציית הקלדה חדשה ומושלמת
         * מחליפה את typeText הישנה
         */
        function smartTypeText(element, text, speed = 50) {
            return new Promise((resolve, reject) => {
                if (!element || typeof text !== 'string') {
                    reject(new Error('Invalid element or text'));
                    return;
                }
                
                if (demoManager.isIdle()) {
                    reject(new Error('Demo not active'));
                    return;
                }
                
                let currentIndex = 0;
                let timeoutId = null;
                let cancelled = false;
                
                const cleanup = () => {
                    if (timeoutId) {
                        clearTimeout(timeoutId);
                        timeoutId = null;
                    }
                    demoManager.unregisterOperation(operationId);
                };
                
                const typeNextChar = () => {
                    if (cancelled || !demoManager.isRunning()) return;
                    
                    if (currentIndex < text.length) {
                        element.textContent = text.substring(0, currentIndex + 1);
                        currentIndex++;
                        
                        timeoutId = setTimeout(typeNextChar, speed);
                    } else {
                        // הקלדה הושלמה
                        cleanup();
                        resolve();
                    }
                };
                
                const pauseHandler = () => {
                    if (timeoutId) {
                        clearTimeout(timeoutId);
                        timeoutId = null;
                    }
                    console.log(`⏸️ Typing paused at character ${currentIndex}/${text.length}`);
                };
                
                const resumeHandler = () => {
                    if (!cancelled && currentIndex < text.length && demoManager.isRunning()) {
                        console.log(`▶️ Typing resumed from character ${currentIndex}/${text.length}`);
                        timeoutId = setTimeout(typeNextChar, speed);
                    }
                };
                
                const cancelHandler = () => {
                    cancelled = true;
                    cleanup();
                    reject(new Error('Typing cancelled'));
                };
                
                // רישום הפעולה
                const operationId = demoManager.registerOperation(
                    'typing',
                    cancelHandler,
                    pauseHandler,
                    resumeHandler
                );
                
                // התחלת הביצוע אם הדמו רץ
                if (demoManager.isRunning()) {
                    timeoutId = setTimeout(typeNextChar, speed);
                } else if (demoManager.isPaused()) {
                    console.log('⏸️ Typing created while demo is paused - waiting for resume');
                }
            });
        }

        // Auto-playing demo system - LEGACY COMPATIBILITY LAYER
        let demoStarted = false;
        let demoTimeouts = [];
        let demoPaused = false;
        let pausedTimeouts = []; // Store paused timeouts with remaining times
        let pauseStartTime = null;
        
        // Wrap the push method to log every timeout creation
        const originalPush = demoTimeouts.push;
        demoTimeouts.push = function(timeoutId) {
            console.log('⏰ TIMEOUT #' + (this.length + 1) + ' ADDED - Total timeouts:', this.length + 1);
            console.trace();
            return originalPush.call(this, timeoutId);
        };
        let messengerConversationActive = false;
        let messengerPopup = null;
        let processedPosts = new Set();
        let currentPostIndex = 0; // Track which post we're currently analyzing
        let totalPosts = 0; // Total number of posts in the feed
        let demoCompleteCallback = null; // Callback to run when demo sequence completes
        let isDetectionRunning = false; // Flag to prevent multiple detection processes running simultaneously
        
        function clearDemoTimeouts() {
            console.log('🚨 CLEARING', demoTimeouts.length, 'demo timeouts');
            console.log('🚨 STACK TRACE:');
            const stack = new Error().stack;
            console.log(stack);
            demoTimeouts.forEach(timeout => clearTimeout(timeout));
            demoTimeouts = [];
            // Reset detection flag when clearing timeouts
            isDetectionRunning = false;
        }
        
        function pauseDemo() {
            // Legacy wrapper - use the new demo manager
            if (!demoStarted) {
                console.log('⚠️ Cannot pause demo - not started');
                return false;
            }
            
            const success = demoManager.pause();
            if (success) {
                demoPaused = true;
                pauseStartTime = Date.now();
                
                // Clear legacy timeouts for backward compatibility
                demoTimeouts.forEach(timeout => clearTimeout(timeout));
                demoTimeouts = [];
                
                // Stop any ongoing animations
                const allAnimatedElements = document.querySelectorAll('.typing-text, .phase-content');
                allAnimatedElements.forEach(element => {
                    element.style.animationPlayState = 'paused';
                });
            }
            
            return success;
        }
        
        function resumeDemo() {
            // Legacy wrapper - use the new demo manager
            if (!demoStarted || !demoPaused) {
                console.log('⚠️ Cannot resume demo - invalid state');
                return false;
            }
            
            const success = demoManager.resume();
            if (success) {
                demoPaused = false;
                pauseStartTime = null;
                
                // Resume any paused animations
                const allAnimatedElements = document.querySelectorAll('.typing-text, .phase-content');
                allAnimatedElements.forEach(element => {
                    element.style.animationPlayState = 'running';
                });
                
                console.log('✅ Demo resumed using new state manager');
            }
            
            return success;
        }
        
        function resetDemoState() {
            console.log('🔄 resetDemoState() called - FORCE RESET');
            console.trace();
            
            // Stop the new demo manager
            demoManager.stop();
            
            demoStarted = false;
            messengerConversationActive = false;
            processedPosts.clear();
            clearDemoTimeouts();
            
            // Hide navigation demo control button
            const navDemoControl = document.getElementById('navDemoControl');
            if (navDemoControl) {
                navDemoControl.classList.remove('active');
                console.log('✅ Navigation demo control button hidden');
            }
            
            
            // Clear all paused states for backward compatibility
            if (typeof pausedTypingStates !== 'undefined') pausedTypingStates.clear();
            if (typeof pausedDelays !== 'undefined') pausedDelays.clear();
            demoPaused = false;
            
            // Reset focus system
            setDemoFocus('neutral');
            // Don't activate navigation during reset - wait for main demo to start
            // updateProgressStep('analysis'); 
            
            // Demo containers are already visible by default - no initialization needed
            
            // Remove any existing popups
            removeFixedElements('[style*="position: fixed"][style*="z-index: 100"]');
        }
        
        async function startAutoDemo() {
            console.log('🎯 Starting customer strategy phase...');
            if (demoStarted) {
                console.log('Demo already started, skipping');
                return;
            }
            
            // Facebook feed scanning will start after customer card is done
            
            // Start the new demo manager
            if (!demoManager.start()) {
                console.error('❌ Failed to start demo manager');
                return;
            }
            
            demoStarted = true;
            
            // Phase 1: Customer Strategy (20 seconds)
            console.log('Showing customer strategy for 20 seconds...');
            
            // Start showing customer details
            showCustomerDetails();
            
            // Check periodically if customer phases are complete
            const checkForCompletion = async () => {
                if (window.customerPhasesComplete) {
                    console.log('Customer phases completed, transitioning to Facebook demo...');
                    await transitionToFacebookDemo();
                } else {
                    trackedSetTimeout(checkForCompletion, 1000); // Check every second
                }
            };
            
            // Start checking after a minimum time (2 phases only)
            trackedSetTimeout(checkForCompletion, 8000); // Start checking after 8 seconds
        }
        
        async function transitionToFacebookDemo() {
            try {
                console.log('🔄 Starting transition to Facebook demo...');
                
                // Change header back to Facebook
                const headerTitle = document.getElementById('headerTitle');
                const headerIcon = headerTitle?.previousElementSibling;
                if (headerTitle && headerIcon) {
                    headerIcon.className = 'fab fa-facebook-f';
                    headerIcon.style.fontSize = '16px';
                    headerIcon.textContent = ''; // Clear any text content
                    headerTitle.textContent = 'Facebook';
                }
                
                // Show hidden demo elements
                const demoProgress = document.getElementById('demoProgress');
                const statusIndicator = document.getElementById('statusIndicatorContainer');
                
                if (demoProgress) {
                    demoProgress.style.display = 'flex';
                }
                if (statusIndicator) {
                    statusIndicator.style.display = 'block';
                }
                
                // Hide customer card content and show Facebook content
                const customerCardContainer = document.getElementById('customerCardContent');
                const facebookContainer = document.getElementById('facebookContent');
                
                if (customerCardContainer) {
                    customerCardContainer.style.display = 'none';
                }
                if (facebookContainer) {
                    facebookContainer.style.display = 'block';
                }
                
                // Populate the feed first so posts are visible during detection phase
                populateFeed();
                
                // Set status to detection phase and WAIT for typing animation to complete
                await updateEnhancedDemoStage('detection');
                console.log('✅ Detection phase typing animation completed');
                
                // Start the Facebook feed demo
                await unlockFullContainers();
                
                // Now start detection since typing is finished
                trackedSetTimeout(() => {
                    console.log('Starting post detection after typing animation completed');
                    detectAndMarkPosts();
                }, 500); // Small buffer after typing completes
                
                // Check if this is a transition after pause/resume
                const isResumingAfterPause = demoPaused === false && demoStarted === true;
                console.log('🔄 Transition to Facebook - isResumingAfterPause:', isResumingAfterPause);
                startMainDemo(isResumingAfterPause);
                
                console.log('✅ Successfully transitioned to Facebook demo');
                
            } catch (error) {
                console.error('❌ Error during transition:', error);
            }
        }
        
        async function showCustomerDetails() {
            console.log('🎯 Starting 5-phase customer card system...');
            
            // Show customer card container
            const customerCardContainer = document.getElementById('customerCardContent');
            const facebookContainer = document.getElementById('facebookContent');
            
            if (customerCardContainer) {
                customerCardContainer.style.display = 'block';
                facebookContainer.style.display = 'none';
            }
            
            // Show customer card status indicator (no initial message)
            const statusIndicator = document.getElementById('statusIndicatorContainer');
            if (statusIndicator) {
                statusIndicator.style.display = 'block';
            }
            
            // Define the 2 phases (condensed version)
            const phases = [
                {
                    title: 'פרטי לקוח ויעדים',
                    icon: '📊',
                    content: {
                        type: 'mixed',
                        details: {
                            'שם לקוח': 'יוסי שיפוצים',
                            'תחום עסקי': 'שיפוצים ובנייה',
                            'אזור פעילות': 'תל אביב והשרון',
                            'ניסיון': '8+ שנים',
                            'כתובת אתר': 'www.yosisipotzim.co.il'
                        },
                        goals: [
                            'הגדלת מספר הלידים האורגנים',
                            'בניית מוניטין דיגיטלי חזק',
                            'הגדלת שיתופי פעולה מקצועיים'
                        ]
                    }
                },
                {
                    title: 'אסטרטגיית לקוח',
                    icon: '🎯',
                    content: {
                        type: 'strategy',
                        actions: [
                            'איתור פוסטים של אנשים המחפשים שיפוצניק באזור',
                            'מעקב אחר פוסטים המבקשים עצה מקצועית',
                            'זיהוי דיונים על פרויקטי בנייה ושיפוצים'
                        ],
                        communication: [
                            'גישה מקצועית עם הדגשת ניסיון וייעוץ',
                            'שיתוף תמונות "לפני ואחרי"',
                            'הדגשת הקרבה הגיאוגרפית',
                            'הזכרת ביטוח ואחריות',
                            'ייעוץ ראשוני ללא התחייבות'
                        ]
                    }
                }
            ];
            
            // Show each phase sequentially
            for (let i = 0; i < phases.length; i++) {
                await showPhase(phases[i], i + 1, phases.length);
                
                // Wait between phases (except after the last one)
                if (i < phases.length - 1) {
                    // Calculate delay based on the longest expected text in the next phase
                    // Average message length ~70 chars * 30ms = ~2100ms + buffer
                    await trackedDelay(2500);
                }
            }
            
            console.log('✅ All customer phases completed, signaling transition...');
            
            // Update status indicator for completion
            await updateCustomerCardStatus('✅ כרטיס לקוח הושלם! עובר לסריקת פייסבוק...');
            
            // Wait for completion message typing (~65 chars * 30ms = ~2000ms) + buffer
            await trackedDelay(2500);
            
            // Signal that customer phases are done
            window.customerPhasesComplete = true;
        }
        
        // Function to update customer card status indicator with typing animation
        async function updateCustomerCardStatus(message) {
            const statusElement = document.getElementById('statusIndicatorText');
            if (statusElement) {
                // Clear previous content
                statusElement.textContent = '';
                
                // Add typing animation
                await typeTextInElement(statusElement, message, 30);
            }
        }
        
        async function showPhase(phase, phaseNum, totalPhases) {
            console.log(`🎯 Showing phase ${phaseNum}/${totalPhases}: ${phase.title}`);
            
            // Update status indicator for this phase with thinking process
            if (phaseNum === 1) {
                // Phase 1: Customer profile building
                await updateCustomerCardStatus('בונה פרופיל לקוח - אוסף פרטים ויעדים עסקיים');
                await trackedDelay(2000);
                
            } else if (phaseNum === 2) {
                // Phase 2: Multi-step thinking process with smooth transitions
                await updateCustomerCardStatus('🧠 מנתח פרטי לקוח...');
                await trackedDelay(1200); // Shorter delay for smoother transition
                
                await updateCustomerCardStatus('🧠 מזהה קהלי יעד רלוונטיים...');
                await trackedDelay(1400); // Shorter delay for smoother transition
                
                await updateCustomerCardStatus('🧠 מאפיין אסטרטגיית שיווק מותאמת אישית...');
                await trackedDelay(1600); // Shorter delay for final step
            }
            
            const container = document.getElementById('customerCardContent');
            if (!container) {
                console.error('❌ customerCardContent container not found!');
                return;
            }
            
            // Update header title in the blue banner with typing animation
            const headerTitle = document.getElementById('headerTitle');
            const headerIcon = headerTitle?.previousElementSibling;
            if (headerTitle && headerIcon) {
                // Hide the icon
                headerIcon.style.display = 'none';
                
                // Make sure header container and title are RTL for Hebrew typing
                const headerContainer = headerTitle.parentElement;
                if (headerContainer) {
                    headerContainer.style.direction = 'rtl';
                    headerContainer.style.justifyContent = 'center';
                }
                
                headerTitle.style.direction = 'rtl';
                headerTitle.style.textAlign = 'center';
                headerTitle.style.display = 'inline-block';
                headerTitle.style.width = 'auto';
                
                // Clear title and type it
                headerTitle.textContent = '';
                await typeTextInElement(headerTitle, phase.title, 50);
            }
            
            // Clear previous content
            container.style.opacity = '0';
            await trackedDelay(300);
            
            // Create phase content HTML (without title since it's now in header)
            let contentHTML = `
                <div style="max-width: 500px; margin: 0 auto; text-align: center; padding: 6px; box-sizing: border-box;">
            `;
            
            // Handle different content types - create empty containers first
            if (typeof phase.content === 'object' && !Array.isArray(phase.content) && phase.content.type === 'mixed') {
                // Mixed content (details + goals)
                contentHTML += '<div style="text-align: right; direction: rtl; width: 100%; margin: 0 auto; box-sizing: border-box;">';
                
                // Add customer details in white container
                contentHTML += '<div style="margin-bottom: 25px; padding: 8px 5px; background: #ffffff; border-radius: 6px;">';
                contentHTML += '<div style="font-weight: 600; color: #37352f; margin-bottom: 8px; font-size: clamp(14px, 3.2vw, 16px);">📊 פרטי הלקוח:</div>';
                
                Object.entries(phase.content.details).forEach(([key, value]) => {
                    contentHTML += `
                        <div data-field style="display: flex; align-items: flex-start; padding: 6px 5px; border-bottom: 1px solid #e2e8f0; font-size: clamp(13px, 3vw, 15px); gap: 8px; direction: rtl; text-align: right;">
                            <span style="font-weight: 600; color: #37352f; flex-shrink: 0;">${key}:</span>
                            <span data-value style="color: #6b7280; font-weight: 500; flex: 1; word-break: break-word;" data-text="${value}"></span>
                        </div>
                    `;
                });
                contentHTML += '</div>';
                
                // Add separator and goals
                contentHTML += '<div style="margin: 25px 0; padding: 8px 5px; background: #ffffff; border-radius: 6px;">';
                contentHTML += '<div style="font-weight: 600; color: #37352f; margin-bottom: 8px; font-size: clamp(14px, 3.2vw, 16px);">🎯 יעדי הלקוח:</div>';
                
                phase.content.goals.forEach(goal => {
                    contentHTML += `
                        <div data-goal style="display: flex; align-items: flex-start; margin-bottom: 8px; line-height: 1.4; font-size: clamp(13px, 3vw, 15px); padding: 0 5px;">
                            <i class="fas fa-check" style="color: #2563eb; margin-left: 8px; margin-top: 1px; flex-shrink: 0; font-size: clamp(12px, 2.5vw, 14px); opacity: 0;"></i>
                            <span style="color: #37352f; word-break: break-word;" data-goal-text="${goal}"></span>
                        </div>
                    `;
                });
                
                contentHTML += '</div></div>';
            } else if (typeof phase.content === 'object' && !Array.isArray(phase.content) && phase.content.type === 'strategy') {
                // Strategy content (actions + communication + approach)
                contentHTML += '<div style="text-align: right; direction: rtl; width: 100%; margin: 0 auto; box-sizing: border-box;">';
                
                // Add strategic actions
                contentHTML += '<div style="margin-bottom: 25px; padding: 8px 5px; background: #ffffff; border-radius: 6px;">';
                contentHTML += '<div style="font-weight: 600; color: #37352f; margin-bottom: 8px; font-size: clamp(14px, 3.2vw, 16px);">🚀 פעולות אסטרטגיות:</div>';
                phase.content.actions.forEach(action => {
                    contentHTML += `
                        <div data-action style="display: flex; align-items: flex-start; margin-bottom: 6px; line-height: 1.4; font-size: clamp(13px, 3vw, 15px); padding: 0 5px;">
                            <i class="fas fa-check" style="color: #2563eb; margin-left: 8px; margin-top: 1px; flex-shrink: 0; font-size: clamp(12px, 2.5vw, 14px); opacity: 0;"></i>
                            <span style="color: #37352f; word-break: break-word;" data-action-text="${action}"></span>
                        </div>
                    `;
                });
                contentHTML += '</div>';
                
                // Add unified communication style
                contentHTML += '<div style="margin-bottom: 25px; padding: 8px 5px; background: #ffffff; border-radius: 6px;">';
                contentHTML += '<div style="font-weight: 600; color: #37352f; margin-bottom: 8px; font-size: clamp(14px, 3.2vw, 16px);">💬 סגנון מענה בפוסטים:</div>';
                phase.content.communication.forEach(commItem => {
                    contentHTML += `
                        <div data-comm style="display: flex; align-items: flex-start; margin-bottom: 6px; line-height: 1.4; font-size: clamp(13px, 3vw, 15px); padding: 0 5px;">
                            <i class="fas fa-check" style="color: #2563eb; margin-left: 8px; margin-top: 1px; flex-shrink: 0; font-size: clamp(12px, 2.5vw, 14px); opacity: 0;"></i>
                            <span style="color: #37352f; word-break: break-word;" data-comm-text="${commItem}"></span>
                        </div>
                    `;
                });
                contentHTML += '</div>';
                
                contentHTML += '</div>';
            } else if (typeof phase.content === 'object' && !Array.isArray(phase.content)) {
                // Object content (key-value pairs)
                contentHTML += '<div style="text-align: right; direction: rtl; width: 100%; margin: 0 auto; box-sizing: border-box;">';
                Object.entries(phase.content).forEach(([key, value]) => {
                    contentHTML += `
                        <div data-field style="display: flex; justify-content: space-between; align-items: flex-start; padding: 6px 5px; border-bottom: 1px solid #e2e8f0; font-size: clamp(13px, 3vw, 15px); flex-wrap: wrap; gap: 5px;">
                            <span style="font-weight: 600; color: #37352f; min-width: 80px; text-align: right;">${key}:</span>
                            <span data-value style="color: #6b7280; font-weight: 500; text-align: left; flex: 1; word-break: break-word;" data-text="${value}"></span>
                        </div>
                    `;
                });
                contentHTML += '</div>';
            } else if (Array.isArray(phase.content)) {
                // Array content (list items)
                contentHTML += '<div style="text-align: right; direction: rtl; width: 100%; margin: 0 auto; box-sizing: border-box;">';
                phase.content.forEach(item => {
                    contentHTML += `
                        <div data-item style="display: flex; align-items: flex-start; margin-bottom: 10px; line-height: 1.4; font-size: clamp(13px, 3vw, 15px); padding: 0 5px;">
                            <i class="fas fa-check" style="color: #2563eb; margin-left: 8px; margin-top: 1px; flex-shrink: 0; font-size: clamp(12px, 2.5vw, 14px);"></i>
                            <span style="color: #37352f; word-break: break-word;" data-text="${item}"></span>
                        </div>
                    `;
                });
                contentHTML += '</div>';
            } else {
                // String content (paragraph)
                contentHTML += `
                    <div data-text style="text-align: right; direction: rtl; line-height: 1.4; font-size: clamp(13px, 3vw, 15px); color: #37352f; width: 100%; margin: 0 auto; padding: 0 5px; word-break: break-word;" data-full-text="${phase.content}">
                    </div>
                `;
            }
            
            contentHTML += '</div>';
            
            console.log('Setting content HTML:', contentHTML.substring(0, 200) + '...');
            
            // Set new content
            container.innerHTML = contentHTML;
            
            // Show container
            container.style.opacity = '1';
            container.style.transition = 'opacity 0.5s ease';
            
            console.log('✅ Phase content set successfully');
            
            // Add typing animation to content elements
            await trackedDelay(500); // Wait for content to be rendered
            
            if (typeof phase.content === 'object' && !Array.isArray(phase.content) && phase.content.type === 'mixed') {
                // Type mixed content (details + goals)
                // First type customer details
                const detailSpans = container.querySelectorAll('[data-field] [data-value]');
                for (let i = 0; i < detailSpans.length; i++) {
                    const span = detailSpans[i];
                    const textToType = span.getAttribute('data-text');
                    if (textToType) {
                        await typeTextInElement(span, textToType, 40);
                        await trackedDelay(200);
                    }
                }
                
                // Then type goals
                const goalItems = container.querySelectorAll('[data-goal]');
                for (let i = 0; i < goalItems.length; i++) {
                    const goalItem = goalItems[i];
                    const icon = goalItem.querySelector('i');
                    const span = goalItem.querySelector('span[data-goal-text]');
                    
                    // Show icon first
                    if (icon) {
                        icon.style.opacity = '1';
                        await trackedDelay(100);
                    }
                    
                    // Then type text
                    if (span) {
                        const textToType = span.getAttribute('data-goal-text');
                        if (textToType) {
                            await typeTextInElement(span, textToType, 40);
                            await trackedDelay(300);
                        }
                    }
                }
            } else if (typeof phase.content === 'object' && !Array.isArray(phase.content) && phase.content.type === 'strategy') {
                // Type strategy content (actions + communication + approach)
                // First type strategic actions
                const actionItems = container.querySelectorAll('[data-action]');
                for (let i = 0; i < actionItems.length; i++) {
                    const actionItem = actionItems[i];
                    const icon = actionItem.querySelector('i');
                    const span = actionItem.querySelector('span[data-action-text]');
                    
                    // Show icon first
                    if (icon) {
                        icon.style.opacity = '1';
                        await trackedDelay(100);
                    }
                    
                    // Then type text
                    if (span) {
                        const textToType = span.getAttribute('data-action-text');
                        if (textToType) {
                            await typeTextInElement(span, textToType, 40);
                            await trackedDelay(200);
                        }
                    }
                }
                
                // Then type unified communication style
                const commItems = container.querySelectorAll('[data-comm]');
                for (let i = 0; i < commItems.length; i++) {
                    const commItem = commItems[i];
                    const icon = commItem.querySelector('i');
                    const span = commItem.querySelector('span[data-comm-text]');
                    
                    // Show icon first
                    if (icon) {
                        icon.style.opacity = '1';
                        await trackedDelay(100);
                    }
                    
                    // Then type text
                    if (span) {
                        const textToType = span.getAttribute('data-comm-text');
                        if (textToType) {
                            await typeTextInElement(span, textToType, 40);
                            await trackedDelay(150);
                        }
                    }
                }
            } else if (typeof phase.content === 'object' && !Array.isArray(phase.content)) {
                // Type key-value pairs one by one
                const valueSpans = container.querySelectorAll('[data-value]');
                for (let i = 0; i < valueSpans.length; i++) {
                    const span = valueSpans[i];
                    const textToType = span.getAttribute('data-text');
                    if (textToType) {
                        await typeTextInElement(span, textToType, 40);
                        await trackedDelay(300);
                    }
                }
            } else if (Array.isArray(phase.content)) {
                // Type list items one by one
                const textSpans = container.querySelectorAll('[data-item] span[data-text]');
                for (let i = 0; i < textSpans.length; i++) {
                    const span = textSpans[i];
                    const textToType = span.getAttribute('data-text');
                    if (textToType) {
                        await typeTextInElement(span, textToType, 40);
                        await trackedDelay(400);
                    }
                }
            } else {
                // Type paragraph text
                const textDiv = container.querySelector('[data-text]');
                if (textDiv) {
                    const textToType = textDiv.getAttribute('data-full-text');
                    if (textToType) {
                        await typeTextInElement(textDiv, textToType, 30);
                    }
                }
            }
            
            // Wait to show the content
            await trackedDelay(1500);
        }
        
        function typeTextInElement(element, text, speed = 50, append = false) {
            return new Promise((resolve) => {
                if (!element || !text) {
                    resolve();
                    return;
                }
                
                let i = 0;
                const startText = append ? element.textContent : '';
                if (!append) {
                    element.textContent = '';
                }
                
                function typeChar() {
                    // If demo is paused, store state and wait for resume instead of resolving
                    if (demoPaused) {
                        console.log('⏸️ Typing paused - storing state for resume');
                        const typingId = `typing_${Date.now()}`;
                        pausedTypingStates.set(typingId, {
                            element: element,
                            text: text,
                            currentIndex: i,
                            speed: speed,
                            append: append,
                            startText: startText,
                            resolve: resolve
                        });
                        return; // Don't resolve yet - wait for resume
                    }
                    
                    if (i < text.length && element) {
                        // Both RTL and LTR: type characters from beginning to end
                        // The difference is just in text alignment, not typing order
                        const currentText = text.substring(0, i + 1);
                        if (append) {
                            element.textContent = startText + currentText;
                        } else {
                            element.textContent = currentText;
                        }
                        i++;
                        trackedSetTimeout(typeChar, speed);
                    } else {
                        resolve();
                    }
                }
                
                typeChar();
            });
        }


        async function unlockFullContainers() {
            console.log('Demo containers already visible - no animation needed');
            const container = document.getElementById('demoContainer');
            const statusIndicatorContainer = document.getElementById('statusIndicatorContainer');
            
            // Small pause before showing demo elements
            await trackedDelay(300);
            
            // Show green indicator with smooth fade in
            if (statusIndicatorContainer) {
                statusIndicatorContainer.style.display = 'block';
                statusIndicatorContainer.style.visibility = 'visible'; // Make it visible again
                statusIndicatorContainer.style.opacity = '0';
                statusIndicatorContainer.style.transform = 'translateY(20px)';
                statusIndicatorContainer.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                
                // Trigger fade in
                setTimeout(() => {
                    statusIndicatorContainer.style.opacity = '1';
                    statusIndicatorContainer.style.transform = 'translateY(0)';
                }, 50);
            }
            
            // Show centered demo container with smooth fade in
            if (container) {
                container.style.display = 'flex';
                container.style.opacity = '0';
                container.style.transform = 'translateY(30px)';
                container.style.transition = 'opacity 0.8s ease-out, transform 0.8s ease-out';
                
                // Trigger fade in after a short delay
                setTimeout(() => {
                    container.style.opacity = '1';
                    container.style.transform = 'translateY(0)';
                }, 200);
            }
        }

        function startMainDemo(isResuming = false) {
            console.log('Starting main demo sequence... isResuming:', isResuming);
            const statusElement = document.getElementById('statusIndicatorText');
            const demoProgress = document.getElementById('demoProgress');
            
            if (!statusElement) {
                console.error('Status element not found!');
                return;
            }
            
            // Show the demo navigation now that main demo is starting
            if (demoProgress) {
                demoProgress.style.display = 'flex';
            }
            
            // Clear initial status - will be set by first demo stage
            statusElement.textContent = '';
            statusElement.style.color = '#000000';
            
            // Only clear timeouts if not resuming - preserve existing state when resuming
            if (!isResuming) {
                console.log('🚫 Clearing timeouts - fresh start');
                clearDemoTimeouts();
            } else {
                console.log('🔄 Keeping timeouts - resuming from previous state');
            }
            
            // Initialize progress and focus - start with detection stage
            updateProgressStep('detection');
            setDemoFocus('right', 'blue');
            
            if (!isResuming) {
                // Fresh start - feed already populated in transition, just start detection
                console.log('🆕 Fresh start - starting detection...');
                
                // Detection will start automatically after the typing animation in transitionToFacebookDemo finishes
                // No timeout needed here since timing is controlled by the transition function
            } else {
                // Resuming - continue from where we left off
                console.log('🔄 Resuming - continuing from current state. Current post index:', currentPostIndex);
                
                // Skip population and start detection immediately 
                trackedSetTimeout(() => {
                    console.log('🔄 Resuming post processing from index:', currentPostIndex);
                    detectAndMarkPosts();
                }, 1000);
            }
            
            // Only reset demo after completion, not on timer
            // Removed automatic 60-second reset to prevent scroll conflicts
        }
        

        
        let demoObserver;
        
        function initDemoObserver() {
            console.log('Demo observer disabled - manual start only');
            // AUTO-START COMPLETELY DISABLED - No automatic demo start
        }
        
        function selectPlan(plan) {
            // Form moved to landing page
        }
        
        // Toggle the "Other" business type field
        function toggleOtherBusinessField() {
            const businessTypeSelect = document.getElementById('businessType');
            const otherBusinessGroup = document.getElementById('otherBusinessGroup');
            const otherBusinessInput = document.getElementById('otherBusiness');
            
            if (businessTypeSelect.value === 'other') {
                otherBusinessGroup.style.display = 'block';
                otherBusinessInput.required = true;
            } else {
                otherBusinessGroup.style.display = 'none';
                otherBusinessInput.required = false;
                otherBusinessInput.value = ''; // Clear the field when hiding
            }
        }
        
        // NEW: Function to scroll to contact form
        function scrollToContactForm() {
            const contactSection = document.getElementById('contact');
            if (contactSection) {
                contactSection.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'center'
                });
                
                // Focus on first input after scroll
                setTimeout(() => {
                    const firstInput = contactSection.querySelector('input');
                    if (firstInput) {
                        firstInput.focus();
                    }
                }, 800);
            }
        }
        
        // NEW: Function to scroll to demo and start it
        function scrollToDemoAndStart() {
            const demoSection = document.getElementById('demo');
            if (demoSection) {
                const headerHeight = document.querySelector('.header').offsetHeight || 80;
                // Get demo section's padding-top to offset it
                const demoStyles = window.getComputedStyle(demoSection);
                const demoPaddingTop = parseInt(demoStyles.paddingTop) || 0;
                const targetPosition = demoSection.offsetTop + demoPaddingTop - headerHeight;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
                
                // Start demo after scroll animation completes
                setTimeout(() => {
                    if (!demoStarted) {
                        startDemo();
                    }
                }, 1000);
            }
        }

        function scrollToDemo(type) {
            // Scroll to demo section
            const demoSection = document.getElementById('demo');
            if (demoSection) {
                const headerHeight = document.querySelector('.header').offsetHeight || 80;
                // Get demo section's padding-top to offset it
                const demoStyles = window.getComputedStyle(demoSection);
                const demoPaddingTop = parseInt(demoStyles.paddingTop) || 0;
                const targetPosition = demoSection.offsetTop + demoPaddingTop - headerHeight;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
                
                // Start demo after scroll animation completes
                setTimeout(() => {
                    if (!demoStarted) {
                        startDemo();
                    }
                }, 1000);
            }
        }
        
        function startDemo() {
            console.log('🎯 startDemo button clicked');
            
            const navDemoControl = document.getElementById('navDemoControl');
            const navDemoBtn = document.getElementById('navDemoBtn');
            const navDemoText = document.getElementById('navDemoText');
            const navDemoIcon = document.getElementById('navDemoIcon');
            const centeredButton = document.getElementById('centeredDemoButton');
            const demoLeftSide = document.getElementById('demoLeftSide');
            
            if (!demoStarted) {
                // First time starting demo
                console.log('🚀 Starting demo from manual button click');
                
                // Hide centered button and show navigation control
                if (centeredButton) {
                    centeredButton.style.opacity = '0';
                    centeredButton.style.transform = 'scale(0.8)';
                    centeredButton.style.transition = 'all 0.3s ease';
                    
                    setTimeout(() => {
                        centeredButton.style.display = 'none';
                    }, 300);
                }
                
                // Remove blur and restore demo container
                if (demoLeftSide) {
                    demoLeftSide.style.opacity = '1';
                    demoLeftSide.style.filter = 'none';
                    demoLeftSide.style.transition = 'all 0.5s ease';
                }
                
                // Show navigation demo control button
                if (navDemoControl) {
                    navDemoControl.classList.add('active');
                    console.log('✅ Navigation demo control button shown');
                }
                
                // Focus on demo container
                const demoSection = document.getElementById('demo');
                if (demoSection) {
                    const headerHeight = document.querySelector('.header').offsetHeight || 80;
                    // Get demo section's padding-top to offset it
                    const demoStyles = window.getComputedStyle(demoSection);
                    const demoPaddingTop = parseInt(demoStyles.paddingTop) || 0;
                    const targetPosition = demoSection.offsetTop + demoPaddingTop - headerHeight;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
                
                // Navigation button is already in pause state by default
                
                
                // Start the demo after a short delay for scroll
                setTimeout(() => {
                    startAutoDemo();
                }, 500);
            } else if (demoPaused) {
                // Resume demo
                console.log('▶️ Resuming demo');
                resumeDemo();
                
                // Update navigation button to pause state
                if (navDemoText) navDemoText.textContent = 'השהה דמו';
                if (navDemoIcon) navDemoIcon.className = 'fas fa-pause';
                
            } else {
                // Pause demo
                console.log('⏸️ Pausing demo');
                pauseDemo();
                
                // Update navigation button to resume state
                if (navDemoText) navDemoText.textContent = 'המשך דמו';
                if (navDemoIcon) navDemoIcon.className = 'fas fa-play';
                
            }
        }
        
        // Function to toggle demo with scroll to demo section only for resume
        function toggleDemoWithScroll() {
            console.log('🎯 toggleDemoWithScroll called from mobile navigation');
            
            // Check if demo is currently paused (if so, we need to scroll before resuming)
            if (demoPaused) {
                // Demo is paused, scroll to demo section before resuming
                // Scroll to the actual demo content, not the section with padding
                const demoSection = document.getElementById('demo');
                if (demoSection) {
                    const headerHeight = document.querySelector('.header').offsetHeight || 80;
                    // Get demo section's padding-top to offset it
                    const demoStyles = window.getComputedStyle(demoSection);
                    const demoPaddingTop = parseInt(demoStyles.paddingTop) || 0;
                    const targetPosition = demoSection.offsetTop + demoPaddingTop - headerHeight;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
                
                // Resume demo after scroll animation
                setTimeout(() => {
                    startDemo();
                }, 300);
            } else {
                // Demo is running, just pause it without scrolling
                startDemo();
            }
        }


        // Add styles for animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(-100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes popupSlideIn {
                from { transform: translateY(30px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
            
            @keyframes bounce {
                0%, 20%, 53%, 80%, 100% { transform: translateY(0); }
                40%, 43% { transform: translateY(-8px); }
                70% { transform: translateY(-4px); }
                90% { transform: translateY(-2px); }
            }
            
            @keyframes messengerSlideIn {
                from { 
                    transform: scale(0.8) translateY(40px); 
                    opacity: 0; 
                }
                to { 
                    transform: scale(1) translateY(0); 
                    opacity: 1; 
                }
            }
            
            @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
            }
            
            
            /* BOMBASTIC STATS ANIMATIONS */
            @keyframes backgroundPulse {
                0%, 100% { opacity: 0.3; transform: scale(1); }
                50% { opacity: 0.8; transform: scale(1.1); }
            }
            
            @keyframes gradientShift {
                0%, 100% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
            }
            
            @keyframes textGlow {
                0%, 100% { 
                    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                    transform: scale(1);
                }
                50% { 
                    text-shadow: 0 4px 30px rgba(255, 255, 255, 0.3), 0 0 40px rgba(59, 130, 246, 0.4);
                    transform: scale(1.02);
                }
            }
            
            @keyframes floatUp {
                0%, 100% { transform: translateY(0px) scale(1); }
                33% { transform: translateY(-8px) scale(1.02); }
                66% { transform: translateY(-4px) scale(1.01); }
            }
            
            @keyframes borderGlow {
                0%, 100% { opacity: 0.5; transform: rotate(0deg); }
                50% { opacity: 1; transform: rotate(180deg); }
            }
            
            @keyframes numberPulse {
                0%, 100% { 
                    transform: scale(1);
                    filter: brightness(1);
                }
                50% { 
                    transform: scale(1.1);
                    filter: brightness(1.3) saturate(1.2);
                }
            }
            
            @keyframes sparkle {
                0%, 100% { 
                    transform: scale(1) rotate(0deg);
                    opacity: 0.8;
                }
                25% { 
                    transform: scale(1.2) rotate(90deg);
                    opacity: 1;
                }
                50% { 
                    transform: scale(1.4) rotate(180deg);
                    opacity: 0.9;
                }
                75% { 
                    transform: scale(1.2) rotate(270deg);
                    opacity: 1;
                }
            }
            
        `;
        document.head.appendChild(style);

        // Advanced Navigation Functions
        function initAdvancedNavigation() {
            // Scroll progress indicator
            function updateScrollProgress() {
                const scrollProgress = document.querySelector('.scroll-progress');
                if (scrollProgress) {
                    const scrollTop = window.pageYOffset;
                    const docHeight = document.body.scrollHeight - window.innerHeight;
                    const scrollPercent = (scrollTop / docHeight) * 100;
                    scrollProgress.style.width = scrollPercent + '%';
                }
            }

            // Active navigation state management
            function updateActiveNavState() {
                const sections = document.querySelectorAll('section[id]');
                const navLinks = document.querySelectorAll('.nav-link');
                
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (window.pageYOffset >= sectionTop - 200) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    const navItem = link.parentElement;
                    navItem.classList.remove('active');
                    if (link.getAttribute('href') === '#' + current) {
                        navItem.classList.add('active');
                    }
                });
            }

            // Mobile menu toggle functionality
            function initMobileMenu() {
                const mobileToggle = document.querySelector('.mobile-menu-toggle');
                const navMenu = document.querySelector('.nav-menu');
                
                if (mobileToggle && navMenu) {
                    mobileToggle.addEventListener('click', () => {
                        navMenu.classList.toggle('mobile-active');
                        
                        // Animate hamburger lines
                        const spans = mobileToggle.querySelectorAll('span');
                        spans.forEach((span, index) => {
                            if (navMenu.classList.contains('mobile-active')) {
                                if (index === 0) span.style.transform = 'rotate(45deg) translate(6px, 6px)';
                                if (index === 1) span.style.opacity = '0';
                                if (index === 2) span.style.transform = 'rotate(-45deg) translate(6px, -6px)';
                            } else {
                                span.style.transform = '';
                                span.style.opacity = '';
                            }
                        });
                    });

                    // Close mobile menu when clicking outside
                    document.addEventListener('click', (e) => {
                        if (!mobileToggle.contains(e.target) && !navMenu.contains(e.target)) {
                            navMenu.classList.remove('mobile-active');
                            const spans = mobileToggle.querySelectorAll('span');
                            spans.forEach(span => {
                                span.style.transform = '';
                                span.style.opacity = '';
                            });
                        }
                    });
                }
            }

            // Enhanced smooth scrolling with navigation effects
            function enhanceSmoothScrolling() {
                document.querySelectorAll('.nav-link[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const targetId = this.getAttribute('href').substring(1);
                        const targetSection = document.getElementById(targetId);
                        
                        if (targetSection) {
                            // Close mobile menu if open
                            const navMenu = document.querySelector('.nav-menu');
                            if (navMenu && navMenu.classList.contains('mobile-active')) {
                                navMenu.classList.remove('mobile-active');
                            }

                            // Smooth scroll with enhanced easing
                            targetSection.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });

                            // Add temporary glow effect to target section
                            targetSection.style.boxShadow = '0 0 30px rgba(59, 130, 246, 0.3)';
                            setTimeout(() => {
                                targetSection.style.boxShadow = '';
                            }, 2000);
                        }
                    });
                });
            }

            // Initialize all navigation features
            updateScrollProgress();
            updateActiveNavState();
            initMobileMenu();
            enhanceSmoothScrolling();

            // Add scroll event listeners
            let scrollTimeout;
            window.addEventListener('scroll', () => {
                updateScrollProgress();
                
                // Throttle active state updates for performance
                if (scrollTimeout) clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(updateActiveNavState, 100);
            });

            // Add resize listener for responsive behavior
            window.addEventListener('resize', () => {
                updateScrollProgress();
                updateActiveNavState();
            });
        }


        // Initialize demo on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM Content Loaded');
            
            // Initialize animated stars
            createStars();
            
            // Initialize advanced navigation
            initAdvancedNavigation();
            
            // Status text will be initialized by demo when it starts
            
            // Demo observer disabled - manual start only
            const demoSection = document.getElementById('demo');
            if (demoSection) {
                console.log('Demo section found - manual start mode enabled');
                initDemoObserver(); // Just logs that observer is disabled
            }
            
            // Add smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        });

        // Contact form handling
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitButton = this.querySelector('button[type="submit"]');
            const originalText = submitButton.innerHTML;
            
            // Show loading state
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> שולח...';
            submitButton.disabled = true;
            
            // Get form data
            const formData = new FormData();
            const fullName = document.getElementById('fullName').value;
            const phone = document.getElementById('phone').value;
            const businessType = document.getElementById('businessType').value;
            const otherBusiness = document.getElementById('otherBusiness').value;
            const location = document.getElementById('location').value;
            
            // Determine business type value
            const businessValue = businessType === 'other' ? otherBusiness : businessType;
            
            // Send to Google Form with actual field IDs
            const googleFormData = new FormData();
            googleFormData.append('entry.50234945', fullName); // שם מלא
            googleFormData.append('entry.1686824264', phone); // מספר טלפון  
            googleFormData.append('entry.596595248', businessValue); // תחום פעילות
            googleFormData.append('entry.1222583304', location); // אזור פעילות
            
            // Submit to Google Form
            fetch('https://docs.google.com/forms/d/e/1FAIpQLScVJM-0WcAJvPClZCNxCLhl_hgRv5Qha3UZPE8-VGChYqXynw/formResponse', {
                method: 'POST',
                mode: 'no-cors',
                body: googleFormData
            }).then(() => {
                submitButton.innerHTML = '<i class="fas fa-check"></i> נשלח בהצלחה!';
                submitButton.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                
                // Reset form
                this.reset();
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    submitButton.innerHTML = originalText;
                    submitButton.disabled = false;
                    submitButton.style.background = '';
                }, 3000);
            }).catch(() => {
                // Even on error, show success since no-cors mode doesn't return real status
                submitButton.innerHTML = '<i class="fas fa-check"></i> נשלח בהצלחה!';
                submitButton.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                
                // Reset form
                this.reset();
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    submitButton.innerHTML = originalText;
                    submitButton.disabled = false;
                    submitButton.style.background = '';
                }, 3000);
            });
        });
    </script>
</body>
</html>
